<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.26" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>[译]Passport 文档（一）入门 | Rowan Liu's Tech</title><meta name="description" content="just do it! ">
    <link rel="preload" href="/FrontEnd/assets/style-Dgw7cJie.css" as="style"><link rel="stylesheet" href="/FrontEnd/assets/style-Dgw7cJie.css">
    <link rel="modulepreload" href="/FrontEnd/assets/app-DxUSmTbc.js"><link rel="modulepreload" href="/FrontEnd/assets/01-general.html-B6cZQMp5.js">
    <link rel="prefetch" href="/FrontEnd/assets/index.html-MI6RX2_A.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/01-CREATE.html-C3BOl5ec.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/02-SELECT.html-BcYMGBfs.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/03-GROUP BY.html-Cg3ulff8.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-CzRbdv1N.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-DpNwstFa.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/PAC.html-BWquVteU.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-C79xyKlO.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Block-Formatting-Context.html-CvpaV7fo.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/flex.html-Db0t7dNC.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/grid.html-DaVKdh5U.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/inline-block.html-D3RUYwEq.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/layout.html-Brvz720x.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/preprocess.html-BeYexCNk.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-DlxXJkfb.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/rem.html-AJdC53oP.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/responsive-web-design.html-BTEEx45v.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/selector.html-C8ppaHyA.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-BqhZNDZg.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-DpuaxAE-.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-JR6z1KSt.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-C7nrG9Xn.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-CCRIpC5u.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-BU432prd.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/OOP.html-DxWG6NRy.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-DTj1Okbe.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/validateForm.html-BHN99sVz.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-D-eOTBWT.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/css.html-vQ2kt3Cd.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/js.html-BOPpzKj2.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Node.js Architecture and 12 Best Practices for Node.js Development.html-BNQcnSj1.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-Br6Uxvk3.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Top 10 ways to use Interceptors in Angular.html-CEnNrtfM.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/core-js@3_ babel and a look into the future.html-DIiW2Je9.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/making-vue-3.html-BJS-aLyK.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/vue-cli-plugin-dev.html-DnyNknD1.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/vue-cli-plugin-eslint-readme.html-DKQ81fiv.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/vue-cli-plugin-typescript-readme.html-CPtE4tD7.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/what-you-need-know-about-Vue-3-in-2020.html-DTccWmeE.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/2018-dev-guide.html-BKRIXcZI.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/FrontEndLive.html-CrSGnwRf.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/architecture.html-CnF_pAWb.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/ci.html-BeKyTI33.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/for.html-D_wWMQWb.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/gzip.html-RniRzrY5.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/jQuery.html-CXXNfO_q.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/lerna.html-D97yLFJO.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/useGulp.html-Ef0avzpp.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/vue-cli2-to-vue-cli3.html-BlnPvU2Y.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/vue3.html-Y7rDZEy5.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/vueComponent.html-DhS_0nXO.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/01-Reflect-Metadata.html-BonjDoy7.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-BWMs7XmD.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Generator-async.html-ucxRVnO0.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Generator.html-o8gmw2J5.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Iterator-for...of.html-FyrwcyVX.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Promise.html-BZ9D4V87.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Proxy-Reflect.html-d5hTsF8L.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Set-Map.html-CTptHIpJ.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/String-extension.html-D97uoyuw.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Symbol.html-8J2b8zod.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/async-await-promise.html-4A2ouMX4.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/function-extension.html-DRdXhrcg.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/let-const.html-BocQ42qy.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/number-extension.html-BQ9zn8II.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/object-extension.html--AUDheCc.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-DkhFJG0g.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/variable-destructor-assignment.html-BfXXHVpe.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/ajax.html-DErdzPdH.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/apply-call.html-DGD2eDnR.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/arguments.html-BGikcg_3.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/calc-box-size.html-Yyh2mfVI.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/cookie.html-Clnrj-Et.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/drag.html-sHG1FHJJ.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/01-change-detection.html-DMXmjNRh.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/02-view-engine-vs-ivy.html-CkQrSkrM.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/03-zone.html-DjAwoaGT.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/04-version-update.html-CPAoWfhv.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-BqggozYG.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/init.html-BYUpEIXI.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-NHZUHm8C.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-CFs2e0gT.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-WdL7tpi7.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/01-OAuth_2.0.html-CSJbon7J.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/03-MongoDB.html-CCLjXr97.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/lots_of_passport.html-DnUdByCO.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/sso.html-BLdh4pMO.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/00-react.html-BJneuYGX.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/01-start-project.html-DUOuytUv.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/02-a-language.html-ghLn70Or.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/00-vue.html-Ciq_JKuu.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/01-flow.html-BumrJ4xk.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/02-src-structure.html-BmQW0XOY.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/03-compile.html-CwGgwprV.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/04-entry.html-CRAeBNJO.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/10-data-driven.html-CHQEPszc.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/11-new-Vue.html-xzxqGXoy.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/12-vue-mounted.html-AVltkMX8.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/13-render.html-CTAJNmqT.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/14-virtual-DOM.html-BcwsaWU1.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/15-createElement.html-DrHu9ny2.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/16-update.html-Bhm_uDII.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/20-components.html-VgNhMODi.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/30-responsive.html-CrnJT01w.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-BM5T9s7j.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-C5wDd9ug.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/vs-build-size.html-CHrJnrQq.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/01-remark.html-CnTiWUJN.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-DBYLzRGM.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/webpack-5-federated-module.html-NvKo3KBL.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/cnodejs.html-QtAOCrCj.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/01-overview.html-BPmhFYP0.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/02-terminology-concept.html-BFRlcJ68.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/01.html-DetkOp-O.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-F58VHCqt.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Artifact.html-rI727GZg.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Audit-Manager.html-D1Ca5RK5.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Bedrock.html-iRJFLmSJ.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Comprehend.html-BUpM9Ket.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Data-Exchange.html-CP-yXiTE.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Inspector.html-D8k5jX07.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Lex.html-DW_Dh45Z.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Macie.html--LVigAJt.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/OpenSearch-Service.html-CBBskO5S.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Personalize.html-Jhi1WLHH.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Q-developer.html-h-VfPS6y.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/QuickSight.html-BV1YQqo_.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/SageMaker.html-AJLPBelO.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Transcribe.html-Bn9cSjfy.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Trusted-Advisor.html-snqR52w7.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/BERTScore.html-CtsZ7JW5.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/CFG-scale.html-CuPp2tNf.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Epoch.html-I-PSaOpP.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/F1-Store.html-BeqLNN84.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Generate-pre-trained-Transformers.html-DZrBExRu.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Generative-adversarial-network.html-DzDZToHI.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Hallucination.html-DQopepHh.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Matrix-Confusion.html-CiDxocbW.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Matrix-Correlation.html-YK82qz84.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Matrix-Mean-Squared-Error.html-BKIXTnBH.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Matrix-R2-score.html-CLECEeG_.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/RLHF.html-0biuWvt4.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Recall-Oriented Understudy.html-vG3mhxI8.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Reinforcement-learning.html-C7q4vj0x.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Residual-neural-network.html-CAx1Bm00.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Responsible-generative-ai.html-CmhKkCBx.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Supervised-learning.html-Cmmzg03h.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Support-vector-machine.html-CKplNxVa.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Transfer-learning.html-CNGcUkGA.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Unsupervised-learning.html-DMREUXfI.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/WaveNet.html-s8BIL1Yy.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/XGBoost.html-BmS6mCJ4.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/019-train.html-D_EJ3FyW.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/021-OpenSearch-Service.html-DADTCywf.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/024-prompt-engineering.html-B9OuCAgm.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/029-Prompt-injection.html-CKvVrSbS.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/030-security-responsibility.html-C23Dd3tl.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/031-image-classify.html-3zrd6PaL.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/032-GPT.html-CvyHWkN8.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/036-Inference.html-CTPK24yB.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/041-Epoch.html-Bp8It3QA.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/043-SageMaker-Clarify.html-BFvuZJLv.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/044-performance-decreased.html-CqbhAA-p.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/046-chat-with-PDF.html-CvsDE6du.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/047-evalute-the-output.html-CdmBdm64.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/048-aligns-FM.html-Bp41c0e5.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/049-responsive-minimize-bias.html-DiGEviu6.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/050-must-do-to-custom-model-bedrock.html-Ba5Jj6ca.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/053-ec2-ai-type.html-DQuhQAro.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/055-type-of-model.html-ywvQ8kC4.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/057-sampling-bias.html-7XF7TlEf.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/058-RL.html-Bqu_6sMk.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/059-matrix.html-CIT_jk61.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/060-find-offensive.html-PpDYa9RI.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/062-offline-large-data-process.html-DzzcpqgK.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/064-fine-turning.html-DSjma3cX.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/065-temperatrue-high-low.html-CjznMnC9.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/066-security-policy.html-Cqi9SKow.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/070-strategy-of-img-classification.html-FxrijtZ6.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/072-few-shot.html-f06tbgPg.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/073-bedrock-on-demand-pay.html-CRvvj4jX.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/074-hallucination.html-C8Z97VVI.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/075-confidential-data.html-B7dEKrYm.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/076-BLEU.html-D06krtcf.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/077-agents-in-bedrock.html-ZKCRNQ5N.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/078-ongoing-pre-training.html-Xv-gsvsQ.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/081-s3-to-SageMaker.html-i-gibkZo.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/083-prompting-attack.html-DZUYv--K.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/087-SageMaker-network-isolation.html-CUMegZtB.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/089-developer-tools.html-CbvPcZq7.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/092-Adversarial-prompting.html-CIQSCa9o.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/093-judge-fine-tuned-LLM.html-BsOoNsdG.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/094-CFG-scale.html-IrQvO0Bg.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/097-Fairness.html-DBbeFs1G.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/099-BERTScore.html-CMo5iQMN.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/100-K-NN.html-CJ35lj99.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/001-250107.html-B2vLzUoU.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0011-250321.html-CbWclq9J.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/002-250113.html-ESQXgEIT.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0021-250323.html-CvVyvTng.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/003-250115.html-COqTbNGp.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0031-250324.html-B86Lg17Z.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/004-250119.html-BbeR74V0.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0041-250408.html-dV03wyBw.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/005-250130.html-HlRHFZMI.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0051-250414.html-DaHJZzVX.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/006-250203.html-DDNiOMC_.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0061-250505.html-BA9Z2kFZ.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/APIGateway.html-CyiUppE3.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/AppFlow.html-Db_8KTvT.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Athena.html-Cg-YCZuG.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Aurora.html-CoXwXIVE.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/AutoScaling.html-Dq2bhRt_.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Backup.html-DEGn5uzA.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/CertificateManager.html-cLR6z0EQ.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/CloudFormation.html-9bS-cfmB.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/CloudFront.html-BSY31bFB.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/CloudTrail.html-C_aq5rCq.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/CloudWatch.html-5-LuKHqh.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Cognito.html-Dlelvz5v.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Comprehend.html-ebq8oYCv.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/ComprehendMedical.html-BAcZaYLB.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Config.html-C10C1-3G.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/ControlTower.html-BtOmlx4C.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/DR.html-2ILzbsPX.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/DataSync.html-BuPvGjV_.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/DatabaseCaching.html-Bv5Tf5MJ.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/DatabaseMigrationService.html-WdIFb76u.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/DirectConnect.html-C_VXS5-o.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/DirectoryService.html-ULNAzhrx.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/DynamoDB.html-BEq70Cyx.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/DynamoDBAccelerator.html-BNU-hhPh.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/EBS.html-DFWQy7P3.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/EC2.html-CjveUU9Q.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/EC2AutoScaling.html-i83cS38-.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/ECS.html-Dsz5Mljj.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/EFS.html-B6EODsAE.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/EKS.html-BXOWYLAc.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/ELB.html-D3NvQzfx.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/EMR.html-DWD8wErL.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/ElasticBeantalk.html-DWQRO7-S.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/ElasticCache.html-cPRLDDbU.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/EventBridge.html-Dhra8J10.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/FSxFileGateway.html-CcDh-RTM.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/FSxForLustre.html-Yhfc3gLT.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/FXsForWindowsFileServer.html-B72E7GAD.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Fargate.html-8SpZFFXF.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/FirewallManager.html-xlzkEfyN.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/GlobalAccelerator.html-C32v3ZRq.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Glue.html-MRSfyIH6.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/GuardDuty.html-Bfx0SQzn.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/IAM.html-DtqMUIVV.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Inspector.html-mERx7aVF.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/KMS.html-SB1DCPw_.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/KinesisDataFirehose.html-BYcyiuSB.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/KinesisDataStream.html-Cdab5Xaa.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/LakeFormation.html-CuO13CPw.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Lambda.html-N_92XIDG.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/MQ.html-CMeKm6DS.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Macie.html-DuDxJL1Y.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/NetworkFirewall.html-DTKOswTy.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/OpenSearchService.html-CD8W9_ps.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Orgnizations.html-D2_DoOZO.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/PrivateLink.html-DwdlIF5W.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/QuickSight.html-BR_c8uE0.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/RDS.html-DLgjPKm_.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/RDSProxy.html-bIZLZFeq.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/RedShift.html-edBWVsoP.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Rekognition.html-BYegYocX.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Route53.html-DuNpJhAW.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/S3.html-BcW0Nlm1.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/SNS.html-AKt9S0MP.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/SQS.html-CTToTOMY.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/SageMaker.html-CIal8JP9.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/SecretsManager.html-3jVCsdMC.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Shield.html-DiBw6WJK.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/SnowFamily.html-Ca3WqxrM.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/StorageGateway.html-Cg6eI-K3.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/SystemsManager.html-H6b592yo.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Textract.html-Ydy-eCAu.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/TransferFamily.html-BFE1TWy9.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/TransitGateway.html-bTymTnZK.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/VPC.html-CtDXPaDf.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/WAF.html-YH_18ZJw.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/02-providers.html-CwN1Wc5D.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/03-apis.html-D1U5v2kw.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/04-operations.html-B47mbx7l.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-BXksl1Iw.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-CVbYjV-c.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-Diu7KXqw.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-B5rQHbHA.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-mjgIP1xH.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-B9TrOCZ8.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-BeEfbVD0.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-BSOW3ycG.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-CCZEM30K.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/index.html-DxZBSICY.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Self-test-01-10.html-CDgXoL_i.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Self-test-11-20.html-CiUaDtc2.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Self-test-21-30.html-EmcN0uSu.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Self-test-31-40.html-DyTvUS4O.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Self-test-41-50.html-Cn7dkPiB.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/Self-test-51-60.html-DL6YL-cx.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/wrong-list.html-MX6jFz-X.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0000-Questions.html-B1R9RPlc.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0001-Answers.html-BKHWutmf.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0010-Questions.html-CbJheEgM.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0011-Answers.html-BXDle9TL.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0020-Questions.html-CZ1ltf8a.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0021-Answers.html-4DmaxOIl.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0030-Questions.html-DSx0q978.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0031-Answers.html-DGrodcfF.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0040-Questions.html-D6ZK9nS7.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0041-Answers.html-DuYEEFvf.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0050-Questions.html-Ymm7EV4_.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0051-Answers.html-DKTBrhg1.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0060-Questions.html-wbYLBdCo.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0061-Answers.html-Wn8KAKn9.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0070-Questions.html-CZCw5Rvu.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0071-Answers.html-NCSLx_7i.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0080-Questions.html-BA8S3ZGH.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0081-Answers.html-DXCWMy0i.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0090-Questions.html-D8jxZmk6.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0091-Answers.html-SSfFqG2r.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0100-Questions.html-DVxXpfWq.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0101-Answers.html-d31dbAGG.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0110-Questions.html-BiESxucT.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0111-Answers.html-5DP2F_QN.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0120-Questions.html-c_ElI9qx.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0121-Answers.html-BAoqHzYT.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0130-Questions.html-CTzGUeXK.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0131-Answers.html-BJAq1tae.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0140-Questions.html-ENjC5hzu.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0141-Answers.html-CiorFWFN.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0150-Questions.html-BO7D13rq.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0151-Answers.html-4duh023G.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0160-Questions.html-C_A1Y1XF.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0161-Answers.html-DYMA8W1S.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0170-Questions.html-C567h1EJ.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0171-Answers.html-DvEtB6lL.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0180-Questions.html-rfo9PIPR.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0181-Answers.html-DWIS5F6f.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0190-Questions.html-CYe6sdSR.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/0191-Answers.html-BIpOn6ii.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/404.html-yqaA_6Ts.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/FrontEnd/"><!----><span class="vp-site-name" aria-hidden="true">Rowan Liu&#39;s Tech</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/FrontEnd/" aria-label="Home"><!--[--><!--[--><!--]--><!--]-->Home<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/FrontEnd/blog/" aria-label="Blog"><!--[--><!--[--><!--]--><!--]-->Blog<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/FrontEnd/css/" aria-label="CSS"><!--[--><!--[--><!--]--><!--]-->CSS<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/FrontEnd/js/" aria-label="JS"><!--[--><!--[--><!--]--><!--]-->JS<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/FrontEnd/lib/" aria-label="lib"><!--[--><!--[--><!--]--><!--]-->lib<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/FrontEnd/read/" aria-label="Read"><!--[--><!--[--><!--]--><!--]-->Read<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://rowanliu.com/about" aria-label="About" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->About<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/llccing/FrontEnd" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/FrontEnd/" aria-label="Home"><!--[--><!--[--><!--]--><!--]-->Home<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/FrontEnd/blog/" aria-label="Blog"><!--[--><!--[--><!--]--><!--]-->Blog<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/FrontEnd/css/" aria-label="CSS"><!--[--><!--[--><!--]--><!--]-->CSS<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/FrontEnd/js/" aria-label="JS"><!--[--><!--[--><!--]--><!--]-->JS<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/FrontEnd/lib/" aria-label="lib"><!--[--><!--[--><!--]--><!--]-->lib<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/FrontEnd/read/" aria-label="Read"><!--[--><!--[--><!--]--><!--]-->Read<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://rowanliu.com/about" aria-label="About" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->About<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/llccing/FrontEnd" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading" href="/FrontEnd/lib/" aria-label="框架"><!--[--><!--[--><!--]--><!--]-->框架<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/FrontEnd/lib/vue-cli/" aria-label="Vue ClI 源码探索"><!--[--><!--[--><!--]--><!--]-->Vue ClI 源码探索<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">vue 源码解读 <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/vue-analysis/00-vue.html" aria-label="Vue.js技术揭秘"><!--[--><!--[--><!--]--><!--]-->Vue.js技术揭秘<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/vue-analysis/01-flow.html" aria-label="Flow"><!--[--><!--[--><!--]--><!--]-->Flow<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/vue-analysis/02-src-structure.html" aria-label="Vue.js源码目录设计"><!--[--><!--[--><!--]--><!--]-->Vue.js源码目录设计<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/vue-analysis/03-compile.html" aria-label="Vue.js源码构建"><!--[--><!--[--><!--]--><!--]-->Vue.js源码构建<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/vue-analysis/04-entry.html" aria-label="从入口开始"><!--[--><!--[--><!--]--><!--]-->从入口开始<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/vue-analysis/10-data-driven.html" aria-label="数据驱动"><!--[--><!--[--><!--]--><!--]-->数据驱动<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/vue-analysis/11-new-Vue.html" aria-label="new Vue发生了什么"><!--[--><!--[--><!--]--><!--]-->new Vue发生了什么<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/vue-analysis/12-vue-mounted.html" aria-label="Vue实例挂载的实现"><!--[--><!--[--><!--]--><!--]-->Vue实例挂载的实现<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/vue-analysis/13-render.html" aria-label="render"><!--[--><!--[--><!--]--><!--]-->render<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/vue-analysis/14-virtual-DOM.html" aria-label="Virtual DOM"><!--[--><!--[--><!--]--><!--]-->Virtual DOM<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/vue-analysis/15-createElement.html" aria-label="createElement"><!--[--><!--[--><!--]--><!--]-->createElement<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/vue-analysis/16-update.html" aria-label="update"><!--[--><!--[--><!--]--><!--]-->update<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/vue-analysis/20-components.html" aria-label="组件化"><!--[--><!--[--><!--]--><!--]-->组件化<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">threejs journey <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/threejs/00-start/" aria-label="three.js"><!--[--><!--[--><!--]--><!--]-->three.js<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/threejs/01-hello-world/" aria-label="第一章我们做了什么"><!--[--><!--[--><!--]--><!--]-->第一章我们做了什么<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/threejs/02-basic-component/" aria-label="基本组件"><!--[--><!--[--><!--]--><!--]-->基本组件<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/threejs/03-light/" aria-label="光源"><!--[--><!--[--><!--]--><!--]-->光源<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/threejs/04-material/" aria-label="材质"><!--[--><!--[--><!--]--><!--]-->材质<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/threejs/05-geometry/" aria-label="学习使用几何体"><!--[--><!--[--><!--]--><!--]-->学习使用几何体<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/threejs/06-high-geometry/" aria-label="高级几何体和二元操作"><!--[--><!--[--><!--]--><!--]-->高级几何体和二元操作<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/threejs/07-praticle/" aria-label="粒子和粒子系统"><!--[--><!--[--><!--]--><!--]-->粒子和粒子系统<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/threejs/08-import-high-geometry/" aria-label="创建、加载高级网格和几何体"><!--[--><!--[--><!--]--><!--]-->创建、加载高级网格和几何体<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/threejs/webgl/" aria-label="/lib/threejs/webgl/"><!--[--><!--[--><!--]--><!--]-->/lib/threejs/webgl/<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">react journey <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/react/00-react.html" aria-label="React"><!--[--><!--[--><!--]--><!--]-->React<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/react/01-start-project.html" aria-label="Ant Design"><!--[--><!--[--><!--]--><!--]-->Ant Design<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">vuepress <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/vuepress/01-remark.html" aria-label="评论"><!--[--><!--[--><!--]--><!--]-->评论<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">egg <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/egg/init.html" aria-label="egg init"><!--[--><!--[--><!--]--><!--]-->egg init<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">jQuery系列 <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/jquery/" aria-label="jQuery一个在JavaScript基础之上封装的函数库。"><!--[--><!--[--><!--]--><!--]-->jQuery一个在JavaScript基础之上封装的函数库。<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active collapsible">nestjs <span class="down arrow"></span></p><ul class="vp-sidebar-children" style=""><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/nestjs/01-OAuth_2.0.html" aria-label="OAuth 2.0"><!--[--><!--[--><!--]--><!--]-->OAuth 2.0<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/FrontEnd/lib/nestjs/passport/01-general.html" aria-label="[译]Passport 文档（一）入门"><!--[--><!--[--><!--]--><!--]-->[译]Passport 文档（一）入门<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/nestjs/passport/02-providers.html" aria-label="[译]Passport 文档（二）提供者"><!--[--><!--[--><!--]--><!--]-->[译]Passport 文档（二）提供者<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/nestjs/passport/03-apis.html" aria-label="[译]Passport 文档（三）基本 &amp; 摘要"><!--[--><!--[--><!--]--><!--]-->[译]Passport 文档（三）基本 &amp; 摘要<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/FrontEnd/lib/nestjs/passport/04-operations.html" aria-label="[译]Passport 文档（四）操作"><!--[--><!--[--><!--]--><!--]-->[译]Passport 文档（四）操作<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div id="content"><h1 id="译-passport-文档-一-入门" tabindex="-1"><a class="header-anchor" href="#译-passport-文档-一-入门"><span>[译]Passport 文档（一）入门</span></a></h1><p><a href="http://www.passportjs.org/docs/downloads/html/" target="_blank" rel="noopener noreferrer">http://www.passportjs.org/docs/downloads/html/</a> 原文地址</p><h2 id="概览" tabindex="-1"><a class="header-anchor" href="#概览"><span>概览</span></a></h2><p>Passport 是 NodeJS 的认证中间件。他的唯一设计目的是：验证请求。书写模块化的、封装代码是一种美德，所以 Passport 将除了验证请求之外的功能都分发给应用程序来实现。关注点分离使代码能够更加整洁、可维护，同时也使 Passport 能够极易集成到应用中。</p><p>现在 Web 程序，认证有多种形式。传统的，用户通过用户名、密码登录。随着社交网络使用上升，使用 OAuth 的单点登录，例如 <a href="https://www.facebook.com/" target="_blank" rel="noopener noreferrer">Facebook</a> 或者 <a href="https://twitter.com/" target="_blank" rel="noopener noreferrer">Twitter</a> 已经成为了一种流行的认证方式。暴露一个 API 的服务通常需要基于 token 的证书来保护访问。</p><p>Passport 认识到每个应用有自己独特的认证需求。认证机制，也被成为策略，被打包成单独的模块。应用能够选择采用的策略，无需创建不需要的依赖。</p><p>不管认证的复杂性，代码能够不变的复杂。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span> passport<span class="token punctuation">.</span><span class="token function">authentication</span><span class="token punctuation">(</span><span class="token string">&#39;local&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">successRedirect</span><span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">failureRedirect</span><span class="token operator">:</span> <span class="token string">&#39;/login&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>安装</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">npm install passport</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="认证" tabindex="-1"><a class="header-anchor" href="#认证"><span>认证</span></a></h2><p>认证请求就像调用 <code>passport.authenticate()</code> 和指定采用哪种策略一样简单。<code>authenticate()</code> 的函数签名是标准的 <a href="http://www.senchalabs.org/connect/" target="_blank" rel="noopener noreferrer">Connect</a> 中间件，所以能够方便的作为路由中间件在 <a href="http://expressjs.com/" target="_blank" rel="noopener noreferrer">Express</a> 应用中使用。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">&#39;local&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 如果这个函数被调用，说明认证成功。</span></span>
<span class="line">        <span class="token comment">// `req.user` 包含认证的 user</span></span>
<span class="line">        res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&#39;/user&#39;</span><span class="token punctuation">,</span> <span class="token operator">+</span> req<span class="token punctuation">.</span>user<span class="token punctuation">.</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>默认情况下，如果认证失败，Passport 将返回 <code>401 Unauthorized</code>，后续其他的路由处理器将不会执行。如果认证成功，下个处理器将调用，<code>req.user</code> 属性将设置为认证 user。</p><p>注意：在路由使用策略时，一定要预先配置。继续阅读详细<a href="http://www.passportjs.org/guide/configure/" target="_blank" rel="noopener noreferrer">配置 todo </a>章节。</p><h3 id="重定向" tabindex="-1"><a class="header-anchor" href="#重定向"><span>重定向</span></a></h3><p>重定向通常是在认证请求之后发出的。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">&#39;local&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">successRedirect</span><span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">failureRedirect</span><span class="token operator">:</span> <span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这种情况下，重定向选项将覆盖默认行为。若成功认证，用户将重定向到主页。若认证失败，用户将重定向返回到登录页去再次尝试。</p><h3 id="即时消息-flash-messages" tabindex="-1"><a class="header-anchor" href="#即时消息-flash-messages"><span>即时消息（Flash Messages）</span></a></h3><p>重定向通常和即时消息结合来展示用户的状态信息。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">&#39;local&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">successRedirect</span><span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">failureRedirect</span><span class="token operator">:</span> <span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">failureFlash</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>设置 <code>failureFlash</code> 选项为 true，指示 Passport 去发送 来自策略验证回调的 <code>error</code> 信息。这通常是最好的方法，因为验证回调能够最准确的判断为什么认证失败。</p><p>或者，即时消息能够自定义设置。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">&#39;local&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">failureFlash</span><span class="token operator">:</span> <span class="token string">&#39;无效用户名或者密码。&#39;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>successFlash</code> 选项能够发送一个 <code>success</code> 的消息，在认证成功的时候。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">&#39;local&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">successFlash</span><span class="token operator">:</span> <span class="token string">&#39;欢迎！&#39;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：使用即时消息需要 <code>req.flash()</code> 函数。Express 2.x 提供了这个功能，不过 Express 3.x 移除了。在使用 Express 3.x 时，建议使用 <a href="https://github.com/jaredhanson/connect-flash" target="_blank" rel="noopener noreferrer">connect-flash</a> 中间件，它提供了这个功能。</p><h3 id="禁止-sessions" tabindex="-1"><a class="header-anchor" href="#禁止-sessions"><span>禁止 Sessions</span></a></h3><p>成功授权后，Passport 将建立一个持久的登录 session。对于用户通过浏览器访问 web 应用的场景这是有用的。然后，其他情况下，不需要 session 支持。例如，API 服务器通常需要每个请求携带凭证。这种情况下，session 支持能够通过设置 session 选项为 false 来安全的禁用。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/api/users/me&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">&#39;basic&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">session</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span> req<span class="token punctuation">.</span>user<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token literal-property property">username</span><span class="token operator">:</span> req<span class="token punctuation">.</span>user<span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="自定义回调" tabindex="-1"><a class="header-anchor" href="#自定义回调"><span>自定义回调</span></a></h3><p>如果内部选项不足够处理认证请求，自定义回调能够让应用处理成功和失败的情况。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">&#39;local&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> user<span class="token punctuation">,</span> info</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        req<span class="token punctuation">.</span><span class="token function">logIn</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&#39;/users&#39;</span> <span class="token operator">+</span> user<span class="token punctuation">.</span>username<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个例子中，注意 <code>authenticate()</code> 是在路由处理器中被调用，而不是作为路由中间件。这通过闭包给了 <code>req</code>和 <code>res</code> 对象回调权限。</p><p>如果认证失败，<code>user</code> 将被设置为 <code>false</code>。如果发生异常，<code>err</code> 将被设置。一个可选的 <code>info</code> 参数将传入，包括策略验证回调所提供的附加的详细信息。</p><p>这个回调能够使用提供的参数处理预期的认证结果。注意，当使用自定义回调时，需要应用来建立 session（通过调用 <code>req.login()</code>） 和发送响应。</p><h2 id="配置" tabindex="-1"><a class="header-anchor" href="#配置"><span>配置</span></a></h2><p>使用 Passport 来认证需要配置三个方面：</p><p>1、认证策略 2、应用中间件 3、Session（可选的）</p><h3 id="策略" tabindex="-1"><a class="header-anchor" href="#策略"><span>策略</span></a></h3><p>Passport 使用被称为策略的东西来认证请求。策略从验证用户名、密码，使用 <a href="http://oauth.net/" target="_blank" rel="noopener noreferrer">OAuth</a> 委托认证或者使用 <a href="http://openid.net/" target="_blank" rel="noopener noreferrer">OpenID</a> 联合认证。</p><p>在让 Passport 认证请求前，应用使用的某个策略（或者某些策略）必须要先配置。</p><p>策略和他们的配置通过 <code>use()</code> 函数提供。例如，下面的例子使用 <code>LocalStrategy</code> 来进行用户名、密码认证。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">var</span> passport <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;passport&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">,</span> LocalStrategy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;passport-local&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Strategy<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">passport<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LocalStrategy</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        User<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">username</span><span class="token operator">:</span> username <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;用户名错误&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">.</span><span class="token function">validPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;密码错误&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="验证回调" tabindex="-1"><a class="header-anchor" href="#验证回调"><span>验证回调</span></a></h3><p>这个例子引入了一个重要的概念。策略需要一个称为回调的东西。验证回调的目的是找到拥有一套凭证的用户。</p><p>当 Passport 认证请求时，它解析请求中的凭证。然后将凭证作为调用回调函数的参数，这个例子中就是 <code>username</code> 和 <code>password</code>。如果凭证有效，回调函数将调用 <code>done</code> 将已认证的用户的信息传入 Passport。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果验证失败（本例中，比如密码错误），<code>done</code> 函数应该传入 <code>false</code> 而不是用户信息来表明认证失败。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>可以提供额外的消息来表明失败原因。这对于展示即时消息，来提示用户再次尝试很有用。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;密码错误&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>最后，当验证凭证时发生异常（例如，数据库服务不可用），在常规的 Node 操作中 <code>done</code> 应该被调用来传入错误信息。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>注意，对于区分两种能够发生失败的情况是很重要的。后者是服务端异常，这种情况下 <code>err</code> 被设置为非 <code>null</code> 的值。在服务器正常运行时，认证失败也是很自然的情况。确认 <code>err</code> 包含 <code>null</code>，使用最后一个参数传递详细信息。</p><p>验证回调通过委派的方式使 Passport 可以无需数据库支持。应用可以自己决定如何存储用户信息，没有验证层强加的任何假设。</p><h5 id="中间件" tabindex="-1"><a class="header-anchor" href="#中间件"><span>中间件</span></a></h5><p>在基于 <a href="http://senchalabs.github.com/connect/" target="_blank" rel="noopener noreferrer">Connect</a> 或者 <a href="http://expressjs.com/" target="_blank" rel="noopener noreferrer">Express</a> 的应用中，需要使用 <code>passport.initialize()</code> 中间件来初始化 Passport。如果你的应用使用了持久化登录 Session，<code>passport.session()</code> 中间件也需要使用。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">app<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">&#39;public&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">cookieParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">bodyParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">secret</span><span class="token operator">:</span> <span class="token string">&#39;keyboard cat&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>passport<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>passport<span class="token punctuation">.</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>router<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意，开启 session 支持完全是可选的，尽管建议将其用于大多数应用中。如果开启，确认在 <code>passport.session()</code> 前使用 <code>session()</code>，从而确保登录 session 能够按正确的顺序存储。</p><p>在 Express 4.x 中，Connect 中间件不再包含于 Express 核心模块中，app.configure() 也被移除了。相同的中间件能够在 npm 模块找到。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">var</span> session <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express-session&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;body-parser&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">&#39;public&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">secret</span><span class="token operator">:</span> <span class="token string">&#39;cats&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">extended</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>passport<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>passport<span class="token punctuation">.</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="sessions-会话" tabindex="-1"><a class="header-anchor" href="#sessions-会话"><span>sessions 会话</span></a></h5><p>在常规的 web 应用中，用于认证用户的凭证仅在登录请求时被发送。如果认证成功，一个session 将被建立和保持，通过设置在浏览器中的 cookie。</p><p>每个随后的请求将不再包含凭证，但是会有唯一的 cookie 来确认 session。为了支持登录 session，Passport 将序列化和反序列化 <code>user</code> 实例经由 session。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">passport<span class="token punctuation">.</span><span class="token function">serializeUser</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">user<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">passport<span class="token punctuation">.</span><span class="token function">deserializeUser</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    User<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">done</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个例子中，仅 user ID 被序列化到 session 中，从而保持存储在 session 中的数据量较小。当后续请求到达时，这个 ID 将用来找到存储在 <code>req.user</code> 中的 user。</p><p>序列化和反序列化逻辑由应用来提供，允许应用选择一个合适的数据库和（或者）对象mapper，无需认证层强加。</p><h2 id="用户名-和-密码" tabindex="-1"><a class="header-anchor" href="#用户名-和-密码"><span>用户名 和 密码</span></a></h2><p>最广泛使用的网站认证用户的方式是通过用户名和密码。对这种机制的支持是通过提供 <a href="https://github.com/jaredhanson/passport-local" target="_blank" rel="noopener noreferrer">passport-local</a> 模块。</p><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">npm install passport<span class="token operator">-</span>local</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="配置-1" tabindex="-1"><a class="header-anchor" href="#配置-1"><span>配置</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">var</span> passport <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;passport&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    LocalStrategy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;passport-local&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Strategy<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">passport<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LocalStrategy</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        User<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">username</span><span class="token operator">:</span> username <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;用户名错误。&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">.</span><span class="token function">validPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;密码错误。&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span> </span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个本地认证的验证回调接受 <code>username</code> 和 <code>password</code> 参数，通过应用的登录表单提交上来的。</p><h3 id="表单" tabindex="-1"><a class="header-anchor" href="#表单"><span>表单</span></a></h3><p>Web 页面的一个表单，允许用户输入他们凭证然后登录。</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code class="language-html"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/login<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>Username:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>Password:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Log In<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="路由" tabindex="-1"><a class="header-anchor" href="#路由"><span>路由</span></a></h3><p>登录表单通过 <code>POST</code> 方法提交到服务器。使用 <code>local</code> 策略的 <code>authenticate</code> 函数来处理登录请求。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">&#39;local&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">successRedirect</span><span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">failureRedirect</span><span class="token operator">:</span> <span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">failureFlash</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>设置 <code>failureFlash</code> 选项为 <code>true</code> 表明 Passport 使用验证回调提供的 <code>message</code> 选项来发送一个 <code>error</code> 消息。这对于提示用户再试一次很有用。</p><h3 id="参数" tabindex="-1"><a class="header-anchor" href="#参数"><span>参数</span></a></h3><p>默认的，<code>LocalStrategy</code> 预期在参数中找到命名为 <code>username</code> 和 <code>password</code> 的凭证。如果你的网站更喜欢用其他字段命名，有可用的选项支持修改默认值。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">passport<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LocalStrategy</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">usernameField</span><span class="token operator">:</span> <span class="token string">&#39;email&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">passwordField</span><span class="token operator">:</span> <span class="token string">&#39;passwd&#39;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// ...</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="openid" tabindex="-1"><a class="header-anchor" href="#openid"><span>OpenID</span></a></h2><p><a href="http://openid.net/" target="_blank" rel="noopener noreferrer">OpenID</a> 是一个联合认证的开放标准。当访问网站时，用户使用 OpenID 登录。用户通过他们选择 OpenID 提供者（它发出一个断言来确认用户身份）来认证。网站验证这个断言来让用户登录。</p><p>OpenID 的支持通过 <a href="https://github.com/jaredhanson/passport-openid" target="_blank" rel="noopener noreferrer">passport-openid</a> 模块提供。</p><h3 id="安装-1" tabindex="-1"><a class="header-anchor" href="#安装-1"><span>安装</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">npm install passport<span class="token operator">-</span>openid</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="配置-2" tabindex="-1"><a class="header-anchor" href="#配置-2"><span>配置</span></a></h3><p>当使用 OpenID 时，返回地址和领域必须设置。 <code>returnURL</code> 是用户在使用 OpenID 提供者认证后重定向的地址。<code>realm</code> 表明 URL空间中验证有效的部分。通常它会是网站的根 URL。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">var</span> passport <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;passport&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    OpenIDStrategy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;passport-openid&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Strategy<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">passport<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OpenIDStrategy</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">returnURL</span><span class="token operator">:</span> <span class="token string">&#39;http://www.example.com/auth/openid/return&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">realm</span><span class="token operator">:</span> <span class="token string">&#39;http://www.example.com/&#39;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">identifier<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    User<span class="token punctuation">.</span><span class="token function">findOrCreate</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">openId</span><span class="token operator">:</span> identifier<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">done</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>OpenID认证的验证回调接受一个 <code>identifier</code> 参数，包含用户的声明识别码。</p><h3 id="表单-1" tabindex="-1"><a class="header-anchor" href="#表单-1"><span>表单</span></a></h3><p>web 页面的表单，允许用户输入 OpenID 然后登录。</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code class="language-html"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/auth/openid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>OpenID:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>openid_identifier<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Sign In<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="路由-1" tabindex="-1"><a class="header-anchor" href="#路由-1"><span>路由</span></a></h3><p>OpenID 认证需要2个路由。第一个路由接受表单提交中包含的 OpenId 识别码。认证期间，用户将被重定向到 OpenID 提供者。第二个路由是用户在使用 OpenID 提供者认证后，将返回的 URL。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// 接受 OpenID 识别码，将用户重定向到 OpenID 提供者处去认证。完成后，提供者将用户重定向到应用：</span></span>
<span class="line"><span class="token comment">// /auth/openid/return</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/auth/openid&#39;</span><span class="token punctuation">,</span> passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">&#39;openid&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// OpenID 提供者已经将用户重定向到应用。</span></span>
<span class="line"><span class="token comment">// 通过验证断言来完成认证过程。如果有效，用户将登录。</span></span>
<span class="line"><span class="token comment">// 否则，认证失败。</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/auth/openid/return&#39;</span><span class="token punctuation">,</span> </span>
<span class="line">    passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">&#39;openid&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">successRedirect</span><span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">failureRedirect</span><span class="token operator">:</span> <span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="个人资料交换" tabindex="-1"><a class="header-anchor" href="#个人资料交换"><span>个人资料交换</span></a></h3><p>OpenID 能够可选择的设置为取回已认证用户的个人信息。个人资料交换通过设置 <code>profile</code> 选项为 <code>true</code> 开启。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">passport<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OpenIDStrategy</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">returnURL</span><span class="token operator">:</span> <span class="token string">&#39;http://www.example.com/auth/openid/return&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">realm</span><span class="token operator">:</span> <span class="token string">&#39;http://www.example.com/&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">profile</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">identifier<span class="token punctuation">,</span> profile<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// ...</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当个人资料交换开启后，验证回调函数签名接收额外的 <code>profile</code> 参数，包含 OpenID 提供者提供的用户个人信息；通过 <a href="http://www.passportjs.org/guide/profile/" target="_blank" rel="noopener noreferrer">User Profile</a> 来了解更多信息。</p><h2 id="oauth" tabindex="-1"><a class="header-anchor" href="#oauth"><span>OAuth</span></a></h2><p><a href="http://oauth.net/" target="_blank" rel="noopener noreferrer">OAuth</a> 是个标准协议，它允许用户授权 API 使用权给网站、桌面程序或者移动应用。一旦被授权，被授权的应用能够代表用户使用 API。OAuth 也已经成为流行的<a href="http://hueniverse.com/2009/04/introducing-sign-in-with-twitter-oauth-style-connect/" target="_blank" rel="noopener noreferrer">委托授权</a>机制。</p><p>OAuth 有两种主要形式，两种都被广泛的部署。</p><p>OAuth 初始版本被一群组织松散的 Web 开发者开发作为开放标准。他们开发了 <a href="http://oauth.net/core/1.0/" target="_blank" rel="noopener noreferrer">OAuth 1.0</a>，被 <a href="http://oauth.net/core/1.0a/" target="_blank" rel="noopener noreferrer">OAuth 1.0a</a> 取代。这项工作现在被 <a href="http://www.ietf.org/" target="_blank" rel="noopener noreferrer">IEFT</a> 作为 <a href="http://tools.ietf.org/html/rfc5849" target="_blank" rel="noopener noreferrer">RFC 5849</a> 准备被标准化。</p><p>最近的工作 -- 专注定义 <a href="http://tools.ietf.org/html/rfc6749" target="_blank" rel="noopener noreferrer">OAuth 2.0</a>，已经被 <a href="http://tools.ietf.org/wg/oauth/" target="_blank" rel="noopener noreferrer">web 授权协议工作组</a> 承担。由于长期的标准化工作，提供者已经开始部署符合各种草案的实现，每种语义略有不同。</p><p>谢天谢地，Passport 隔离了应用处理 OAuth 变体的复杂性。许多情况下，特定策略的提供者能够被使用。而不是下面描述的通用策略。这减少了必须的配置，并且能容纳任何提供者的特定怪癖。查看 <a href="http://www.passportjs.org/docs#facebook" target="_blank" rel="noopener noreferrer">Facebook</a>, <a href="http://www.passportjs.org/docs#twitter" target="_blank" rel="noopener noreferrer">Twitter</a> 或者列表中的<a href="http://www.passportjs.org/docs/openid/" target="_blank" rel="noopener noreferrer">提供者</a>的首选用法。</p><p>OAuth 的支持通过 <a href="https://github.com/jaredhanson/passport-oauth" target="_blank" rel="noopener noreferrer">passport-oauth</a> 模块实现</p><h3 id="安装-2" tabindex="-1"><a class="header-anchor" href="#安装-2"><span>安装</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">npm install passport<span class="token operator">-</span>oauth</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="oauth-1-0" tabindex="-1"><a class="header-anchor" href="#oauth-1-0"><span>OAuth 1.0</span></a></h4><p>OAuth 1.0 是包含多个步骤的代理认证策略。首先，需要获得请求 token。然后，用户被重定向到服务提供者处授权。最后，授权后，用户被重定向回应用并且请求 token 能够用来交换访问 token。请求访问的应用程序（称为消费者）由消费者 key 和 消费者 secret 标识。</p><h3 id="配置-3" tabindex="-1"><a class="header-anchor" href="#配置-3"><span>配置</span></a></h3><p>当使用通用 OAuth 策略时，key, secret 和 endpoints 作为选项定义。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">var</span> passport <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;passport&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    OAuthStrategy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;passport-oauth&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>OAuthStrategy<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">passport<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&#39;provider&#39;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">OAuthStrategy</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">requestTokenURL</span><span class="token operator">:</span> <span class="token string">&#39;https://www.provider.com/oauth/request_token&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">accessTokenURL</span><span class="token operator">:</span> <span class="token string">&#39;https://www.provider.com/oauth/access_token&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">userAuthorizationURL</span><span class="token operator">:</span> <span class="token string">&#39;https://www.provider.com/oauth/authorize&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">consumerKey</span><span class="token operator">:</span> <span class="token string">&#39;123-456-789&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">consumerSecret</span><span class="token operator">:</span> <span class="token string">&#39;shhh-its-a-secret&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">callbackURL</span><span class="token operator">:</span> <span class="token string">&#39;https://www.example.com/auth/provider/callback&#39;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">token<span class="token punctuation">,</span> tokenSecret<span class="token punctuation">,</span> profile<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    User<span class="token punctuation">.</span><span class="token function">findOrCreate</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">done</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>基于 OAuth 策略的验证回调接受 <code>token</code>，<code>tokenSecret</code> 和 <code>profile</code> 参数。<code>token</code> 是访问 token，<code>tokenSecret</code> 是它对应的秘钥。<code>profile</code> 包含服务提供者提供的用户个人信息。通过 <a href="http://www.passportjs.org/guide/profile/" target="_blank" rel="noopener noreferrer">User Profile</a> 了解更多信息。</p><h3 id="路由-2" tabindex="-1"><a class="header-anchor" href="#路由-2"><span>路由</span></a></h3><p>OAuth 认证需要2个路由。第一个路由发起一个 OAuth 交换和重定向用户到服务提供者处。第二个路由是个URL，用户在提供者认证后重定向的 URL。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// 重定向用户到用于认证的 OAuth 提供者处。当认证完成后，</span></span>
<span class="line"><span class="token comment">// 提供者将重定向用户回到应用:</span></span>
<span class="line"><span class="token comment">// /auth/provider/callback</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/auth/provider&#39;</span><span class="token punctuation">,</span> passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">&#39;provider&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// OAuth 提供者已经重定向用户回到应用。</span></span>
<span class="line"><span class="token comment">// 通过获取访问 token 来结束认证过程。如果已经授权，用户将登录。</span></span>
<span class="line"><span class="token comment">// 否则，认证失败。</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/auth/provider/callback&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">&#39;provider&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">successRedirect</span><span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">failureRedirect</span><span class="token operator">:</span> <span class="token string">&#39;/login&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="链接" tabindex="-1"><a class="header-anchor" href="#链接"><span>链接</span></a></h3><p>在网页中可以放置一个链接或者按钮，它们在点击时将开始认证过程。</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code class="language-html"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/auth/provider<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>使用 OAuth 提供者登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="oauth-2-0" tabindex="-1"><a class="header-anchor" href="#oauth-2-0"><span>OAuth 2.0</span></a></h4><p>OAuth 2.0 是 OAuth 1.0 的接班人，被设计来克服早期版本的已知缺陷。认证流程本质上是一样的。用户首先被重定向到服务提供者处授权，授权后，用户携带一个能够获取访问 token 的码被重定向回应用。请求访问的应用（作为客户端）由 ID 和 秘钥标识。</p><h3 id="配置-4" tabindex="-1"><a class="header-anchor" href="#配置-4"><span>配置</span></a></h3><p>使用通用 OAuth 2.0 策略时，client ID，client secret 和 endpoints 作为选项定义。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">var</span> passport <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;passport&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    OAuth2Strategy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;passport-oauth&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>OAuth2Strategy<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">passport<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&#39;provider&#39;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">OAuth2Strategy</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">authorizationURL</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">tokenURL</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">clientID</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">clientSecret</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">callbackURL</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">accessToken<span class="token punctuation">,</span> refreshToken<span class="token punctuation">,</span> profile<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    User<span class="token punctuation">.</span><span class="token function">findOrCreate</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">done</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>基于 OAuth 2.0 策略的验证回调接受 <code>accessToken</code>，<code>refreshToken</code> 和 <code>profile</code> 参数。<code>refreshToken</code> 能够用来获取新的访问 token，也有可能是 <code>undefined</code> 如果提供者不发行刷新 token。<code>profile</code> 将包含服务提供者提供的用户个人信息。查看 <a href="http://www.passportjs.org/guide/profile/" target="_blank" rel="noopener noreferrer">User Profile</a> 了解更多信息。</p><h3 id="路由-3" tabindex="-1"><a class="header-anchor" href="#路由-3"><span>路由</span></a></h3><p>OAuth 2.0 认证需要两个路由。第一个路由重定向用户到服务提供者。第二个路由是个 URL，用户在提供者处认证后重定向的URL。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// 重定向用户到 OAuth 2.0 认证提供者。</span></span>
<span class="line"><span class="token comment">// 认证完成后，提供者将重定向用户返回应用：</span></span>
<span class="line"><span class="token comment">// /auth/provider/callback</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/auth/provider&#39;</span><span class="token punctuation">,</span> passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">&#39;provider&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// OAuth 2.0 提供者已经重定向用户到应用中。</span></span>
<span class="line"><span class="token comment">// 通过尝试获取访问 token 来完成认证过程。</span></span>
<span class="line"><span class="token comment">// 如果已授权，用户将登录。</span></span>
<span class="line"><span class="token comment">// 否则，认证失败。</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/auth/provider/callback&#39;</span><span class="token punctuation">,</span> </span>
<span class="line">    passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">&#39;provider&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">successRedirect</span><span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">failureRedirect</span><span class="token operator">:</span> <span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="作用域" tabindex="-1"><a class="header-anchor" href="#作用域"><span>作用域</span></a></h3><p>当使用 OAuth 2.0 请求访问时，访问的作用域通过 scope 选项控制。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/auth/provider&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">&#39;provider&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">scope</span><span class="token operator">:</span> <span class="token string">&#39;email&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>能够使用数组定义多个作用域。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/auth/provider&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">&#39;provider&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">scope</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;email&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;sms&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>scope</code> 选项的值时提供者特定的。详情参考提供者文档，了解支持的作用域。</p><h3 id="链接-1" tabindex="-1"><a class="header-anchor" href="#链接-1"><span>链接</span></a></h3><p>Web 页面的链接或者按钮，当点击的时候能够开始认证过程。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;/auth/provider&quot;</span><span class="token operator">&gt;</span>使用 OAuth <span class="token number">2.0</span> 提供者登录<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="用户个人信息" tabindex="-1"><a class="header-anchor" href="#用户个人信息"><span>用户个人信息</span></a></h2><p>当使用第三方服务，例如 Facebook 或者 Twitter 认证时，用户个人信息通常会可用。每个服务倾向于有个不同的方式编码这些信息。为了更易集成，Passport 尽可能规范化个人信息。</p><p>规范化个人信息符合 [Joseph Smarr][schema-author] 建立的<a href="https://tools.ietf.org/html/draft-smarr-vcarddav-portable-contacts-00" target="_blank" rel="noopener noreferrer">联系模式</a>。下表概述了可用的公共字段。</p><p><code>provider</code> {String}</p><p>  提供者，用户认证的地方（<code>facebook</code>, <code>twitter</code>, 等）。</p><p><code>id</code> {String}</p><p>  用户的唯一标识，通常由服务提供者生成。</p><p><code>displayName</code> {String}</p><p>  用户名，适合展示</p><p><code>name</code> {Object}</p><p>  <code>familyName</code> 用户的 family name，或者大多数西方语言的 “last name”。</p><p>  <code>givenName</code> 用户的 given name，或者大多数西方语言的 “first name”。</p><p>  <code>middleName</code> 用户的 middle name。</p><p><code>emails</code> {Array} [n]</p><p>  <code>value</code> {String} 地址的 email 地址。</p><p>  <code>type</code> {String} email 地址的类型（家里、工作单位，等）。</p><p><code>photos</code> {Array} [n]</p><p>  <code>value</code> {String} 图片地址</p><p>注意，上面的字段不是全部都能从每个服务提供者处获得。一些提供者可能包含没在这列出的其他信息。参考特定提供者的文档来了解更多详细信息。</p><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h2><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Signature/Function" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/zh-CN/docs/Glossary/Signature/Function</a> function signature</li></ul><h2 id="感谢阅读" tabindex="-1"><a class="header-anchor" href="#感谢阅读"><span>感谢阅读</span></a></h2><p>感谢你阅读到这里，翻译的不好的地方，还请指点。希望我的内容能让你受用，再次感谢。<a href="https://llccing.github.io/FrontEnd/" target="_blank" rel="noopener noreferrer">by llccing 千里</a></p></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/llccing/FrontEnd/edit/main/lib/nestjs/passport/01-general.md" aria-label="Edit this page" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]--><!--]-->Edit this page<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><time class="meta-item-info" datetime="2026-01-12T10:15:45.000Z" data-allow-mismatch>2026/1/12 10:15</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: lcf33123@gmail.com">Rowan Liu</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/FrontEnd/lib/nestjs/01-OAuth_2.0.html" aria-label="OAuth 2.0"><!--[--><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span class="external-link">OAuth 2.0</span></div><!--]--></a><a class="route-link auto-link next" href="/FrontEnd/lib/nestjs/passport/02-providers.html" aria-label="[译]Passport 文档（二）提供者"><!--[--><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span class="external-link">[译]Passport 文档（二）提供者</span></div><!--]--></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/FrontEnd/assets/app-DxUSmTbc.js" defer></script>
  </body>
</html>
