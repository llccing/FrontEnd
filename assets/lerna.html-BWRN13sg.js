import{_ as n,c as a,a as l,o as r}from"./app-Dbw06csz.js";const s={};function i(o,e){return r(),a("div",null,[...e[0]||(e[0]=[l(`<h1 id="lerna" tabindex="-1"><a class="header-anchor" href="#lerna"><span><a href="https://github.com/lerna/lerna" target="_blank" rel="noopener noreferrer">lerna</a></span></a></h1><div class="hint-container tip"><p class="hint-container-title">提示</p><p>一个管理有多个包的JavaScript项目的工具。</p></div><p>主要是从 <a href="https://github.com/vuejs/vue-next" target="_blank" rel="noopener noreferrer">vue-next</a> 项目了解到这个工具，并且发现 <a href="https://github.com/vuejs/vuepress" target="_blank" rel="noopener noreferrer">vuepress</a> 这个项目1.0版本也采用了这个方式。工具能够被使用，肯定有他的优秀的地方，恰巧我也有个场景能够用到这个工具，于是就搞起。</p><p>事先说明，我这个算是为了用而用，所以和lerna的原本目的可能有所偏离，但是为了熟悉这个工具，还是可以搞一下的。</p><h2 id="开始" tabindex="-1"><a class="header-anchor" href="#开始"><span>开始</span></a></h2><p>先阅读2个文章，了解一下能够简答使用。</p><ul><li><a href="https://juejin.im/post/5ced1609e51d455d850d3a6c" target="_blank" rel="noopener noreferrer">Lerna中文教程</a> - 跟着教程先试试，能用再理解。</li><li><a href="https://dev.to/anonimoconiglio/what-is-a-mono-repository-and-why-you-should-try-lerna-57lm" target="_blank" rel="noopener noreferrer">what-is-a-mono-repository-and-why-you-should-try-lerna</a> - what is Lerna and why it&#39;s worth to try?</li></ul><h2 id="我的使用" tabindex="-1"><a class="header-anchor" href="#我的使用"><span>我的使用</span></a></h2><h3 id="vue-repo" tabindex="-1"><a class="header-anchor" href="#vue-repo"><span><a href="https://github.com/llccing-demo/vue-repo" target="_blank" rel="noopener noreferrer">vue-repo</a></span></a></h3><p>开始的时候，vue-repo 中的demo项目时散落在 <a href="https://github.com/llccing-demo" target="_blank" rel="noopener noreferrer">llccing-demo</a> 下，有些凌乱，所以通过按库的类型做了区分，vue-repo 主要是vue方面的demo，包括vue、nuxt等等。</p><p>当然后后来针对react也创建了一个react-repo。</p><p>接下来要做的事情，可以把公共依赖提到跟目录，不用没个项目都添加同样的依赖。</p><h4 id="有一个坑卡了比较久-这里记一下" tabindex="-1"><a class="header-anchor" href="#有一个坑卡了比较久-这里记一下"><span>有一个坑卡了比较久，这里记一下</span></a></h4><p>lerna初始化后，需要commit，保证工作区是clean状态再import其他repo。</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">Error: Command failed: git rev-parse HEAD</span>
<span class="line">lerna ERR! fatal: ambiguous argument &#39;HEAD&#39;: unknown revision or path not in the working tree.</span>
<span class="line">lerna ERR! Use &#39;--&#39; to separate paths from revisions, like this:</span>
<span class="line">lerna ERR! &#39;git &lt;command&gt; [&lt;revision&gt;...] -- [&lt;file&gt;...]&#39;</span>
<span class="line">lerna ERR! </span>
<span class="line">lerna ERR! HEAD</span>
<span class="line">lerna ERR! </span>
<span class="line">lerna ERR! at makeError (/usr/local/lib/node_modules/lerna/node_modules/execa/index.js:174:9)</span>
<span class="line">lerna ERR! at Function.module.exports.sync (/usr/local/lib/node_modules/lerna/node_modules/execa/index.js:338:15)</span>
<span class="line">lerna ERR! at Object.execSync (/usr/local/lib/node_modules/lerna/node_modules/@lerna/child-process/index.js:22:16)</span>
<span class="line">lerna ERR! at ImportCommand.getCurrentSHA (/usr/local/lib/node_modules/lerna/node_modules/@lerna/import/index.js:129:34)</span>
<span class="line">lerna ERR! at ImportCommand.initialize (/usr/local/lib/node_modules/lerna/node_modules/@lerna/import/index.js:98:31)</span>
<span class="line">lerna ERR! at Promise.resolve.then (/usr/local/lib/node_modules/lerna/node_modules/@lerna/command/index.js:266:24)</span>
<span class="line">lerna ERR! at &lt;anonymous&gt;</span>
<span class="line">lerna ERR! lerna Command failed: git rev-parse HEAD</span>
<span class="line">lerna ERR! lerna fatal: ambiguous argument &#39;HEAD&#39;: unknown revision or path not in the working tree.</span>
<span class="line">lerna ERR! lerna Use &#39;--&#39; to separate paths from revisions, like this:</span>
<span class="line">lerna ERR! lerna &#39;git &lt;command&gt; [&lt;revision&gt;...] -- [&lt;file&gt;...]&#39;</span>
<span class="line">lerna ERR! lerna </span>
<span class="line">lerna ERR! lerna HEAD</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://www.cnblogs.com/rongfengliang/p/10168891.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/rongfengliang/p/10168891.html</a></p><h2 id="别人怎么用" tabindex="-1"><a class="header-anchor" href="#别人怎么用"><span>别人怎么用</span></a></h2><ul><li><p><a href="https://juejin.im/post/5a989fb451882555731b88c2" target="_blank" rel="noopener noreferrer">管理前端packages的最佳实践</a></p></li><li><p><a href="https://medium.com/the-andela-way/using-lerna-to-manage-js-monorepos-b7b8611f2ff3" target="_blank" rel="noopener noreferrer">frontEnd-and-backEnd</a> - 对于全栈项目的处理，提取公共依赖。</p></li></ul>`,18)])])}const p=n(s,[["render",i]]),d=JSON.parse('{"path":"/blog/life/lerna.html","title":"lerna","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1768212680000,"contributors":[{"name":"Rowan Liu","username":"","email":"lcf33123@gmail.com","commits":1}],"changelog":[{"hash":"8dc20e2f1b4b500b4a8b691792c2c9b3c12addca","time":1768212680000,"email":"lcf33123@gmail.com","author":"Rowan Liu","message":"Merge pull request #66 from llccing/copilot/fix-vite-build-error"}]},"filePathRelative":"blog/life/lerna.md"}');export{p as comp,d as data};
