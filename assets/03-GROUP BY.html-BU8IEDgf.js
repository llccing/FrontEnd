import{_ as s,c as a,a as n,o as i}from"./app-Dbw06csz.js";const l={};function r(d,e){return i(),a("div",null,[...e[0]||(e[0]=[n(`<h1 id="聚合查询" tabindex="-1"><a class="header-anchor" href="#聚合查询"><span>聚合查询</span></a></h1><p>五个常用的聚合函数</p><ul><li><p>COUNT</p></li><li><p>SUM</p></li><li><p>AVG</p></li><li><p>MAX</p></li><li><p>MIN</p></li><li><p><strong>计算行数</strong></p></li></ul><div class="language-SQL line-numbers-mode" data-highlighter="prismjs" data-ext="SQL"><pre><code class="language-SQL"><span class="line">SELECT COUNT(*) FROM \`Product\`</span>
<span class="line">-- 结果是 7</span>
<span class="line"></span>
<span class="line">SELECT COUNT(purchase_price) FROM \`Product\`</span>
<span class="line">-- 结果是 6</span>
<span class="line">-- 如果 COUNT 的参数是列名，会把列值为 NULL 的情况排除，计算 NULL 之外的数据行。</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>使用聚合函数删除重复值</strong></li></ul><div class="language-SQL line-numbers-mode" data-highlighter="prismjs" data-ext="SQL"><pre><code class="language-SQL"><span class="line">SELECT COUNT(DISTINCT product_type) FROM \`Product\`;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>注意，在聚合函数的参数中使用 DISTINCT，可以删除重复数据。</p><h2 id="对表分组" tabindex="-1"><a class="header-anchor" href="#对表分组"><span>对表分组</span></a></h2><ul><li>计算各个种类商品的个数</li></ul><div class="language-SQL line-numbers-mode" data-highlighter="prismjs" data-ext="SQL"><pre><code class="language-SQL"><span class="line">SELECT product_type, count(*) FROM \`Product\` GROUP BY product_type;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>聚合键</strong>、<strong>分组列</strong>，指的都是 GROUP BY 后面跟的参数。</p><p><strong>注意</strong>，书写顺序：</p><div class="language-SQL line-numbers-mode" data-highlighter="prismjs" data-ext="SQL"><pre><code class="language-SQL"><span class="line">SELECT -&gt; FROM -&gt; WHERE -&gt; GROUP BY</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="聚合键中的-null" tabindex="-1"><a class="header-anchor" href="#聚合键中的-null"><span>聚合键中的 NULL</span></a></h3><div class="language-SQL line-numbers-mode" data-highlighter="prismjs" data-ext="SQL"><pre><code class="language-SQL"><span class="line">SELECT product_name, purchase_price, COUNT(*) </span>
<span class="line">FROM \`Product\` </span>
<span class="line">GROUP BY purchase_price</span>
<span class="line"></span>
<span class="line">-- purchase_price 字段中有NULL的情况，会展示出字段值为不确定的一行</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>GROUP BY 和 WHERE 并用时 SELECT 语句的执行顺序</strong></p><div class="language-SQL line-numbers-mode" data-highlighter="prismjs" data-ext="SQL"><pre><code class="language-SQL"><span class="line">FROM -&gt; WHERE -&gt; GROUP BY -&gt; SELECT</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="聚合函数和-group-by-子句有关的常见错误" tabindex="-1"><a class="header-anchor" href="#聚合函数和-group-by-子句有关的常见错误"><span>聚合函数和 GROUP BY 子句有关的常见错误</span></a></h3><h4 id="_1、在-select-子句中书写了多余的列" tabindex="-1"><a class="header-anchor" href="#_1、在-select-子句中书写了多余的列"><span>1、在 SELECT 子句中书写了多余的列</span></a></h4><div class="language-SQL line-numbers-mode" data-highlighter="prismjs" data-ext="SQL"><pre><code class="language-SQL"><span class="line">SELECT product_type, purchase_price, COUNT(*) </span>
<span class="line">FROM Product </span>
<span class="line">GROUP BY product_type</span>
<span class="line"></span>
<span class="line">-- 这个语法仅仅 MySQL 自己支持，其他 DBMS 都不支持。</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以做如下修改，正确写法如下：</p><div class="language-SQL line-numbers-mode" data-highlighter="prismjs" data-ext="SQL"><pre><code class="language-SQL"><span class="line">SELECT product_type, purchase_price, COUNT(*) </span>
<span class="line">FROM Product </span>
<span class="line">GROUP BY product_type, purchase_price</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>使用聚合函数时，SELECT子句中仅仅能存在3种元素</strong>：</p><ul><li>常数</li><li>聚合函数</li><li>GROUP BY 子句中指定的列名（也就是聚合键）</li></ul><h4 id="_1、在-gruop-by-子句中写了列的别名" tabindex="-1"><a class="header-anchor" href="#_1、在-gruop-by-子句中写了列的别名"><span>1、在 GRUOP BY 子句中写了列的别名</span></a></h4>`,25)])])}const p=s(l,[["render",r]]),t=JSON.parse('{"path":"/SQL/03-GROUP%20BY.html","title":"聚合查询","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1768212680000,"contributors":[{"name":"Rowan Liu","username":"","email":"lcf33123@gmail.com","commits":1}],"changelog":[{"hash":"8dc20e2f1b4b500b4a8b691792c2c9b3c12addca","time":1768212680000,"email":"lcf33123@gmail.com","author":"Rowan Liu","message":"Merge pull request #66 from llccing/copilot/fix-vite-build-error"}]},"filePathRelative":"SQL/03-GROUP BY.md"}');export{p as comp,t as data};
