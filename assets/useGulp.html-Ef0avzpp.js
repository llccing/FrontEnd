import{_ as l,c,b as s,a as o,e as p,w as t,r as i,o as u,d as e}from"./app-DxUSmTbc.js";const r="/FrontEnd/assets/fileStructure-Byc40cfc.png",k={},d={class:"table-of-contents"};function v(m,n){const a=i("router-link");return u(),c("div",null,[n[14]||(n[14]=s("h1",{id:"前端基础设施-gulp",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#前端基础设施-gulp"},[s("span",null,"前端基础设施(gulp)")])],-1)),s("nav",d,[s("ul",null,[s("li",null,[p(a,{to:"#why"},{default:t(()=>[...n[0]||(n[0]=[e("why",-1)])]),_:1})]),s("li",null,[p(a,{to:"#环境搭建"},{default:t(()=>[...n[1]||(n[1]=[e("环境搭建",-1)])]),_:1}),s("ul",null,[s("li",null,[p(a,{to:"#注意事项"},{default:t(()=>[...n[2]||(n[2]=[e("注意事项",-1)])]),_:1})])])]),s("li",null,[p(a,{to:"#gulp"},{default:t(()=>[...n[3]||(n[3]=[e("gulp",-1)])]),_:1}),s("ul",null,[s("li",null,[p(a,{to:"#入门指南"},{default:t(()=>[...n[4]||(n[4]=[e("入门指南",-1)])]),_:1})])])]),s("li",null,[p(a,{to:"#gulpfile-js文件解析"},{default:t(()=>[...n[5]||(n[5]=[e("gulpfile.js文件解析",-1)])]),_:1})]),s("li",null,[p(a,{to:"#开发部署流程"},{default:t(()=>[...n[6]||(n[6]=[e("开发部署流程",-1)])]),_:1}),s("ul",null,[s("li",null,[p(a,{to:"#注意事项-1"},{default:t(()=>[...n[7]||(n[7]=[e("注意事项",-1)])]),_:1})]),s("li",null,[p(a,{to:"#开发"},{default:t(()=>[...n[8]||(n[8]=[e("开发：",-1)])]),_:1})]),s("li",null,[p(a,{to:"#部署"},{default:t(()=>[...n[9]||(n[9]=[e("部署：",-1)])]),_:1})])])]),s("li",null,[p(a,{to:"#讨论"},{default:t(()=>[...n[10]||(n[10]=[s("a",{name:"讨论"},"讨论",-1)])]),_:1}),s("ul",null,[s("li",null,[p(a,{to:"#_1-requirejs的使用"},{default:t(()=>[...n[11]||(n[11]=[e("1. requirejs的使用",-1)])]),_:1})]),s("li",null,[p(a,{to:"#_2-babel转码-默认打包的文件都是转换过的-所有浏览器加载同样的逻辑文件。"},{default:t(()=>[...n[12]||(n[12]=[e("2. babel转码，默认打包的文件都是转换过的，所有浏览器加载同样的逻辑文件。",-1)])]),_:1})]),s("li",null,[p(a,{to:"#_3-less-sass等的使用-大小-色调、字体控制"},{default:t(()=>[...n[13]||(n[13]=[e("3. less, sass等的使用，（大小，色调、字体控制）",-1)])]),_:1})])])])])]),n[15]||(n[15]=o(`<h2 id="why" tabindex="-1"><a class="header-anchor" href="#why"><span>why</span></a></h2><ul><li><p>自动清除缓存，自动刷新，加速开发调试过程 <a href="https://www.browsersync.io/" target="_blank" rel="noopener noreferrer">browserSync</a> or <a href="http://www.browsersync.cn/" target="_blank" rel="noopener noreferrer">browserSync国内</a></p></li><li><p>js代码压缩，节省带宽。</p></li><li><p>css文件，加入hash码，方便测试同学测试。（已知情况，js修改不用清缓存，css文件需要）</p></li></ul><h2 id="环境搭建" tabindex="-1"><a class="header-anchor" href="#环境搭建"><span>环境搭建</span></a></h2><p>windows环境node安装, 可以参考该<a href="http://www.jianshu.com/p/03a76b2e7e00" target="_blank" rel="noopener noreferrer">教程</a>，Linux系统可以参考， <a href="http://www.jianshu.com/p/bef810c33721" target="_blank" rel="noopener noreferrer">教程一</a>, <a href="https://blog.gtwang.org/web-development/install-node-js-in-windows-mac-os-x-linux/" target="_blank" rel="noopener noreferrer">教程二</a></p><h3 id="注意事项" tabindex="-1"><a class="header-anchor" href="#注意事项"><span>注意事项</span></a></h3><p>如果node下载速度过慢，可以考虑使用国内的<a href="http://nodejs.cn/download/" target="_blank" rel="noopener noreferrer">node下载站</a>。</p><h2 id="gulp" tabindex="-1"><a class="header-anchor" href="#gulp"><span>gulp</span></a></h2><p><a href="http://www.gulpjs.com.cn/" target="_blank" rel="noopener noreferrer">中文官网</a></p><h3 id="入门指南" tabindex="-1"><a class="header-anchor" href="#入门指南"><span>入门指南</span></a></h3><ul><li>全局安装 gulp：</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">$ npm install --global gulp</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>作为项目的开发依赖（devDependencies）安装：</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">$ npm install --save-dev gulp</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>在项目根目录下创建一个名为 gulpfile.js 的文件：</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">var gulp = require(&#39;gulp&#39;);</span>
<span class="line">gulp.task(&#39;default&#39;, function() {</span>
<span class="line">  // 将你的默认的任务代码放在这</span>
<span class="line">});</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>运行 gulp：</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">$ gulp</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="gulpfile-js文件解析" tabindex="-1"><a class="header-anchor" href="#gulpfile-js文件解析"><span>gulpfile.js文件解析</span></a></h2><p>代码待优化</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;gulp&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> del <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;del&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 文件删除</span></span>
<span class="line"><span class="token keyword">var</span> browserSync <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;browser-sync&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// server</span></span>
<span class="line"><span class="token keyword">var</span> gulpSequence <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;gulp-sequence&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 顺序执行任务</span></span>
<span class="line"><span class="token keyword">var</span> revCollector <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;gulp-rev-collector&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 用于生成替换链接的清单文件</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment">// load plugins</span></span>
<span class="line"><span class="token keyword">var</span> $ <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;gulp-load-plugins&#39;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// gulp 加载插件</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> baseDir <span class="token operator">=</span> <span class="token string">&#39;./app&#39;</span><span class="token punctuation">;</span> <span class="token comment">// 开发目录</span></span>
<span class="line"><span class="token keyword">var</span> distDir <span class="token operator">=</span> <span class="token string">&#39;./&#39;</span><span class="token punctuation">;</span> <span class="token comment">// ./dist目录与Java配合有问题</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// dev-server</span></span>
<span class="line">gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&#39;server&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// gulp.run(&#39;build&#39;);</span></span>
<span class="line">    <span class="token function">browserSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">9000</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token doc-comment comment">/**</span>
<span class="line">         * 代理</span>
<span class="line">         * http: //btzh.net:8093/api/</span>
<span class="line">         * http: //192.168.3.169:8080/housing-security/api/</span>
<span class="line">         */</span></span>
<span class="line">        <span class="token comment">// proxy: &#39;http://btzh.net:8093&#39;,</span></span>
<span class="line">        <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token string">&#39;http://192.168.0.103:8095&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">serveStatic</span><span class="token operator">:</span> <span class="token punctuation">[</span>baseDir<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">browser</span><span class="token operator">:</span> <span class="token string">&quot;chrome&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    gulp<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span>baseDir <span class="token operator">+</span> <span class="token string">&#39;/**/*.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;change&#39;</span><span class="token punctuation">,</span> browserSync<span class="token punctuation">.</span>reload<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    gulp<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span>baseDir <span class="token operator">+</span> <span class="token string">&#39;/**/*.html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;change&#39;</span><span class="token punctuation">,</span> browserSync<span class="token punctuation">.</span>reload<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    gulp<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span>baseDir <span class="token operator">+</span> <span class="token string">&#39;/img/**/*.*&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;change&#39;</span><span class="token punctuation">,</span> browserSync<span class="token punctuation">.</span>reload<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    gulp<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span>baseDir <span class="token operator">+</span> <span class="token string">&#39;/css/**/*.css&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;change&#39;</span><span class="token punctuation">,</span> browserSync<span class="token punctuation">.</span>reload<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 压缩</span></span>
<span class="line">gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&#39;rjs&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">del</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;rjs/**/*&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 删除</span></span>
<span class="line"></span>
<span class="line">    gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span>baseDir <span class="token operator">+</span> <span class="token string">&#39;/js/**/*.js&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">plumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">amdOptimize</span><span class="token punctuation">(</span>baseDir <span class="token operator">+</span> <span class="token string">&#39;/js/index&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">paths</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token string-property property">&#39;jquery&#39;</span><span class="token operator">:</span> <span class="token string">&#39;static/jQuery/jquery-1.12.3.min&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string-property property">&#39;bootstrap&#39;</span><span class="token operator">:</span> <span class="token string">&#39;static/bootstrap/js/bootstrap.min&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string-property property">&#39;bootstrap-table&#39;</span><span class="token operator">:</span> <span class="token string">&#39;static/bootstrap-table/bootstrap-table.min&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string-property property">&#39;bootstrap-table-zh-CN&#39;</span><span class="token operator">:</span> <span class="token string">&#39;static/bootstrap-table/bootstrap-table-zh-CN.min&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string-property property">&#39;bootstrap-table-export&#39;</span><span class="token operator">:</span> <span class="token string">&#39;static/bootstrap-table/bootstrap-table-export&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string-property property">&#39;tableExport&#39;</span><span class="token operator">:</span> <span class="token string">&#39;static/bootstrap-table/tableExport&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string-property property">&#39;bootstrap-datetimepicker&#39;</span><span class="token operator">:</span> <span class="token string">&#39;static/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string-property property">&#39;bootstrap-datetimepicker-zh-CN&#39;</span><span class="token operator">:</span> <span class="token string">&#39;static/bootstrap-datetimepicker/js/bootstrap-datetimepicker.zh-CN&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string-property property">&#39;treeView&#39;</span><span class="token operator">:</span> <span class="token string">&#39;static/bootstrap-treeview/bootstrap-treeview.min&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 树形图</span></span>
<span class="line">                <span class="token string-property property">&#39;md5&#39;</span><span class="token operator">:</span> <span class="token string">&#39;static/md5&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 密码加密</span></span>
<span class="line">                <span class="token string-property property">&#39;validate&#39;</span><span class="token operator">:</span> <span class="token string">&#39;static/verification/jquery.validate.min&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 表单输入信息验证</span></span>
<span class="line">                <span class="token string-property property">&#39;messages-zh&#39;</span><span class="token operator">:</span> <span class="token string">&#39;static/verification/messages_zh.min&#39;</span><span class="token punctuation">,</span><span class="token comment">//表单验证中文提示</span></span>
<span class="line">                <span class="token string-property property">&#39;card&#39;</span><span class="token operator">:</span> <span class="token string">&#39;static/verification/card&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 身份证号码验证</span></span>
<span class="line">                <span class="token string-property property">&#39;noty&#39;</span><span class="token operator">:</span> <span class="token string">&#39;static/Noty/jquery.noty.packaged.min&#39;</span><span class="token punctuation">,</span> <span class="token comment">//提示框</span></span>
<span class="line">                <span class="token string-property property">&#39;plupload&#39;</span><span class="token operator">:</span> <span class="token string">&#39;static/plupload/plupload.full.min&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 图片上传</span></span>
<span class="line">                <span class="token string-property property">&#39;plupload-zh_CN&#39;</span><span class="token operator">:</span> <span class="token string">&#39;static/plupload/zh_CN&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string-property property">&#39;lodash&#39;</span><span class="token operator">:</span> <span class="token string">&#39;static/lodash/lodash.min&#39;</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line">                <span class="token string-property property">&#39;util&#39;</span><span class="token operator">:</span> <span class="token string">&#39;js/util&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string-property property">&#39;component&#39;</span><span class="token operator">:</span> <span class="token string">&#39;js/component&#39;</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line">                <span class="token string-property property">&#39;js&#39;</span><span class="token operator">:</span> <span class="token string">&#39;js&#39;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">shim</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token string-property property">&#39;bootstrap&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;jquery&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string-property property">&#39;bootstrap-table&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;jquery&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string-property property">&#39;treeView&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;jquery&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string-property property">&#39;bootstrap-table-zh-CN&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;bootstrap-table&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string-property property">&#39;bootstrap-table-export&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;bootstrap-table&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string-property property">&#39;bootstrap-datetimepicker&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;jquery&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string-property property">&#39;bootstrap-datetimepicker-zh-CN&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;bootstrap-datetimepicker&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string-property property">&#39;plupload-zh_CN&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;plupload&#39;</span><span class="token punctuation">]</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">&#39;bundle.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/rjs/dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">uglify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/rjs/uglify&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// js转换压缩</span></span>
<span class="line">gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&#39;js&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">del</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/js/**/*&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 删除</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span>baseDir <span class="token operator">+</span> <span class="token string">&#39;/js/**/*.js&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">plumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">changed</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">babel</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;es2015&#39;</span><span class="token punctuation">]</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">uglify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// page文件处理</span></span>
<span class="line">gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&#39;page&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span>baseDir <span class="token operator">+</span> <span class="token string">&#39;/page/**/*.*&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">plumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">changed</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/page&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/page&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// css 处理</span></span>
<span class="line">gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&#39;css&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span>baseDir <span class="token operator">+</span> <span class="token string">&#39;/css/**/*.css&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">plumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">revCollector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">changed</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/css&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">rev</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/css&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span>rev<span class="token punctuation">.</span><span class="token function">manifest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment">//- 生成一个rev-manifest.json</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/css&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//- 将 rev-manifest.json 保存到 rev 目录内</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// revCss 处理</span></span>
<span class="line">gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&#39;revcss&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token punctuation">[</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/css/*.json&#39;</span><span class="token punctuation">,</span> distDir <span class="token operator">+</span> <span class="token string">&#39;/*.html&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">//- 读取 rev-manifest.json 文件以及需要进行css名替换的文件</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">revCollector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">//- 执行文件内css名的替换</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span>distDir<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">//- 替换后的文件输出的目录</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// static库文件处理</span></span>
<span class="line">gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&#39;static&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span>baseDir <span class="token operator">+</span> <span class="token string">&#39;/static/**/*&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">plumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">changed</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/static&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/static&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 图片资源处理</span></span>
<span class="line">gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&#39;img&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span>baseDir <span class="token operator">+</span> <span class="token string">&#39;/img/**/*&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">plumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">changed</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/img&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// json处理</span></span>
<span class="line">gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span>baseDir<span class="token operator">+</span> <span class="token string">&#39;/js/json/**/*.json&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">plumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">changed</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/js/json&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/js/json&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 其他文件处理</span></span>
<span class="line">gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&#39;other&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token punctuation">[</span>baseDir <span class="token operator">+</span> <span class="token string">&#39;/*.html&#39;</span><span class="token punctuation">,</span> baseDir <span class="token operator">+</span> <span class="token string">&#39;/*.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">plumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">changed</span><span class="token punctuation">(</span>distDir<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span>distDir<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// clean</span></span>
<span class="line">gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&#39;clean&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">del</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/css&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">del</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">del</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/page&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">del</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/static&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">del</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/img&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">del</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/index.html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">del</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;/login.html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">del</span><span class="token punctuation">(</span>distDir <span class="token operator">+</span> <span class="token string">&#39;require.config.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&#39;watch&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    gulp<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span>baseDir <span class="token operator">+</span> <span class="token string">&#39;/**/*&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;build&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// 导报</span></span>
<span class="line">gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&#39;build&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">gulpSequence</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;js&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;page&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;static&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;img&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;other&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;json&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;css&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;revcss&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 默认执行任务</span></span>
<span class="line">gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&#39;default&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;server&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="开发部署流程" tabindex="-1"><a class="header-anchor" href="#开发部署流程"><span>开发部署流程</span></a></h2><p>配置好package.json和gulpfile.js文件后。执行</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">npm install </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="注意事项-1" tabindex="-1"><a class="header-anchor" href="#注意事项-1"><span>注意事项</span></a></h3><p>如果 npm install 时速度过慢，可以翻墙，或者可以用cnpm，（cnpm需要安装，自行Google）。</p><h3 id="开发" tabindex="-1"><a class="header-anchor" href="#开发"><span>开发：</span></a></h3><p>所有的修改都是在app文件夹内，build后生成编译后的文件。</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">gulp // gulp default</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="部署" tabindex="-1"><a class="header-anchor" href="#部署"><span>部署：</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">// 此处可以优化。</span>
<span class="line">gulp clean</span>
<span class="line"></span>
<span class="line">gulp build</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>项目目录</p><p><img src="`+r+`" alt="file-structure"></p><h2 id="讨论" tabindex="-1"><a class="header-anchor" href="#讨论"><span><a name="讨论">讨论</a></span></a></h2><h3 id="_1-requirejs的使用" tabindex="-1"><a class="header-anchor" href="#_1-requirejs的使用"><span>1. requirejs的使用</span></a></h3><pre><code>requirejs按需加载，如果需要压缩打包，考虑使用新的写法。
</code></pre><ul><li><p>requirejs demos</p><ul><li><p><a href="https://github.com/volojs/create-template" target="_blank" rel="noopener noreferrer">Simple one page app</a></p></li><li><p><a href="https://github.com/requirejs/example-multipage" target="_blank" rel="noopener noreferrer">Multipage app</a></p></li><li><p><a href="https://github.com/requirejs/example-multipage-shim" target="_blank" rel="noopener noreferrer">Multipage app with shim config</a></p></li></ul></li><li><p>gulp-requirejs</p><ul><li><p><a href="http://blog.csdn.net/ft6302244/article/details/44308215" target="_blank" rel="noopener noreferrer">使用gulp自动优化requireJS项目</a></p></li><li><p><a href="https://github.com/phated/requirejs-example-gulpfile" target="_blank" rel="noopener noreferrer">requirejs-example-gulpfile</a></p></li></ul></li></ul><h3 id="_2-babel转码-默认打包的文件都是转换过的-所有浏览器加载同样的逻辑文件。" tabindex="-1"><a class="header-anchor" href="#_2-babel转码-默认打包的文件都是转换过的-所有浏览器加载同样的逻辑文件。"><span>2. babel转码，默认打包的文件都是转换过的，所有浏览器加载同样的逻辑文件。</span></a></h3><h3 id="_3-less-sass等的使用-大小-色调、字体控制" tabindex="-1"><a class="header-anchor" href="#_3-less-sass等的使用-大小-色调、字体控制"><span>3. less, sass等的使用，（大小，色调、字体控制）</span></a></h3>`,38))])}const g=l(k,[["render",v]]),f=JSON.parse('{"path":"/blog/life/useGulp.html","title":"前端基础设施(gulp)","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1768212945000,"contributors":[{"name":"Rowan Liu","username":"","email":"lcf33123@gmail.com","commits":1}],"changelog":[{"hash":"510851a2e40013ba249eb2696f9e38f188ca533a","time":1768212945000,"email":"lcf33123@gmail.com","author":"Rowan Liu","message":"Update README.md"}]},"filePathRelative":"blog/life/useGulp.md"}');export{g as comp,f as data};
