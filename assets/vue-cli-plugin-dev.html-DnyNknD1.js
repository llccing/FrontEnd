import{_ as i,c,a as e,b as a,d as s,e as t,w as l,r as o,o as r}from"./app-DxUSmTbc.js";const u={};function d(k,n){const p=o("RouteLink");return r(),c("div",null,[n[21]||(n[21]=e(`<h1 id="vue-cli-æ’ä»¶å¼€å‘æŒ‡å—" tabindex="-1"><a class="header-anchor" href="#vue-cli-æ’ä»¶å¼€å‘æŒ‡å—"><span>Vue CLI æ’ä»¶å¼€å‘æŒ‡å—</span></a></h1><blockquote><p>åŸæ–‡ <a href="https://cli.vuejs.org/dev-guide/plugin-dev.html" target="_blank" rel="noopener noreferrer">https://cli.vuejs.org/dev-guide/plugin-dev.html</a></p></blockquote><p>å·²ç»æäº† merge request <a href="https://github.com/vuejs/vue-cli/pull/5345" target="_blank" rel="noopener noreferrer">https://github.com/vuejs/vue-cli/pull/5345</a></p><h2 id="å¼€å§‹" tabindex="-1"><a class="header-anchor" href="#å¼€å§‹"><span>å¼€å§‹</span></a></h2><p>ä¸€ä¸ª CLI æ’ä»¶æ˜¯ä¸€ä¸ª npm åŒ…ï¼Œå®ƒèƒ½å¤Ÿä¸º Vue CLI åˆ›å»ºçš„é¡¹ç›®æ·»åŠ é¢å¤–çš„åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½åŒ…æ‹¬ï¼š</p><ul><li>ä¿®æ”¹é¡¹ç›®çš„ webpack é…ç½® - ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„æ’ä»¶å¸Œæœ›å»é’ˆå¯¹æŸç§ç±»å‹çš„æ–‡ä»¶å·¥ä½œï¼Œä½ å¯ä»¥ä¸ºè¿™ä¸ªç‰¹å®šçš„æ–‡ä»¶æ‰©å±•åæ·»åŠ æ–°çš„ webpack åŠ è½½è§„åˆ™ã€‚ä½ å¯ä»¥çœ‹ <code>@vue/cli-plugin-typescript</code> è¿™ä¸ªæ’ä»¶ï¼Œæ·»åŠ è¿™æ ·çš„è§„åˆ™å»è½½å…¥ <code>.ts</code> å’Œ <code>.tsx</code> çš„æ‰©å±•æ–‡ä»¶ï¼›</li><li>æ·»åŠ æ–°çš„ vue-cli-service å‘½ä»¤ - ä¾‹å¦‚ï¼Œ<code>@vue/cli-plugin-unit-jest</code> æ·»åŠ äº† <code>test:unit</code> å‘½ä»¤ï¼Œå…è®¸å¼€å‘è€…è¿è¡Œå•å…ƒæµ‹è¯•ï¼›</li><li>æ‰©å±• <code>package.json</code> - å½“ä½ çš„æ’ä»¶æ·»åŠ äº†ä¸€äº›ä¾èµ–åˆ°é¡¹ç›®ä¸­ï¼Œä½ éœ€è¦å°†ä»–ä»¬æ·»åŠ åˆ°package çš„ dependencies éƒ¨åˆ†æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„é€‰é¡¹ï¼›</li><li>åœ¨é¡¹ç›®ä¸­åˆ›å»ºæ–°æ–‡ä»¶ã€æˆ–è€…ä¿®æ”¹è€æ–‡ä»¶ã€‚æœ‰æ—¶åˆ›å»ºä¸€ä¸ªç¤ºä¾‹ç»„ä»¶æˆ–è€…é€šè¿‡ç»™å…¥å£æ–‡ä»¶ï¼ˆmain.jsï¼‰æ·»åŠ å¯¼å…¥ï¼ˆimportsï¼‰æ˜¯ä¸€ä¸ªå¥½çš„ä¸»æ„ï¼›</li><li>æç¤ºç”¨æˆ·é€‰æ‹©ä¸€ä¸ªç‰¹å®šçš„é€‰é¡¹ - ä¾‹å¦‚ï¼Œä½ å¯ä»¥è¯¢é—®ç”¨æˆ·æ˜¯å¦åˆ›å»ºæˆ‘ä»¬å‰é¢æåˆ°çš„ç¤ºä¾‹ç»„ä»¶ã€‚</li></ul><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>ä¸è¦è¿‡åº¦ä½¿ç”¨ vue-cli æ’ä»¶ï¼å¦‚æœä½ ä»…å¸Œæœ›åŒ…å‡½ç‰¹å®šçš„æ’ä»¶ï¼Œä¾‹å¦‚ï¼Œ<a href="https://lodash.com/" target="_blank" rel="noopener noreferrer">Lodash</a> - ç›¸æ¯”åˆ›å»ºä¸€ä¸ªç‰¹å®šçš„æ’ä»¶ï¼Œé€šè¿‡ npm æ‰‹åŠ¨å®‰è£…æ›´åŠ ç®€å•ã€‚</p></div><p>CLI æ’ä»¶åº”è¯¥æ€»æ˜¯åŒ…å‡½ä¸€ä¸ª <a href="#service-plugin">service æ’ä»¶</a> åšä¸ºä¸»çš„å¯¼å‡ºï¼Œå¹¶ä¸”ä»–èƒ½å¤Ÿé€‰æ‹©æ€§çš„åŒ…å« <a href="#generator">generator</a>, <a href="#prompts">prompt æ–‡ä»¶</a> å’Œ <a href="#ui-integration">Vue UI é›†æˆ</a>ã€‚</p><p>ä½œä¸ºä¸€ä¸ª npm åŒ…ï¼ŒCLI æ’ä»¶å¿…é¡»æœ‰ä¸€ä¸ª <code>package.json</code> æ–‡ä»¶ã€‚é€šå¸¸å»ºè®®åœ¨ <code>README.md</code> ä¸­åŒ…å«æ’ä»¶çš„æè¿°ï¼Œæ¥å¸®åŠ©å…¶ä»–äººåœ¨ npm ä¸Šå‘ç°ä½ çš„æ’ä»¶ã€‚</p><p>æ‰€ä»¥ï¼Œé€šå¸¸çš„ CLI æ’ä»¶ç›®å½•ç»“æ„çœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token builtin class-name">.</span></span>
<span class="line">â”œâ”€â”€ README.md</span>
<span class="line">â”œâ”€â”€ generator.js  <span class="token comment"># generatorï¼ˆå¯é€‰ï¼‰</span></span>
<span class="line">â”œâ”€â”€ index.js      <span class="token comment"># service æ’ä»¶</span></span>
<span class="line">â”œâ”€â”€ package.json</span>
<span class="line">â”œâ”€â”€ prompts.js    <span class="token comment"># prompt æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰</span></span>
<span class="line">â””â”€â”€ ui.js         <span class="token comment"># Vue UI é›†æˆï¼ˆå¯é€‰ï¼‰</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å‘½åå’Œå¯å‘ç°æ€§" tabindex="-1"><a class="header-anchor" href="#å‘½åå’Œå¯å‘ç°æ€§"><span>å‘½åå’Œå¯å‘ç°æ€§</span></a></h2><p>å¯¹äºä¸€ä¸ªèƒ½å¤Ÿåœ¨ Vue CLI é¡¹ç›®ä¸­ä½¿ç”¨çš„ CLI æ’ä»¶æ¥è¯´ï¼Œä»–å¿…é¡»ä»¥ä¸‹çš„å‘½åæƒ¯ä¾‹ <code>vue-cli-plugin-&lt;name&gt;</code> æˆ–è€… <code>@scope/vue-cli-plugin-&lt;name&gt;</code>ã€‚è¿™æ ·ä½ çš„æ’ä»¶å°±èƒ½å¤Ÿï¼š</p><ul><li>è¢« <code>@vue/cli-service</code> å‘ç°ï¼›</li><li>è¢«å…¶ä»–å¼€å‘è€…é€šè¿‡æœç´¢å‘ç°ï¼›</li><li>é€šè¿‡ <code>vue add &lt;name&gt;</code> æˆ–è€… <code>vue invoke &lt;name&gt;</code> å®‰è£…ã€‚</li></ul><div class="hint-container warning"><p class="hint-container-title">Warning</p><p>ç¡®ä¿æ’ä»¶çš„åå­—æ˜¯æ­£ç¡®çš„ï¼Œå¦åˆ™ä»–å°†ä¸èƒ½é€šè¿‡ <code>vue add</code> å®‰è£…å¹¶ä¸”ä¸èƒ½åœ¨ UI æ’ä»¶ä¸­æœç´¢çš„åˆ°ï¼</p></div><p>ä¸ºäº†èƒ½å¤Ÿè¢«ç”¨æˆ·åœ¨æœç´¢æ—¶æ›´å¥½çš„å‘ç°ï¼Œå¯ä»¥å°†æ’ä»¶çš„å…³é”®æè¿°æ”¾åˆ° <code>package.json</code> æ–‡ä»¶çš„ <code>description</code> å­—æ®µä¸­ã€‚</p><p>ä¾‹å¦‚ï¼š</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-plugin-apollo&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.7.7&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli plugin to add Apollo and GraphQL&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½ åº”è¯¥åœ¨ <code>homepage</code> æˆ–è€… <code>repository</code> å­—æ®µæ·»åŠ åˆ›å»ºæ’ä»¶çš„å®˜ç½‘åœ°å€æˆ–è€…ä»“åº“çš„åœ°å€ï¼Œè¿™æ · <code>æ›´å¤šä¿¡æ¯</code> çš„æŒ‰é’®å°†å±•ç¤ºä½ çš„æ’ä»¶æè¿°ä¿¡æ¯ï¼š</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;repository&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git+https://github.com/Akryum/vue-cli-plugin-apollo.git&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;homepage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://github.com/Akryum/vue-cli-plugin-apollo#readme&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://cli.vuejs.org/plugin-search-item.png" alt="Plugin search item"></p><h2 id="generator" tabindex="-1"><a class="header-anchor" href="#generator"><span>Generator</span></a></h2><p>æ’ä»¶çš„ Generator éƒ¨åˆ†é€šå¸¸åœ¨ä½ æƒ³è¦ä¸ºé¡¹ç›®æ‰©å±•åŒ…ä¾èµ–ï¼Œåˆ›å»ºæ–°çš„æ–‡ä»¶æˆ–è€…ç¼–è¾‘å·²ç»å­˜åœ¨çš„æ–‡ä»¶æ—¶éœ€è¦ã€‚</p><p>åœ¨ CLI æ’ä»¶å†…éƒ¨ï¼Œgenerator åº”è¯¥æ”¾åœ¨ <code>generator.js</code> æˆ–è€… <code>generator/index.js</code> æ–‡ä»¶ä¸­ã€‚å®ƒå°†åœ¨ä»¥ä¸‹ä¸¤ä¸ªåœºæ™¯è¢«å¼•ç”¨ï¼š</p><ul><li><p>é¡¹ç›®åˆå§‹åˆ›å»ºæœŸé—´ï¼ŒCLI æ’ä»¶è¢«ä½œä¸ºé¡¹ç›®åˆ›å»º preset çš„ä¸€éƒ¨åˆ†è¢«å®‰è£…ã€‚</p></li><li><p>å½“æ’ä»¶åœ¨é¡¹ç›®åˆ›å»ºå®Œæˆå’Œé€šè¿‡ <code>vue add</code> æˆ–è€… <code>vue invoke</code> å•ç‹¬è°ƒç”¨è¢«å®‰è£…æ—¶ã€‚</p></li></ul><p>ä¸€ä¸ª generator åº”è¯¥å¯¼å‡ºä¸€ä¸ªæ¥æ”¶ä¸‰ä¸ªå‚æ•°çš„å‡½æ•°ï¼š</p>`,26)),a("ol",null,[a("li",null,[a("p",null,[n[1]||(n[1]=s("ä¸€ä¸ª ",-1)),t(p,{to:"/blog/translate/generator-api.html"},{default:l(()=>[...n[0]||(n[0]=[s("GeneratorAPI",-1)])]),_:1}),n[2]||(n[2]=s(" å®ä¾‹ï¼›",-1))])]),n[3]||(n[3]=a("li",null,[a("p",null,[s("æ’ä»¶çš„ generator é€‰é¡¹ã€‚è¿™äº›é€‰é¡¹åœ¨é¡¹ç›®åˆ›å»ºï¼Œæˆ–è€…ä» "),a("code",null,"~/.vuerc"),s(" è½½å…¥é¢„è®¾æ—¶è¢«è§£æã€‚ä¾‹å¦‚ï¼šå¦‚æœä¿å­˜çš„ "),a("code",null,"~/.vuerc"),s(" åƒè¿™æ ·ï¼š")])],-1))]),n[22]||(n[22]=e(`<div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;presets&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;foo&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;@vue/cli-plugin-foo&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;option&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bar&quot;</span> <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœç”¨æˆ·ä½¿ç”¨ preset <code>foo</code> åˆ›å»ºäº†ä¸€ä¸ªé¡¹ç›®ï¼Œé‚£ä¹ˆ <code>@vue/cli-plugin-foo</code> çš„ generator å°±ä¼šæ”¶åˆ° <code>{ option: &#39;bar&#39; }</code> ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚</p><p>å¯¹äºç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œè¿™ä¸ªé€‰é¡¹å°†åœ¨ç”¨æˆ·æ‰§è¡Œ <code>vue invoke</code> (è¯¦è§ <a href="#prompts">Prompts</a>).æ—¶ï¼Œä»æç¤ºæˆ–è€…å‘½ä»¤è¡Œå‚æ•°ä¸­è¢«è§£æã€‚</p><ol start="3"><li>æ•´ä¸ª preset (presets.foo) å°†ä¼šä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥ã€‚</li></ol><h3 id="åˆ›å»ºæ–°çš„æ¨¡æ¿" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºæ–°çš„æ¨¡æ¿"><span>åˆ›å»ºæ–°çš„æ¨¡æ¿</span></a></h3><p>å½“ä½ è°ƒç”¨ <code>api.render(&#39;./template&#39;)</code> æ—¶ï¼Œè¯¥ generator å°†ä¼šä½¿ç”¨ <a href="https://github.com/mde/ejs" target="_blank" rel="noopener noreferrer">EJS</a> æ¸²æŸ“ <code>./template</code> ä¸­çš„æ–‡ä»¶ (ç›¸å¯¹äº generator ä¸­çš„æ–‡ä»¶è·¯å¾„è¿›è¡Œè§£æ)</p><p>æƒ³è±¡æˆ‘ä»¬æ­£åœ¨åˆ›å»º <a href="https://github.com/ktsn/vue-cli-plugin-auto-routing" target="_blank" rel="noopener noreferrer">vue-cli-auto-routing</a> æ’ä»¶ï¼Œæˆ‘ä»¬å¸Œæœ›å½“æ’ä»¶åœ¨é¡¹ç›®ä¸­è¢«å¼•ç”¨æ—¶åšä»¥ä¸‹çš„æ”¹å˜ï¼š</p><ul><li>åˆ›å»ºä¸€ä¸ª <code>layouts</code> æ–‡ä»¶å¤¹åŒ…å‡½é»˜è®¤å¸ƒå±€æ–‡ä»¶ï¼›</li><li>åˆ›å»ºä¸€ä¸ª <code>pages</code> æ–‡ä»¶å¤¹åŒ…å‡½ <code>about</code> å’Œ <code>home</code> é¡µé¢ï¼›</li><li>åœ¨ <code>src</code> æ–‡ä»¶å¤¹ä¸­æ·»åŠ  <code>router.js</code> æ–‡ä»¶</li></ul><p>ä¸ºäº†æ¸²æŸ“è¿™ä¸ªç»“æ„ï¼Œä½ éœ€è¦åœ¨ <code>generator/template</code> æ–‡ä»¶å¤¹å†…åˆ›å»ºå®ƒï¼š</p><p><img src="https://cli.vuejs.org/generator-template.png" alt="Generator structure"></p><p>æ¨¡æ¿åˆ›å»ºå®Œä¹‹åï¼Œä½ åº”è¯¥åœ¨ <code>generator/index.js</code> æ–‡ä»¶ä¸­æ·»åŠ  <code>api.render</code> è°ƒç”¨ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token parameter">api</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  api<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&#39;./template&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç¼–è¾‘å·²ç»å­˜åœ¨çš„æ¨¡æ¿" tabindex="-1"><a class="header-anchor" href="#ç¼–è¾‘å·²ç»å­˜åœ¨çš„æ¨¡æ¿"><span>ç¼–è¾‘å·²ç»å­˜åœ¨çš„æ¨¡æ¿</span></a></h3><p>æ­¤å¤–ï¼Œä½ å¯ä»¥ä½¿ç”¨ YAML å‰ç½®å…ƒä¿¡æ¯ç»§æ‰¿å¹¶æ›¿æ¢å·²æœ‰çš„æ¨¡æ¿æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼ˆå³ä½¿æ¥è‡ªå¦ä¸€ä¸ªåŒ…ï¼‰ï¼š</p><div class="language-ejs line-numbers-mode" data-highlighter="prismjs" data-ext="ejs"><pre><code class="language-ejs"><span class="line">---</span>
<span class="line">extend: &#39;@vue/cli-service/generator/template/src/App.vue&#39;</span>
<span class="line">replace: !!js/regexp /<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"><span class="token punctuation">[</span><span class="token operator">^</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token operator">?</span><span class="token operator">&lt;</span>\\<span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">script&gt;</span><span class="token regex-delimiter">/</span></span></span>
<span class="line"><span class="token operator">--</span><span class="token operator">-</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// æ›¿æ¢é»˜è®¤è„šæœ¬</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥æ›¿æ¢å¤šå¤„ï¼Œåªä¸è¿‡ä½ éœ€è¦å°†æ›¿æ¢çš„å­—ç¬¦ä¸²åŒ…è£¹åœ¨ <code>&lt;%# REPLACE %&gt;</code> å’Œ <code>&lt;%# END_REPLACE %&gt;</code> å—ä¸­ï¼š</p><div class="language-ejs line-numbers-mode" data-highlighter="prismjs" data-ext="ejs"><pre><code class="language-ejs"><span class="line">---</span>
<span class="line">extend: &#39;@vue/cli-service/generator/template/src/App.vue&#39;</span>
<span class="line">replace:</span>
<span class="line">  - !!js/regexp /Welcome to Your Vue\\.js App/</span>
<span class="line">  - !!js/regexp /<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"><span class="token punctuation">[</span><span class="token operator">^</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token operator">?</span><span class="token operator">&lt;</span>\\<span class="token operator">/</span>script<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">--</span><span class="token operator">-</span></span>
<span class="line"></span>
<span class="line"><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token comment"># REPLACE </span><span class="token delimiter punctuation">%&gt;</span></span></span>
<span class="line">æ›¿æ¢æ¬¢è¿ä¿¡æ¯</span>
<span class="line"><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token comment"># END_REPLACE </span><span class="token delimiter punctuation">%&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token comment"># REPLACE </span><span class="token delimiter punctuation">%&gt;</span></span></span>
<span class="line"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// æ›¿æ¢é»˜è®¤è„šæœ¬</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token ejs language-ejs"><span class="token delimiter punctuation">&lt;%</span><span class="token comment"># END_REPLACE </span><span class="token delimiter punctuation">%&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ–‡ä»¶åçš„è¾¹ç•Œæƒ…å†µ" tabindex="-1"><a class="header-anchor" href="#æ–‡ä»¶åçš„è¾¹ç•Œæƒ…å†µ"><span>æ–‡ä»¶åçš„è¾¹ç•Œæƒ…å†µ</span></a></h3><p>å¦‚æœä½ æƒ³è¦æ¸²æŸ“ä¸€ä¸ªä»¥ç‚¹å¼€å¤´çš„æ¨¡æ¿æ–‡ä»¶ (ä¾‹å¦‚ <code>.env</code>)ï¼Œåˆ™éœ€è¦éµå¾ªä¸€ä¸ªç‰¹æ®Šçš„å‘½åçº¦å®šï¼Œå› ä¸ºä»¥ç‚¹å¼€å¤´çš„æ–‡ä»¶ä¼šåœ¨æ’ä»¶å‘å¸ƒåˆ° npm çš„æ—¶å€™è¢«å¿½ç•¥ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># ä»¥ç‚¹å¼€å¤´çš„æ¨¡æ¿éœ€è¦ä½¿ç”¨ä¸‹åˆ’çº¿å–ä»£é‚£ä¸ªç‚¹ï¼š</span></span>
<span class="line"></span>
<span class="line">/generator/template/_env</span>
<span class="line"></span>
<span class="line"><span class="token comment"># å½“è°ƒç”¨ api.render(&#39;./template&#39;) æ—¶ï¼Œå®ƒåœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­å°†è¢«æ¸²æŸ“ä¸ºï¼š</span></span>
<span class="line"></span>
<span class="line">/generator/template/.env</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŒæ—¶è¿™ä¹Ÿæ„å‘³ç€å½“ä½ æƒ³æ¸²æŸ“ä»¥ä¸‹åˆ’çº¿å¼€å¤´çš„æ–‡ä»¶æ—¶ï¼ŒåŒæ ·éœ€è¦éµå¾ªä¸€ä¸ªç‰¹æ®Šçš„å‘½åçº¦å®šï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># è¿™ç§æ¨¡æ¿éœ€è¦ä½¿ç”¨ä¸¤ä¸ªä¸‹åˆ’çº¿æ¥å–ä»£å•ä¸ªä¸‹åˆ’çº¿ï¼š</span></span>
<span class="line"></span>
<span class="line">/generator/template/__variables.scss</span>
<span class="line"></span>
<span class="line"><span class="token comment"># å½“è°ƒç”¨ api.render(&#39;./template&#39;) æ—¶ï¼Œå®ƒåœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­å°†è¢«æ¸²æŸ“ä¸ºï¼š</span></span>
<span class="line"></span>
<span class="line">/generator/template/_variable.scss</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ‰©å±•åŒ…" tabindex="-1"><a class="header-anchor" href="#æ‰©å±•åŒ…"><span>æ‰©å±•åŒ…</span></a></h3><p>å¦‚æœä½ éœ€è¦å‘é¡¹ç›®ä¸­æ·»åŠ \bé¢å¤–çš„ä¾èµ–ï¼Œåˆ›å»ºä¸€ä¸ª npm è„šæœ¬æˆ–è€…ç”¨ä»»ä½•å…¶ä»–æ–¹å¼ä¿®æ”¹ <code>package.json</code>ï¼Œä½ å¯ä»¥ä½¿ç”¨ API <code>extendPackage</code> æ–¹æ³•ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// generator/index.js</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token parameter">api</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  api<span class="token punctuation">.</span><span class="token function">extendPackage</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">dependencies</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token string-property property">&#39;vue-router-layout&#39;</span><span class="token operator">:</span> <span class="token string">&#39;^0.1.2&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªä¾èµ–ï¼š<code>vue-router-layout</code>ã€‚åœ¨æ’ä»¶è°ƒç”¨æ—¶ï¼Œè¿™ä¸ª npm æ¨¡å—å°†è¢«å®‰è£…ï¼Œè¿™ä¸ªä¾èµ–å°†è¢«æ·»åŠ åˆ°ç”¨æˆ·é¡¹ç›®çš„ <code>package.json</code> æ–‡ä»¶ã€‚</p><p>åŒæ ·ä½¿ç”¨è¿™ä¸ª API æˆ‘ä»¬å¯ä»¥æ·»åŠ æ–°çš„ npm ä»»åŠ¡åˆ°é¡¹ç›®ä¸­ã€‚ä¸ºäº†å®ç°è¿™ä¸ªï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªä»»åŠ¡åå’Œä¸€ä¸ªå‘½ä»¤ï¼Œè¿™æ ·ä»–æ‰èƒ½å¤Ÿåœ¨ ç”¨æˆ· <code>package.json</code> æ–‡ä»¶çš„ <code>scripts</code> éƒ¨åˆ†è¿è¡Œï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// generator/index.js</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token parameter">api</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  api<span class="token punctuation">.</span><span class="token function">extendPackage</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">scripts</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">greet</span><span class="token operator">:</span> <span class="token string">&#39;vue-cli-service greet&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªæ–°çš„ <code>greet</code> ä»»åŠ¡æ¥æ‰§è¡Œä¸€ä¸ªåˆ›å»ºåœ¨<a href="#add-a-new-cli-service-command">Service éƒ¨åˆ†</a>çš„è‡ªå®šä¹‰ vue-cli æœåŠ¡å‘½ä»¤ã€‚</p><h3 id="ä¿®æ”¹ä¸»æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹ä¸»æ–‡ä»¶"><span>ä¿®æ”¹ä¸»æ–‡ä»¶</span></a></h3><p>é€šè¿‡ generator æ–¹æ³•ä½ èƒ½å¤Ÿä¿®æ”¹é¡¹ç›®ä¸­çš„æ–‡ä»¶ã€‚æœ€æœ‰ç”¨çš„åœºæ™¯æ˜¯é’ˆå¯¹ <code>main.js</code> æˆ– <code>main.ts</code> æ–‡ä»¶çš„ä¸€äº›ä¿®æ”¹ï¼šæ–°çš„å¯¼å…¥ï¼Œæ–°çš„ <code>Vue.use()</code> è°ƒç”¨ç­‰ã€‚</p><p>è®©æˆ‘ä»¬æ¥æ€è€ƒä¸€ä¸ªåœºæ™¯ï¼Œå½“æˆ‘ä»¬é€šè¿‡ <a href="#creating-new-templates">æ¨¡æ¿</a> åˆ›å»ºäº†ä¸€ä¸ª <code>router.js</code> æ–‡ä»¶ï¼Œç°åœ¨æˆ‘ä»¬å¸Œæœ›å¯¼å…¥è¿™ä¸ªè·¯ç”±åˆ°ä¸»æ–‡ä»¶ä¸­ã€‚æˆ‘ä»¬å°†ç”¨åˆ°ä¸¤ä¸ª generator API æ–¹æ³•ï¼š <code>entryFile</code> å°†è¿”å›é¡¹ç›®çš„ä¸»æ–‡ä»¶ï¼ˆ<code>main.js</code> æˆ– <code>main.ts</code>ï¼‰å†…å®¹ï¼Œ<code>injectImports</code> æ³¨å…¥æœåŠ¡å°†æ·»åŠ æ–°çš„å¯¼å…¥åˆ°ä¸»æ–‡ä»¶ä¸­ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// generator/index.js</span></span>
<span class="line"></span>
<span class="line">api<span class="token punctuation">.</span><span class="token function">injectImports</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>entryFile<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">import router from &#39;./router&#39;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œå½“æˆ‘ä»¬è·¯ç”±è¢«å¯¼å…¥æ—¶ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåœ¨ä¸»æ–‡ä»¶ä¸­å°†è¿™ä¸ªè·¯ç”±æ³¨å…¥åˆ° Vue å®ä¾‹ã€‚æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨ <code>afterInvoke</code> é’©å­ï¼Œè¿™ä¸ªé’©å­å°†åœ¨æ–‡ä»¶è¢«å†™å…¥ç¡¬ç›˜ä¹‹åè¢«è°ƒç”¨ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ Node çš„ <code>fs</code> æ¨¡å—ï¼ˆæä¾›äº†æ–‡ä»¶äº¤äº’ APIï¼‰è¯»å–æ–‡ä»¶å†…å®¹ï¼Œå°†å†…å®¹æ‹†åˆ†</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// generator/index.js</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function-variable function">hooks</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">api</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  api<span class="token punctuation">.</span><span class="token function">afterInvoke</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> contentMain <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>entryFile<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">encoding</span><span class="token operator">:</span> <span class="token string">&#39;utf-8&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> lines <span class="token operator">=</span> contentMain<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\r?\\n</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åæˆ‘ä»¬éœ€è¦æ‰¾åˆ°åŒ…å‡½ <code>render</code> å•è¯çš„å­—ç¬¦ä¸²ï¼ˆå®ƒé€šå¸¸æ˜¯ Vue å®ä¾‹çš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œ<code>router</code> å°±æ˜¯ä¸‹ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// generator/index.js</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function-variable function">hooks</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">api</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  api<span class="token punctuation">.</span><span class="token function">afterInvoke</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> contentMain <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>entryFile<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">encoding</span><span class="token operator">:</span> <span class="token string">&#39;utf-8&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> lines <span class="token operator">=</span> contentMain<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\r?\\n</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line highlighted">    <span class="token keyword">const</span> renderIndex <span class="token operator">=</span> lines<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">line</span> <span class="token operator">=&gt;</span> line<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">render</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line highlighted">    lines<span class="token punctuation">[</span>renderIndex<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">\\n router,</span><span class="token template-punctuation string">\`</span></span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åï¼Œä½ éœ€è¦å°†å†…å®¹å†™å…¥ä¸»æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// generator/index.js</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function-variable function">hooks</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">api</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  api<span class="token punctuation">.</span><span class="token function">afterInvoke</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token constant">EOL</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;os&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> contentMain <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>entryFile<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">encoding</span><span class="token operator">:</span> <span class="token string">&#39;utf-8&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> lines <span class="token operator">=</span> contentMain<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\r?\\n</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">const</span> renderIndex <span class="token operator">=</span> lines<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">line</span> <span class="token operator">=&gt;</span> line<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">render</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    lines<span class="token punctuation">[</span>renderIndex<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token constant">EOL</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">  router,</span><span class="token template-punctuation string">\`</span></span></span>
<span class="line highlighted"></span>
<span class="line highlighted">    fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>entryFile<span class="token punctuation">,</span> line<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token constant">EOL</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">encoding</span><span class="token operator">:</span> <span class="token string">&#39;utf-8&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="service-æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#service-æ’ä»¶"><span>Service æ’ä»¶</span></a></h3><p>Service æ’ä»¶å¯ä»¥ä¿®æ”¹ webpack é…ç½®ï¼Œåˆ›å»ºæ–°çš„ vue-cli service å‘½ä»¤æˆ–è€…ä¿®æ”¹å·²ç»å­˜åœ¨çš„å‘½ä»¤ï¼ˆå³ <code>serve</code> å’Œ <code>build</code>ï¼‰ã€‚</p><p>Service æ’ä»¶åœ¨ Service å®ä¾‹è¢«åˆ›å»ºåè‡ªåŠ¨åŠ è½½ - ä¾‹å¦‚ï¼Œæ¯æ¬¡ <code>vue-cli-service</code> å‘½ä»¤åœ¨é¡¹ç›®ä¸­è¢«è°ƒç”¨çš„æ—¶å€™ã€‚å®ƒä½äº CLI æ’ä»¶æ ¹ç›®å½•çš„ <code>index.js</code> æ–‡ä»¶ã€‚</p><p>ä¸€ä¸ª service æ’ä»¶åº”è¯¥å¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼š</p><ul><li><p>ä¸€ä¸ª [PluginAPI][plugin-api] å®ä¾‹</p></li><li><p>ä¸€ä¸ªåŒ…å« <code>vue.config.js</code> å†…æŒ‡å®šçš„é¡¹ç›®æœ¬åœ°é€‰é¡¹çš„å¯¹è±¡ï¼Œæˆ–è€…åœ¨ <code>package.json</code> å†…çš„ <code>vue</code> å­—æ®µã€‚</p></li></ul><p>ä¸€ä¸ª service æ’ä»¶åº”è¯¥åŒ…å«çš„æœ€å°‘çš„ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="ä¿®æ”¹-webpack-é…ç½®" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹-webpack-é…ç½®"><span>ä¿®æ”¹ webpack é…ç½®</span></a></h3><p>è¿™ä¸ª API å…è®¸ service æ’ä»¶é’ˆå¯¹ä¸åŒçš„ç¯å¢ƒæ‰©å±•/ä¿®æ”¹å†…éƒ¨çš„ webpack é…ç½®ã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œæˆ‘ä»¬åœ¨ webpack-chain ä¸­åŒ…å« <code>vue-auto-routing</code> è¿™ä¸ª webpack æ’ä»¶ï¼Œä½¿ç”¨ç»™å®šçš„å‚æ•°æ¥ä¿®æ”¹webpackçš„é…ç½®ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> VueAutoRoutingPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;vue-auto-routing/lib/webpack-plugin&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">api<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  api<span class="token punctuation">.</span><span class="token function">chainWebpack</span><span class="token punctuation">(</span><span class="token parameter">webpackConfig</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    webpackConfig</span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">&#39;vue-auto-routing&#39;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueAutoRoutingPlugin<span class="token punctuation">,</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">pages</span><span class="token operator">:</span> <span class="token string">&#39;src/pages&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">nested</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>configureWebpack</code> æ–¹æ³•ä¿®æ”¹ webpack é…ç½®æˆ–è€…ä½¿ç”¨ webpack-merge æ¥åˆå¹¶ä¸€ä¸ªè¿”å›çš„å¯¹è±¡ã€‚</p><h3 id="æ·»åŠ ä¸€ä¸ªæ–°çš„-cli-service-å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#æ·»åŠ ä¸€ä¸ªæ–°çš„-cli-service-å‘½ä»¤"><span>æ·»åŠ ä¸€ä¸ªæ–°çš„ cli-service å‘½ä»¤</span></a></h3><p>é€šè¿‡ service æ’ä»¶ä½ å¯ä»¥æ³¨å†Œä¸€ä¸ªæ–°çš„ cli-service å‘½ä»¤ï¼Œé™¤äº†æ ‡å‡†çš„å‘½ä»¤ï¼ˆå³ <code>serve</code> å’Œ <code>build</code>ï¼‰ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>registerCommand</code> API æ–¹æ³•å®ç°ã€‚</p><p>è¿™é‡Œæ˜¯ä¸ªä¾‹å­ï¼Œé€šè¿‡åˆ›å»ºä¸€ä¸ªç®€å•åœ°æ–°å‘½ä»¤ï¼Œå°†å‘å¼€å‘æ§åˆ¶å°æ‰“å°é—®å€™è¯­ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">api<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token string">&#39;greet&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">&#39;Write a greeting to the console&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">usage</span><span class="token operator">:</span> <span class="token string">&#39;vue-cli-service greet&#39;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">ğŸ‘‹  Hello</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†åå­—æ˜¯ï¼ˆ<code>&#39;greet&#39;</code>ï¼‰çš„å‘½ä»¤ï¼Œä¸€ä¸ªæœ‰ <code>description</code> å’Œ <code>usage</code> é€‰é¡¹çš„å¯¹è±¡ï¼Œå’Œä¸€ä¸ªåœ¨æ‰§è¡Œ <code>vue-cli-service greet</code> å‘½ä»¤æ—¶ä¼šè°ƒç”¨çš„å‡½æ•°ã€‚</p><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>ä½ å¯ä»¥ <a href="#extending-package">é€šè¿‡ Generator</a> æ·»åŠ ä¸€ä¸ªæ–°çš„å‘½ä»¤åˆ°é¡¹ç›® <code>package.json</code> æ–‡ä»¶çš„ npm è„šæœ¬åˆ—è¡¨ä¸­ã€‚</p></div><p>å¦‚æœä½ æƒ³åœ¨å·²ç»å®‰è£…äº†æ’ä»¶çš„é¡¹ç›®ä¸­è¿è¡Œæ–°å‘½ä»¤ï¼Œä½ å°†çœ‹åˆ°ä¸‹é¢çš„è¾“å‡ºï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">$ vue-cli-service greet</span>
<span class="line">ğŸ‘‹ Hello<span class="token operator">!</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½ ä¹Ÿå¯ä»¥ç»™æ–°å‘½ä»¤å®šä¹‰ä¸€ç³»åˆ—å¯èƒ½çš„é€‰é¡¹ã€‚è®©æˆ‘ä»¬æ·»åŠ  <code>--name</code> é€‰é¡¹ï¼Œå½“æä¾›äº† name å‚æ•°çš„æ—¶å€™ä¿®æ”¹å‡½æ•°æ‰“å°å†…å®¹ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">api<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token string">&#39;greet&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">&#39;Writes a greeting to the console&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">usage</span><span class="token operator">:</span> <span class="token string">&#39;vue-cli-service greet [options]&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;--name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;specifies a name for greeting&#39;</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token parameter">args</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">ğŸ‘‹ Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>args<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">ğŸ‘‹ Hello!</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œå¦‚æœ <code>greet</code> å‘½ä»¤æºå¸¦äº†ç‰¹å®šçš„ <code>--name</code> é€‰é¡¹ï¼Œè¿™ä¸ª name è¢«æ·»åŠ åˆ°æ¶ˆæ¯æ§åˆ¶å°ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">$ vue-cli-service greet <span class="token parameter variable">--name</span> <span class="token string">&#39;John Doe&#39;</span></span>
<span class="line">ğŸ‘‹ Hello, John Doe<span class="token operator">!</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä¿®æ”¹å·²ç»å­˜åœ¨çš„-cli-service-å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹å·²ç»å­˜åœ¨çš„-cli-service-å‘½ä»¤"><span>ä¿®æ”¹å·²ç»å­˜åœ¨çš„ cli-service å‘½ä»¤</span></a></h3><p>å¦‚æœä½ æƒ³ä¿®æ”¹ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ cli-service å‘½ä»¤ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>api.service.commands</code> è¦†ç›–ï¼ˆretrieveï¼‰å®ƒå¹¶ä¸”åšäº›æ”¹å˜ã€‚æˆ‘ä»¬å°†åœ¨åº”ç”¨ç¨‹åºè¿è¡Œçš„ç«¯å£æ‰“å°ä¸€æ¡ä¿¡æ¯åˆ°æ§åˆ¶å°ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> serve <span class="token punctuation">}</span> <span class="token operator">=</span> api<span class="token punctuation">.</span>service<span class="token punctuation">.</span>commands</span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> serveFn <span class="token operator">=</span> serve<span class="token punctuation">.</span>fn</span>
<span class="line"></span>
<span class="line">serve<span class="token punctuation">.</span><span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token function">serveFn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span><span class="token punctuation">(</span>res <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>url<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Project is running now at </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>res<span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä»å·²ç»å­˜åœ¨çš„å‘½ä»¤åˆ—è¡¨ä¸­è¦†ç›–äº† <code>serve</code> å‘½ä»¤ï¼›ç„¶åæˆ‘ä»¬ä¿®æ”¹äº†ä»–çš„ <code>fn</code> éƒ¨åˆ†ï¼ˆ<code>fn</code> æ˜¯åˆ›å»ºè¿™ä¸ªæ–°å‘½ä»¤æ—¶ä¼ å…¥çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼›å®ƒå®šä¹‰äº†åœ¨æ‰§è¡Œè¿™ä¸ªå‘½ä»¤æ—¶è¦æ‰§è¡Œçš„å‡½æ•°ï¼‰ã€‚ä¿®æ”¹å®Œåï¼Œè¿™ä¸ªæ§åˆ¶å°æ¶ˆæ¯å°†åœ¨ <code>serve</code> å‘½ä»¤æˆåŠŸè¿è¡Œåæ‰“å°ã€‚</p><h3 id="ä¸ºå‘½ä»¤æŒ‡å®šæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ä¸ºå‘½ä»¤æŒ‡å®šæ¨¡å¼"><span>ä¸ºå‘½ä»¤æŒ‡å®šæ¨¡å¼</span></a></h3><p>å¦‚æœä¸€ä¸ªå·²æ³¨å†Œçš„æ’ä»¶å‘½ä»¤éœ€è¦è¿è¡Œåœ¨ç‰¹å®šçš„é»˜è®¤æ¨¡å¼ä¸‹ï¼Œåˆ™è¯¥æ’ä»¶éœ€è¦é€šè¿‡ <code>module.exports.defaultModes</code> ä»¥ <code>{ [commandName]: mode }</code> çš„å½¢å¼æ¥æš´éœ²ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token parameter">api</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  api<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">&#39;build&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// ...</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>defaultModes <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨åŠ è½½ç¯å¢ƒå˜é‡ä¹‹å‰çŸ¥é“è¯¥å‘½ä»¤çš„é¢„æœŸæ¨¡å¼ï¼Œæ‰€ä»¥éœ€è¦æå‰åŠ è½½ç”¨æˆ·é€‰é¡¹/åº”ç”¨æ’ä»¶ã€‚</p><h2 id="å¯¹è¯" tabindex="-1"><a class="header-anchor" href="#å¯¹è¯"><span>å¯¹è¯</span></a></h2><p>å¯¹è¯æ˜¯åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®æˆ–è€…åœ¨å·²æœ‰é¡¹ç›®ä¸­æ·»åŠ æ–°çš„æ’ä»¶æ—¶å¤„ç†ç”¨æˆ·é€‰é¡¹æ—¶éœ€è¦çš„ã€‚æ‰€æœ‰çš„å¯¹è¯é€»è¾‘éƒ½å­˜å‚¨åœ¨ <code>prompts.js</code> æ–‡ä»¶ä¸­ã€‚å¯¹è¯å†…éƒ¨æ˜¯é€šè¿‡ <a href="https://github.com/SBoudrias/Inquirer.js" target="_blank" rel="noopener noreferrer">inquirer</a> å®ç°ã€‚</p><p>å½“ç”¨æˆ·é€šè¿‡è°ƒç”¨ <code>vue invoke</code> åˆå§‹åŒ–æ’ä»¶æ—¶ï¼Œå¦‚æœæ’ä»¶æ ¹ç›®å½•åŒ…å‡½ <code>prompts.js</code>ï¼Œä»–å°†åœ¨è°ƒç”¨æ—¶è¢«ä½¿ç”¨ã€‚è¿™ä¸ªæ–‡ä»¶åº”è¯¥å¯¼å‡ºä¸€ä¸ª<a href="https://github.com/SBoudrias/Inquirer.js#question" target="_blank" rel="noopener noreferrer">é—®é¢˜</a>æ•°ç»„ -- å°†è¢« Inquirer.js å¤„ç†ã€‚</p><p>ä½ åº”è¯¥ç›´æ¥å¯¼å‡ºä¸€ä¸ªé—®é¢˜æ•°ç»„ï¼Œæˆ–è€…å¯¼å‡ºä¸€ä¸ªè¿”å›è¿™äº›å†…å®¹çš„å‡½æ•°ã€‚</p><p>ä¾‹å¦‚ï¼Œç›´æ¥æ˜¯é—®é¢˜æ•°ç»„ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// prompts.js</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">  <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;input&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;locale&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;The locale of project localization.&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function-variable function">validate</span><span class="token operator">:</span> <span class="token parameter">input</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span><span class="token operator">!</span>input<span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&#39;en&#39;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">// ...</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¾‹å¦‚ï¼Œä¸€ä¸ªè¿”å›é—®é¢˜æ•°ç»„çš„å‡½æ•°ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// prompts.js</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å°† \`package.json\` ä½œä¸ºå‚æ•°ä¼ å…¥å‡½æ•°</span></span>
<span class="line">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token parameter">pkg</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> prompts <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;input&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;locale&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;The locale of project localization.&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token function-variable function">validate</span><span class="token operator">:</span> <span class="token parameter">input</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span><span class="token operator">!</span>input<span class="token punctuation">,</span></span>
<span class="line">      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&#39;en&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// æ·»åŠ åŠ¨æ€å¯¹è¯</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&#39;@vue/cli-plugin-eslint&#39;</span> <span class="token keyword">in</span> <span class="token punctuation">(</span>pkg<span class="token punctuation">.</span>devDependencies <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    prompts<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;confirm&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;useESLintPluginVueI18n&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;Use ESLint plugin for Vue I18n ?&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> prompts</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è§£æåˆ°çš„ç­”æ¡ˆå¯¹è±¡å°†ä½œä¸ºé€‰é¡¹ä¼ å…¥åˆ°æ’ä»¶çš„ generatorã€‚</p><p>æˆ–è€…ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡åœ¨å‘½ä»¤è¡Œä¼ å…¥é€‰é¡¹è·³è¿‡å¯¹è¯ç›´æ¥åˆå§‹åŒ–æ’ä»¶ï¼Œä¾‹å¦‚ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">vue invoke my-plugin <span class="token parameter variable">--mode</span> awesome</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¯¹è¯å¯ä»¥æœ‰<a href="https://github.com/SBoudrias/Inquirer.js#prompt-types" target="_blank" rel="noopener noreferrer">ä¸åŒçš„ç±»å‹</a>ï¼Œä½†æ˜¯åœ¨ CLI å¤§å¤šæ•°ä½¿ç”¨çš„æ˜¯ <code>checkbox</code> å’Œ <code>confirm</code>ã€‚è®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ª <code>confirm</code> å¯¹è¯ï¼Œç„¶ååœ¨æ’ä»¶çš„ generatorä½¿ç”¨å®ƒï¼Œæ¥åˆ›å»ºä¸€ä¸ªæœ‰æ¡ä»¶çš„<a href="#creating-new-templates">æ¨¡æ¿æ¸²æŸ“</a>ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// prompts.js</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">  <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">addExampleRoutes</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;confirm&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;Add example routes?&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ’ä»¶åº”ç”¨æ—¶ï¼Œç”¨æˆ·å°†å›ç­”ç¤ºä¾‹è·¯ç”±çš„é—®é¢˜ï¼Œé»˜è®¤çš„ç­”æ¡ˆæ˜¯ <code>No</code>ã€‚</p><p><img src="https://cli.vuejs.org/prompts-example.png" alt="Prompts example"></p><p>å¦‚æœä½ æƒ³åœ¨ generator ä¸­ä½¿ç”¨ç”¨æˆ·çš„é€‰æ‹©ç»“æœï¼Œä½ å¯ä»¥é€šè¿‡å¯¹è¯åå­—è·å¾—ã€‚æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸€ä¸‹ <code>generator/index.js</code>ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>addExampleRoutes<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  api<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&#39;./template&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token operator">...</span>options</span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨å¦‚æœç”¨æˆ·åŒæ„åˆ›å»ºç¤ºä¾‹è·¯ç”±ï¼Œé‚£ä¹ˆæ¨¡æ¿å°†è¢«æ¸²æŸ“ã€‚</p><h2 id="å®‰è£…æœ¬åœ°æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#å®‰è£…æœ¬åœ°æ’ä»¶"><span>å®‰è£…æœ¬åœ°æ’ä»¶</span></a></h2><p>å½“ä½ å¼€å‘è‡ªå·±çš„æ’ä»¶æ—¶ï¼Œä½ éœ€è¦æµ‹è¯•å®ƒã€æŸ¥çœ‹å®ƒåœ¨ä½¿ç”¨ Vue CLI åˆ›å»ºçš„é¡¹ç›®ä¸­å¦‚ä½•å·¥ä½œã€‚ä½ å¯ä»¥ä½¿ç”¨å·²ç»å­˜åœ¨çš„é¡¹ç›®æˆ–è€…åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ç”¨æ¥æµ‹è¯•ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">vue create test-app</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å®‰è£…æ’ä»¶ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">npm</span> <span class="token function">install</span> --save-dev file:/full/path/to/your/plugin</span>
<span class="line">vue invoke <span class="token operator">&lt;</span>your-plugin-name<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¯æ¬¡æ’ä»¶ä¿®æ”¹åï¼Œä½ éœ€è¦é‡å¤è¿™ä¸ªæ­¥éª¤ã€‚</p><p>å¦ä¸€ä¸ªæ–¹å¼æ˜¯åˆ©ç”¨ Vue UI çš„èƒ½åŠ›æ¥æ·»åŠ æ’ä»¶ã€‚ä½ å¯ä»¥è¿è¡Œå®ƒï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">vue ui</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å°†æ‰“å¼€æµè§ˆå™¨çš„çª—å£åœ°å€ <code>localhost:8000</code>ã€‚åˆ° <code>Vue é¡¹ç›®ç®¡ç†</code> èœå•æ ï¼š</p><p><img src="https://cli.vuejs.org/ui-project-manager.png" alt="Vue Project Manager"></p><p>ç„¶åæ‰¾åˆ°ä½ çš„æµ‹è¯•é¡¹ç›®çš„åå­—ï¼š</p><p><img src="https://cli.vuejs.org/ui-select-plugin.png" alt="UI Plugins List"></p><p>ç‚¹å‡»åº”ç”¨åå­—ï¼Œåˆ°æ’ä»¶èœå•ï¼ˆæœ‰ä¸ªéš¾é¢˜ï¼ˆpuzzleï¼‰å›¾æ ‡ï¼‰ç„¶åç‚¹å‡»å³ä¸Šè§’çš„ <code>æ·»åŠ æ–°çš„æ’ä»¶</code> æŒ‰é’®ã€‚åœ¨æ–°é¡µé¢ä¸­ä½ å°†çœ‹åˆ°ä¸€ç³»åˆ—èƒ½å¤Ÿé€šè¿‡ npm è·å¾—çš„ Vue CLI æ’ä»¶ã€‚åœ¨é¡µé¢åº•éƒ¨æœ‰ä¸€ä¸ª <code>æµè§ˆæœ¬åœ°æ’ä»¶</code> çš„æŒ‰é’®ï¼š</p><p><img src="https://cli.vuejs.org/ui-browse-local-plugin.png" alt="Browse local plugins"></p><p>ä½ ç‚¹å‡»å®ƒä¹‹åï¼Œä½ èƒ½å¤Ÿè½»æ˜“çš„æœç´¢åˆ°ä½ åˆ°ä½ çš„æ’ä»¶å¹¶æ·»åŠ åˆ°é¡¹ç›®ä¸­ã€‚åœ¨è¿™ä¹‹åä½ å°†çœ‹åˆ°æ’ä»¶åˆ—è¡¨ï¼Œå¹¶ä¸”ä½ é€šè¿‡ç®€å•çš„ç‚¹å‡»ä¸‹ <code>åˆ·æ–°</code> å›¾æ ‡åº”ç”¨æ’ä»¶å¸¦æ¥çš„å˜åŒ–ï¼š</p><p><img src="https://cli.vuejs.org/ui-plugin-refresh.png" alt="Refresh plugin"></p><h2 id="ui-é›†æˆ" tabindex="-1"><a class="header-anchor" href="#ui-é›†æˆ"><span>UI é›†æˆ</span></a></h2><p>Vue CLI æœ‰ä¸€ä¸ªéå¸¸å¼ºå¤§çš„UIå·¥å…· -- å…è®¸ç”¨æˆ·é€šè¿‡å›¾å½¢æ¥å£æ¥æ¶æ„å’Œç®¡ç†é¡¹ç›®ã€‚Vue CLI æ’ä»¶èƒ½å¤Ÿé›†æˆåˆ°æ¥å£ä¸­ã€‚UI ä¸º CLI æ’ä»¶æä¾›äº†é¢å¤–çš„åŠŸèƒ½ï¼š</p><ul><li>ä½ å¯ä»¥æ‰§è¡Œ npm ä»»åŠ¡ï¼Œç›´æ¥åœ¨ UI ä¸­æ‰§è¡Œæ’ä»¶ä¸­å®šä¹‰çš„å‘½ä»¤ï¼›</li><li>ä½ å¯ä»¥å±•ç¤ºæ’ä»¶çš„è‡ªå®šä¹‰é…ç½®ã€‚ä¾‹å¦‚ï¼š <a href="https://github.com/Akryum/vue-cli-plugin-apollo" target="_blank" rel="noopener noreferrer">vue-cli-plugin-apollo</a> é’ˆå¯¹ Apollo æœåŠ¡å™¨æä¾›äº†å¦‚ä¸‹çš„é…ç½®ï¼š</li></ul><p><img src="https://cli.vuejs.org/ui-configuration.png" alt="UI Configuration Screen"></p><ul><li>å½“åˆ›å»ºé¡¹ç›®æ—¶ï¼Œä½ å¯ä»¥å±•ç¤º <a href="#%E5%AF%B9%E8%AF%9D">å¯¹è¯</a></li><li>ä½ å¯ä»¥ä¸ºä½ çš„æ’ä»¶æ·»åŠ æœ¬åœ°åŒ–ï¼Œå¦‚æœä½ æƒ³æ”¯æŒå¤šç§è¯­è¨€</li><li>ä½ å¯ä»¥ä½¿æ’ä»¶åœ¨ Vue UI æœç´¢ä¸­è¢«æœç´¢åˆ°</li></ul><p>æ‰€æœ‰å…³äº Vue UI çš„é€»è¾‘éƒ½åº”è¯¥æ”¾åˆ°æ ¹ç›®å½•çš„ <code>ui.js</code> æ–‡ä»¶ æˆ–è€… <code>ui/index.js</code>ã€‚è¿™ä¸ªæ–‡ä»¶åº”è¯¥å¯¼å‡ºä¸€ä¸ªå‡½æ•° -- è¿™ä¸ªå‡½æ•°æ¥æ”¶ api å¯¹è±¡ä½œä¸ºå‚æ•°ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token parameter">api</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// Use the API here</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åœ¨-ui-ä¸­å¢åŠ ä»»åŠ¡" tabindex="-1"><a class="header-anchor" href="#åœ¨-ui-ä¸­å¢åŠ ä»»åŠ¡"><span>åœ¨ UI ä¸­å¢åŠ ä»»åŠ¡</span></a></h3><p>Vue CLI æ’ä»¶ä¸ä»…å…è®¸ä½ <a href="#extending-package">é€šè¿‡ Generator</a> ä¸ºé¡¹ç›®æ·»åŠ æ–°çš„ npm ä»»åŠ¡ï¼Œä¹Ÿå¯ä»¥å† Vue UI ä¸­åˆ›å»ºä»–ä»¬ã€‚å½“ä½ æƒ³é€šè¿‡ UI è¿è¡Œä»»åŠ¡å¹¶ä¸”çœ‹åˆ°è¾“å‡ºï¼Œè¿™æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚</p><p>è®©æˆ‘ä»¬é€šè¿‡ <a href="#extending-package">Generator</a> æ·»åŠ  <code>greet</code> ä»»åŠ¡åˆ° UI ä¸­ã€‚ä»»åŠ¡æ˜¯ä»é¡¹ç›®çš„ <code>package.json</code> æ–‡ä»¶çš„ <code>scripts</code> å­—æ®µç”Ÿæˆçš„ã€‚ä½ å¯ä»¥æ ¹æ® <code>api.describeTask</code> æ–¹æ³• &#39;æ·»åŠ &#39; é¢å¤–çš„ä¿¡æ¯å’Œé’©å­ã€‚è®©æˆ‘ä»¬ä¸ºä»»åŠ¡æ·»åŠ ä¸€äº›é¢å¤–çš„ä¿¡æ¯ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token parameter">api</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  api<span class="token punctuation">.</span><span class="token function">describeTask</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">match</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">greet</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">&#39;Prints a greeting in the console&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">link</span><span class="token operator">:</span> <span class="token string">&#39;https://cli.vuejs.org/dev-guide/plugin-dev.html#core-concepts&#39;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨å¦‚æœä½ åœ¨ Vue UI ä¸­æµè§ˆä½ çš„é¡¹ç›®ï¼Œä½ ä¼šå‘ç°ä»»åŠ¡æ·»åŠ çš„ <code>Task</code> éƒ¨åˆ†ã€‚ä½ å¯ä»¥çœ‹è§ä»»åŠ¡åï¼Œæä¾›çš„æè¿°ä¿¡æ¯ï¼Œä½ ä¸€ä¸ªé“¾æ¥å›¾æ ‡æŒ‡å‘ä½ æä¾›çš„URLï¼Œå¹¶ä¸”åœ¨è¾“å‡ºçª—å£å±•ç¤ºäº†ä»»åŠ¡è¾“å‡ºï¼š</p><p><img src="https://cli.vuejs.org/ui-greet-task.png" alt="UI Greet task"></p><h3 id="å±•ç¤ºé…ç½®é¡µé¢" tabindex="-1"><a class="header-anchor" href="#å±•ç¤ºé…ç½®é¡µé¢"><span>å±•ç¤ºé…ç½®é¡µé¢</span></a></h3><p>æœ‰æ—¶ä½ çš„é¡¹ç›®é’ˆå¯¹ä¸åŒçš„åŠŸèƒ½æˆ–è€…åº“ï¼Œæœ‰è‡ªå®šä¹‰çš„é…ç½®æ–‡ä»¶ã€‚é€šè¿‡ Vue CLI æ’ä»¶ï¼Œä½ å¯ä»¥åœ¨ Vue UI ä¸­å±•ç¤ºé…ç½®ï¼Œä¿®æ”¹å®ƒå’Œä¿å­˜å®ƒï¼ˆä¿å­˜å°†ä¿®æ”¹ä½ é¡¹ç›®ä¸­ç›¸åº”çš„é…ç½®ï¼‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒVue CLI é¡¹ç›®æœ‰ä¸ªä¸»é…ç½®é¡µé¢ï¼Œ<code>vue.config.js</code> ä»£è¡¨çš„é…ç½®ã€‚å¦‚æœä½ å°† ESLint åŒ…å‡½åˆ°é¡¹ç›®ä¸­ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸ª ESLint çš„é…ç½®é¡µé¢ï¼š</p><p><img src="https://cli.vuejs.org/ui-configuration-default.png" alt="UI Configuration Screen"></p><p>è®©æˆ‘ä»¬ä¸ºä½ çš„æ’ä»¶å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„é…ç½®ã€‚ç¬¬ä¸€æ­¥ï¼Œåœ¨ä½ çš„æ’ä»¶æ·»åŠ åˆ°å·²ç»å­˜åœ¨çš„é¡¹ç›®ä¸­ä¹‹åï¼Œåº”è¯¥æœ‰ä¸ªé…ç½®æ–‡ä»¶ã€‚è¿™æ„å‘³ç€ä½ éœ€è¦åœ¨<a href="#creating-new-templates">æ¨¡æ¿æ­¥éª¤</a>å°†è¿™ä¸ªæ–‡ä»¶æ·»åŠ åˆ° <code>template</code> æ–‡ä»¶å¤¹ä¸­ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå¯é…ç½®çš„ UI èƒ½å¤Ÿè¯»å–å’Œå†™å…¥ä»¥ä¸‹æ–‡ä»¶ç±»å‹ï¼š<code>json</code>ï¼Œ<code>yaml</code>ï¼Œ<code>js</code>ï¼Œ<code>package</code>ã€‚è®©æˆ‘ä»¬å‘½åæ–‡ä»¶ä¸º <code>myConfig.js</code> å°†å®ƒæ”¾å…¥ <code>template</code> çš„æ ¹æ–‡ä»¶å¤¹ï¼š</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">.</span>
<span class="line">â””â”€â”€ generator</span>
<span class="line">    â”œâ”€â”€ index.js</span>
<span class="line">    â””â”€â”€ template</span>
<span class="line">        â”œâ”€â”€ myConfig.js</span>
<span class="line">        â””â”€â”€ src</span>
<span class="line">            â”œâ”€â”€ layouts</span>
<span class="line">            â”œâ”€â”€ pages</span>
<span class="line">            â””â”€â”€ router.js</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ä½ éœ€è¦æ·»åŠ ä¸€äº›çœŸå®çš„é…ç½®åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// myConfig.js</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&#39;black&#39;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ä½ çš„æ’ä»¶è¢«åº”ç”¨åï¼Œ<code>myConfig.js</code> æ–‡ä»¶å°†è¢«æ¸²æŸ“åˆ°é¡¹ç›®æ ¹ç›®å½•ã€‚ç°åœ¨è®©æˆ‘ä»¬åœ¨ <code>ui.js</code> æ–‡ä»¶ä¸­é€šè¿‡ <code>api.describeConfig</code> æ–¹æ³•æ·»åŠ ä¸€ä¸ªæ–°çš„é…ç½®é¡µé¢ã€‚</p><p>é¦–å…ˆä½ éœ€è¦ä¼ å…¥ä¸€äº›ä¿¡æ¯ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// ui.js</span></span>
<span class="line"></span>
<span class="line">api<span class="token punctuation">.</span><span class="token function">describeConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// é…ç½®çš„å”¯ä¸€id</span></span>
<span class="line">  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;org.ktsn.vue-auto-routing.config&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// å±•ç¤ºçš„åå­—</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Greeting configuration&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// å±•ç¤ºåœ¨åå­—ä¸‹é¢</span></span>
<span class="line">  <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">&#39;This config defines the color of the greeting printed&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// â€œæ›´å¤šä¿¡æ¯â€ çš„é“¾æ¥</span></span>
<span class="line">  <span class="token literal-property property">link</span><span class="token operator">:</span> <span class="token string">&#39;https://github.com/ktsn/vue-cli-plugin-auto-routing#readme&#39;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container caution"><p class="hint-container-title">Warning</p><p>ç¡®ä¿æ­£ç¡®åœ°ä¸º id è®¾ç½®å‘½åç©ºé—´ï¼Œå®ƒå¿…é¡»åœ¨æ‰€æœ‰çš„æ’ä»¶ä¸­å”¯ä¸€ã€‚å»ºè®®ä½¿ç”¨ <a href="https://en.wikipedia.org/wiki/Reverse_domain_name_notation" target="_blank" rel="noopener noreferrer">reverse domain name notation</a> å‘½åæ–¹æ³•</p></div><h3 id="é…ç½®-logo" tabindex="-1"><a class="header-anchor" href="#é…ç½®-logo"><span>é…ç½® logo</span></a></h3>`,131)),a("p",null,[n[5]||(n[5]=s("ä½ ä¹Ÿå¯ä»¥ä¸ºä½ çš„é…ç½®é€‰æ‹©ä¸€ä¸ªå›¾æ ‡ã€‚ä»–æ—¢å¯ä»¥æ˜¯ ",-1)),n[6]||(n[6]=a("a",{href:"https://material.io/tools/icons/?style=baseline",target:"_blank",rel:"noopener noreferrer"},"Material icon",-1)),n[7]||(n[7]=s(" ä»£ç ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå®šä¹‰å›¾ç‰‡ï¼ˆçœ‹è¿™é‡Œ ",-1)),t(p,{to:"/blog/translate/ui-api.html#public-static-files"},{default:l(()=>[...n[4]||(n[4]=[s("Public static files",-1)])]),_:1}),n[8]||(n[8]=s("ï¼‰ã€‚",-1))]),n[23]||(n[23]=e(`<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// ui.js</span></span>
<span class="line"></span>
<span class="line">api<span class="token punctuation">.</span><span class="token function">describeConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">/* ... */</span></span>
<span class="line">  <span class="token comment">// Config icon</span></span>
<span class="line">  <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&#39;color_lens&#39;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½ ä¸å®šä¹‰å›¾æ ‡ï¼Œå°†å±•ç¤ºæ’ä»¶logo (çœ‹è¿™é‡Œ <a href="#logo">Logo</a>)ã€‚</p><h4 id="é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#é…ç½®æ–‡ä»¶"><span>é…ç½®æ–‡ä»¶</span></a></h4><p>ç°åœ¨ä½ éœ€è¦å°†é…ç½®æ–‡ä»¶æä¾›ç»™ UIï¼šè¿™æ ·ä½ å¯ä»¥è¯»å–å®ƒçš„å†…å®¹æˆ–è€…ä¿®æ”¹å®ƒã€‚ä½ éœ€è¦ä¸ºä½ çš„é…ç½®æ–‡ä»¶é€‰æ‹©ä¸€ä¸ªåå­—ï¼Œé€‰æ‹©æ ¼å¼å’Œæä¾›æ–‡ä»¶è·¯å¾„ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">api<span class="token punctuation">.</span><span class="token function">describeConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// other config properties</span></span>
<span class="line">  <span class="token literal-property property">files</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">myConfig</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">js</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;myConfig.js&#39;</span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œå¯ä»¥æä¾›å¤šä¸ªæ–‡ä»¶ã€‚å¦‚æœæˆ‘ä»¬æœ‰ <code>myConfig.json</code>ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>json: [&#39;myConfig.json&#39;]</code> å±æ€§æä¾›å®ƒã€‚é¡ºåºæ˜¯å¾ˆé‡è¦çš„ï¼šå¦‚æœå®ƒä¸å­˜åœ¨ï¼Œåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶åå­—å°†ç”¨æ¥åˆ›å»ºé…ç½®æ–‡ä»¶ã€‚</p><h4 id="å±•ç¤ºé…ç½®çš„å¯¹è¯" tabindex="-1"><a class="header-anchor" href="#å±•ç¤ºé…ç½®çš„å¯¹è¯"><span>å±•ç¤ºé…ç½®çš„å¯¹è¯</span></a></h4><p>æˆ‘ä»¬å¸Œæœ›åœ¨é…ç½®é¡µé¢ä¸­å±•ç¤ºä¸€ä¸ªé¢œè‰²å±æ€§çš„è¾“å…¥æ¡†ã€‚ä¸ºäº†å®Œæˆå®ƒï¼Œæˆ‘ä»¬éœ€è¦ <code>onRead</code> é’©å­ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªè¢«å±•ç¤ºçš„å¯¹è¯åˆ—è¡¨ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">api<span class="token punctuation">.</span><span class="token function">describeConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token function-variable function">onRead</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">prompts</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">color</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;input&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;Define the color for greeting message&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;white&#39;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰å€¼ä¸º &#39;ç™½è‰²&#39; çš„è¾“å…¥å¯¹è¯ã€‚è¿™å°±æ˜¯æˆ‘ä»¬çš„é…ç½®é¡µé¢å¦‚ä½•æ‰¾åˆ°ä¸Šé¢æä¾›çš„æ‰€æœ‰é…ç½®ï¼š</p><p><img src="https://cli.vuejs.org/ui-config-start.png" alt="UI Config Start"></p><p>ç°åœ¨è®©æˆ‘ä»¬ä½¿ç”¨æ¥è‡ªé…ç½®æ–‡ä»¶çš„å±æ€§ï¼Œæ›¿æ¢ç¡¬ç¼–ç çš„ <code>white</code> å€¼ã€‚åœ¨ <code>onRead</code> é’©å­ä¸­ <code>data</code> å¯¹è±¡åŒ…å‡½æ¯ä¸€ä¸ªé…ç½®æ–‡ä»¶å†…å®¹çš„ JSON ç»“æœã€‚åœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œ<code>myConfig.js</code> çš„å†…å®¹æ˜¯</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// myConfig.js</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&#39;black&#39;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰€ä»¥ï¼Œ<code>data</code> å¯¹è±¡å°†æ˜¯</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// File</span></span>
<span class="line">  <span class="token literal-property property">myConfig</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// File data</span></span>
<span class="line">    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&#39;black&#39;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®¹æ˜“çœ‹åˆ°ï¼Œæˆ‘ä»¬éœ€è¦ <code>data.myConfig.color</code> å±æ€§ã€‚è®©æˆ‘ä»¬ä¿®æ”¹ <code>onRead</code> é’©å­ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// ui.js</span></span>
<span class="line"></span>
<span class="line"><span class="token function-variable function">onRead</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">prompts</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">color</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;input&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;Define the color for greeting message&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">value</span><span class="token operator">:</span> data<span class="token punctuation">.</span>myConfig <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>myConfig<span class="token punctuation">.</span>color</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>æ³¨æ„ï¼Œå½“é¡µé¢åŠ è½½æ—¶ï¼Œå¦‚æœé…ç½®æ–‡ä»¶ä¸å­˜åœ¨ <code>myConfig</code> å¯èƒ½æ˜¯ undefinedã€‚</p></div><p>ä½ å¯ä»¥çœ‹è§ï¼Œåœ¨é…ç½®é¡µé¢ä¸­ <code>white</code> è¢« <code>black</code> æ›¿æ¢äº†ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå¦‚æœé…ç½®æ–‡ä»¶ä¸å­˜åœ¨ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// ui.js</span></span>
<span class="line"></span>
<span class="line"><span class="token function-variable function">onRead</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">prompts</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">color</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;input&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;Define the color for greeting message&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">value</span><span class="token operator">:</span> data<span class="token punctuation">.</span>myConfig <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>myConfig<span class="token punctuation">.</span>color<span class="token punctuation">,</span></span>
<span class="line">      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&#39;black&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¿å­˜é…ç½®å˜åŒ–" tabindex="-1"><a class="header-anchor" href="#ä¿å­˜é…ç½®å˜åŒ–"><span>ä¿å­˜é…ç½®å˜åŒ–</span></a></h4><p>æˆ‘ä»¬åˆšåˆšè¯»å–äº† <code>myConfig.js</code> çš„å†…å®¹å¹¶ä¸”åœ¨é…ç½®é¡µé¢ä½¿ç”¨å®ƒã€‚ç°åœ¨è®©æˆ‘ä»¬å°è¯•å°†é¢œè‰²è¾“å…¥æ¡†çš„å†…å®¹ä¿å­˜åˆ°æ–‡ä»¶ä¸­ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>onWrite</code> é’©å­ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// ui.js</span></span>
<span class="line"></span>
<span class="line">api<span class="token punctuation">.</span><span class="token function">describeConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">/* ... */</span></span>
<span class="line">  <span class="token function-variable function">onWrite</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> prompts<span class="token punctuation">,</span> api <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// ...</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,24)),a("p",null,[n[10]||(n[10]=a("code",null,"onWrite",-1)),n[11]||(n[11]=s(" é’©å­èƒ½å¤Ÿå¾—åˆ°è®¸å¤š",-1)),t(p,{to:"/blog/translate/ui-api.html#save-config-changes"},{default:l(()=>[...n[9]||(n[9]=[s("å‚æ•°",-1)])]),_:1}),n[12]||(n[12]=s(" ä½†æˆ‘ä»¬ä»…ä»…éœ€è¦å…¶ä¸­çš„ä¸¤ä¸ªï¼š",-1)),n[13]||(n[13]=a("code",null,"prompts",-1)),n[14]||(n[14]=s(" å’Œ ",-1)),n[15]||(n[15]=a("code",null,"api",-1)),n[16]||(n[16]=s("ã€‚ç¬¬ä¸€ä¸ªæ˜¯å½“å‰å¯¹è¯è¿è¡Œæ—¶å¯¹è±¡ - æˆ‘ä»¬å°†å¾—åˆ°å¯¹è¯ id å¹¶ä¸”é€šè¿‡ id æ‹¿åˆ°ç­”æ¡ˆã€‚ä¸ºäº†è·å–ç­”æ¡ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ¥è‡ª ",-1)),n[17]||(n[17]=a("code",null,"api",-1)),n[18]||(n[18]=s(" çš„ ",-1)),n[19]||(n[19]=a("code",null,"async getAnswer()",-1)),n[20]||(n[20]=s(" æ–¹æ³•ï¼š",-1))]),n[24]||(n[24]=e(`<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// ui.js</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">async</span> <span class="token function">onWrite</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> api<span class="token punctuation">,</span> prompts <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> prompt <span class="token keyword">of</span> prompts<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    result<span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>prompt<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token punctuation">.</span><span class="token function">getAnswer</span><span class="token punctuation">(</span>prompt<span class="token punctuation">.</span>id<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  api<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">&#39;myConfig&#39;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨å¦‚æœä½ é€šè¿‡é…ç½®é¡µé¢ä¿®æ”¹é¢œè‰²è¾“å…¥æ¡†çš„å†…å®¹ï¼Œæœ‰ <code>black</code> å˜ä¸º <code>red</code>ï¼Œç„¶åæŒ‰ä¸‹ <code>ä¿å­˜ä¿®æ”¹</code> æŒ‰é’®ï¼Œä½ ä¼šå‘ç°ä½ çš„é¡¹ç›®ä¸­çš„ <code>myConfig.js</code> æ–‡ä»¶ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// myConfig.js</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&#39;red&#39;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å±•ç¤ºå¯¹è¯" tabindex="-1"><a class="header-anchor" href="#å±•ç¤ºå¯¹è¯"><span>å±•ç¤ºå¯¹è¯</span></a></h3><p>å¦‚æœä½ æƒ³ï¼Œä½ å¯ä»¥åœ¨ Vue UI ä¸­å±•ç¤º<a href="#prompts">å¯¹è¯</a>ã€‚å½“ä½ é€šè¿‡ UI å®‰è£…æ’ä»¶æ—¶ï¼Œå¯¹è¯å°†åœ¨æ’ä»¶çš„è°ƒç”¨æ­¥éª¤ä¸­å±•ç¤ºã€‚</p><p>ä½ å¯ä»¥é€šè¿‡æ·»åŠ é¢å¤–å±æ€§æ‰©å±• <a href="#prompts-for-3rd-party-plugins">inquirer å¯¹è±¡</a>ã€‚ä»–ä»¬æ˜¯å¯é€‰é¡¹ä¸”ä»…ä»…è¢« UI ä½¿ç”¨ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// prompts.js</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">  <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// åŸºæœ¬å¯¹è¯å±æ€§</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">addExampleRoutes</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;confirm&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;Add example routes?&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token comment">// UI å…³è”çš„å¯¹è¯å±æ€§</span></span>
<span class="line">    <span class="token literal-property property">group</span><span class="token operator">:</span> <span class="token string">&#39;Strongly recommended&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">&#39;Adds example pages, layouts and correct router config&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">link</span><span class="token operator">:</span></span>
<span class="line">      <span class="token string">&#39;https://github.com/ktsn/vue-cli-plugin-auto-routing/#vue-cli-plugin-auto-routing&#39;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œä½ å°†åœ¨æ’ä»¶è°ƒç”¨æ—¶çœ‹åˆ°ï¼š</p><p><img src="https://cli.vuejs.org/ui-prompts.png" alt="UI Prompts"></p><h3 id="logo" tabindex="-1"><a class="header-anchor" href="#logo"><span>Logo</span></a></h3><p>ä½ å¯ä»¥æ”¾ä¸€ä¸ª <code>logo.png</code> æ–‡ä»¶åˆ°æ–‡ä»¶å¤¹æ ¹ç›®å½•ï¼Œå®ƒå°†è¢«å‘å¸ƒåˆ° npmã€‚å°†åœ¨ä»¥ä¸‹å‡ ä¸ªåœ°æ–¹å±•ç¤ºï¼š</p><ul><li>å½“æœç´¢æ’ä»¶å»å®‰è£…æ—¶</li><li>åœ¨å·²å®‰è£…çš„æ’ä»¶åˆ—è¡¨ä¸­</li><li>åœ¨é…ç½®åˆ—è¡¨ä¸­ï¼ˆé»˜è®¤æƒ…å†µï¼‰</li><li>åœ¨æ·»åŠ ä»»åŠ¡çš„ä»»åŠ¡åˆ—è¡¨ä¸­ï¼ˆé»˜è®¤æƒ…å†µï¼‰</li></ul><p><img src="https://cli.vuejs.org/plugins.png" alt="Plugins"></p><p>Logo åº”è¯¥æ˜¯æ–¹å½¢éé€æ˜å›¾ç‰‡ï¼ˆç†æƒ³å°ºå¯¸ 84*84ï¼‰ã€‚</p><h3 id="å‘å¸ƒæ’ä»¶åˆ°-npm" tabindex="-1"><a class="header-anchor" href="#å‘å¸ƒæ’ä»¶åˆ°-npm"><span>å‘å¸ƒæ’ä»¶åˆ° npm</span></a></h3><p>ä¸ºäº†å‘å¸ƒæ’ä»¶ï¼Œä½ éœ€è¦åœ¨ <a href="npmjs.com">npmjs.com</a> ä¸Šæ³¨å†Œå¹¶ä¸”å…¨å±€å®‰è£… <code>npm</code>ã€‚å¦‚æœè¿™æ˜¯ä½ çš„ç¬¬ä¸€ä¸ªå‘å¸ƒçš„ npm æ¨¡å—ï¼Œè¯·æ‰§è¡Œ</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">npm</span> login</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¾“å…¥ä½ çš„åå­—å’Œå¯†ç ã€‚è¿™å°†å­˜å‚¨ä½ çš„å‡­è¯ï¼Œè¿™æ ·ä½ å°±ä¸å¿…æ¯æ¬¡å‘å¸ƒæ—¶éƒ½è¾“å…¥ã€‚</p><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>å‘å¸ƒæ’ä»¶ä¹‹å‰ï¼Œç¡®ä¿ä½ ä¸ºå®ƒé€‰æ‹©äº†æ­£ç¡®çš„åå­—ï¼åå­—è½¬æ¢æ˜¯ <code>vue-cli-plugin-&lt;name&gt;</code>ã€‚åœ¨ <a href="#discoverability">Discoverability</a> æŸ¥çœ‹æ›´å¤šä¿¡æ¯</p></div><p>æ¥ä¸‹æ¥å‘å¸ƒæ’ä»¶ï¼Œåˆ°æ’ä»¶çš„æ ¹ç›®å½•ï¼Œåœ¨å‘½ä»¤è¡Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">npm</span> publish</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æˆåŠŸå‘å¸ƒåï¼Œä½ åº”è¯¥èƒ½å¤Ÿä½¿ç”¨ <code>vue add &lt;plugin-name&gt;</code> å‘½ä»¤å°†ä½ çš„æ’ä»¶æ·»åŠ åˆ°ä½¿ç”¨ Vue CLI åˆ›å»ºçš„é¡¹ç›®ã€‚</p>`,22))])}const m=i(u,[["render",d]]),g=JSON.parse('{"path":"/blog/translate/vue-cli-plugin-dev.html","title":"Vue CLI æ’ä»¶å¼€å‘æŒ‡å—","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1768212945000,"contributors":[{"name":"Rowan Liu","username":"","email":"lcf33123@gmail.com","commits":1}],"changelog":[{"hash":"510851a2e40013ba249eb2696f9e38f188ca533a","time":1768212945000,"email":"lcf33123@gmail.com","author":"Rowan Liu","message":"Update README.md"}]},"filePathRelative":"blog/translate/vue-cli-plugin-dev.md"}');export{m as comp,g as data};
