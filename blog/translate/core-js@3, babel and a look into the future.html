<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>core-js@3, babel展望未来 | Rowan Liu&#39;s Tech</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="just do it! ">
    
    <link rel="preload" href="/FrontEnd/assets/css/0.styles.4f2b0bb5.css" as="style"><link rel="preload" href="/FrontEnd/assets/js/app.8145b916.js" as="script"><link rel="preload" href="/FrontEnd/assets/js/2.3f4cbde9.js" as="script"><link rel="preload" href="/FrontEnd/assets/js/1.4a225f88.js" as="script"><link rel="preload" href="/FrontEnd/assets/js/207.a7c28489.js" as="script"><link rel="prefetch" href="/FrontEnd/assets/js/10.37cbd0cd.js"><link rel="prefetch" href="/FrontEnd/assets/js/100.d3d3d56a.js"><link rel="prefetch" href="/FrontEnd/assets/js/101.a027c202.js"><link rel="prefetch" href="/FrontEnd/assets/js/102.4f68b4a7.js"><link rel="prefetch" href="/FrontEnd/assets/js/103.788eaa9f.js"><link rel="prefetch" href="/FrontEnd/assets/js/104.42478a66.js"><link rel="prefetch" href="/FrontEnd/assets/js/105.c9ecdbb1.js"><link rel="prefetch" href="/FrontEnd/assets/js/106.1aa8f65e.js"><link rel="prefetch" href="/FrontEnd/assets/js/107.c05a3876.js"><link rel="prefetch" href="/FrontEnd/assets/js/108.6a8addaa.js"><link rel="prefetch" href="/FrontEnd/assets/js/109.98d37ccf.js"><link rel="prefetch" href="/FrontEnd/assets/js/11.affb9d79.js"><link rel="prefetch" href="/FrontEnd/assets/js/110.c2186c3e.js"><link rel="prefetch" href="/FrontEnd/assets/js/111.fca62a57.js"><link rel="prefetch" href="/FrontEnd/assets/js/112.6060ca84.js"><link rel="prefetch" href="/FrontEnd/assets/js/113.179414fd.js"><link rel="prefetch" href="/FrontEnd/assets/js/114.936b695b.js"><link rel="prefetch" href="/FrontEnd/assets/js/115.04d40483.js"><link rel="prefetch" href="/FrontEnd/assets/js/116.9add6fa0.js"><link rel="prefetch" href="/FrontEnd/assets/js/117.1cbe8816.js"><link rel="prefetch" href="/FrontEnd/assets/js/118.329d8682.js"><link rel="prefetch" href="/FrontEnd/assets/js/119.8053824c.js"><link rel="prefetch" href="/FrontEnd/assets/js/12.c0038159.js"><link rel="prefetch" href="/FrontEnd/assets/js/120.fce97557.js"><link rel="prefetch" href="/FrontEnd/assets/js/121.0b6f53a8.js"><link rel="prefetch" href="/FrontEnd/assets/js/122.28f8fd98.js"><link rel="prefetch" href="/FrontEnd/assets/js/123.5f533e1e.js"><link rel="prefetch" href="/FrontEnd/assets/js/124.09ba7260.js"><link rel="prefetch" href="/FrontEnd/assets/js/125.54f23753.js"><link rel="prefetch" href="/FrontEnd/assets/js/126.b84738ed.js"><link rel="prefetch" href="/FrontEnd/assets/js/127.0018f12f.js"><link rel="prefetch" href="/FrontEnd/assets/js/128.fdd7ff74.js"><link rel="prefetch" href="/FrontEnd/assets/js/129.9bf98c17.js"><link rel="prefetch" href="/FrontEnd/assets/js/13.f55291aa.js"><link rel="prefetch" href="/FrontEnd/assets/js/130.f40379b7.js"><link rel="prefetch" href="/FrontEnd/assets/js/131.33c9eb56.js"><link rel="prefetch" href="/FrontEnd/assets/js/132.3078eff2.js"><link rel="prefetch" href="/FrontEnd/assets/js/133.925a901c.js"><link rel="prefetch" href="/FrontEnd/assets/js/134.eeaf1f48.js"><link rel="prefetch" href="/FrontEnd/assets/js/135.855c0b01.js"><link rel="prefetch" href="/FrontEnd/assets/js/136.02f2ff6e.js"><link rel="prefetch" href="/FrontEnd/assets/js/137.3a09d5e0.js"><link rel="prefetch" href="/FrontEnd/assets/js/138.3e7d04c5.js"><link rel="prefetch" href="/FrontEnd/assets/js/139.34797634.js"><link rel="prefetch" href="/FrontEnd/assets/js/14.c74ee963.js"><link rel="prefetch" href="/FrontEnd/assets/js/140.d989f683.js"><link rel="prefetch" href="/FrontEnd/assets/js/141.5683ddbb.js"><link rel="prefetch" href="/FrontEnd/assets/js/142.a9fc42c8.js"><link rel="prefetch" href="/FrontEnd/assets/js/143.9412e76c.js"><link rel="prefetch" href="/FrontEnd/assets/js/144.9868bc5e.js"><link rel="prefetch" href="/FrontEnd/assets/js/145.19b8a67e.js"><link rel="prefetch" href="/FrontEnd/assets/js/146.a6365b88.js"><link rel="prefetch" href="/FrontEnd/assets/js/147.bc9603ed.js"><link rel="prefetch" href="/FrontEnd/assets/js/148.5c90f628.js"><link rel="prefetch" href="/FrontEnd/assets/js/149.e089f59e.js"><link rel="prefetch" href="/FrontEnd/assets/js/15.417ddb64.js"><link rel="prefetch" href="/FrontEnd/assets/js/150.273e853e.js"><link rel="prefetch" href="/FrontEnd/assets/js/151.f950bf63.js"><link rel="prefetch" href="/FrontEnd/assets/js/152.13b81a68.js"><link rel="prefetch" href="/FrontEnd/assets/js/153.4cef2fba.js"><link rel="prefetch" href="/FrontEnd/assets/js/154.90732604.js"><link rel="prefetch" href="/FrontEnd/assets/js/155.05c30503.js"><link rel="prefetch" href="/FrontEnd/assets/js/156.38ac243b.js"><link rel="prefetch" href="/FrontEnd/assets/js/157.486ce1a4.js"><link rel="prefetch" href="/FrontEnd/assets/js/158.8e9d5f5e.js"><link rel="prefetch" href="/FrontEnd/assets/js/159.3e6d9f25.js"><link rel="prefetch" href="/FrontEnd/assets/js/16.7977063c.js"><link rel="prefetch" href="/FrontEnd/assets/js/160.e49cc3dc.js"><link rel="prefetch" href="/FrontEnd/assets/js/161.83bb5d36.js"><link rel="prefetch" href="/FrontEnd/assets/js/162.39de70fa.js"><link rel="prefetch" href="/FrontEnd/assets/js/163.b7eb918d.js"><link rel="prefetch" href="/FrontEnd/assets/js/164.a5b4d7c5.js"><link rel="prefetch" href="/FrontEnd/assets/js/165.bb3252e9.js"><link rel="prefetch" href="/FrontEnd/assets/js/166.2174bf5b.js"><link rel="prefetch" href="/FrontEnd/assets/js/167.bec2966d.js"><link rel="prefetch" href="/FrontEnd/assets/js/168.8b2e2f34.js"><link rel="prefetch" href="/FrontEnd/assets/js/169.bffa4dda.js"><link rel="prefetch" href="/FrontEnd/assets/js/17.8bc1e081.js"><link rel="prefetch" href="/FrontEnd/assets/js/170.a6a38ee6.js"><link rel="prefetch" href="/FrontEnd/assets/js/171.916e4b6c.js"><link rel="prefetch" href="/FrontEnd/assets/js/172.124cfc27.js"><link rel="prefetch" href="/FrontEnd/assets/js/173.f0c4d4e9.js"><link rel="prefetch" href="/FrontEnd/assets/js/174.24ca9817.js"><link rel="prefetch" href="/FrontEnd/assets/js/175.483723dc.js"><link rel="prefetch" href="/FrontEnd/assets/js/176.cdb0fc7e.js"><link rel="prefetch" href="/FrontEnd/assets/js/177.be6a983a.js"><link rel="prefetch" href="/FrontEnd/assets/js/178.757b061d.js"><link rel="prefetch" href="/FrontEnd/assets/js/179.68120386.js"><link rel="prefetch" href="/FrontEnd/assets/js/18.b2e30bbf.js"><link rel="prefetch" href="/FrontEnd/assets/js/180.94261d4d.js"><link rel="prefetch" href="/FrontEnd/assets/js/181.8484d634.js"><link rel="prefetch" href="/FrontEnd/assets/js/182.8a30477e.js"><link rel="prefetch" href="/FrontEnd/assets/js/183.eabcd091.js"><link rel="prefetch" href="/FrontEnd/assets/js/184.99c43fc4.js"><link rel="prefetch" href="/FrontEnd/assets/js/185.ce84e50b.js"><link rel="prefetch" href="/FrontEnd/assets/js/186.b4f0be3d.js"><link rel="prefetch" href="/FrontEnd/assets/js/187.b834505d.js"><link rel="prefetch" href="/FrontEnd/assets/js/188.75bf2d33.js"><link rel="prefetch" href="/FrontEnd/assets/js/189.7e00bb80.js"><link rel="prefetch" href="/FrontEnd/assets/js/19.0eeae570.js"><link rel="prefetch" href="/FrontEnd/assets/js/190.ebd5ed9c.js"><link rel="prefetch" href="/FrontEnd/assets/js/191.a42ed27c.js"><link rel="prefetch" href="/FrontEnd/assets/js/192.8c5126c2.js"><link rel="prefetch" href="/FrontEnd/assets/js/193.82cd8fa1.js"><link rel="prefetch" href="/FrontEnd/assets/js/194.530a72f2.js"><link rel="prefetch" href="/FrontEnd/assets/js/195.095c5093.js"><link rel="prefetch" href="/FrontEnd/assets/js/196.d45d0347.js"><link rel="prefetch" href="/FrontEnd/assets/js/197.a5cc99bd.js"><link rel="prefetch" href="/FrontEnd/assets/js/198.b6a225a2.js"><link rel="prefetch" href="/FrontEnd/assets/js/199.81a64223.js"><link rel="prefetch" href="/FrontEnd/assets/js/20.3a59b940.js"><link rel="prefetch" href="/FrontEnd/assets/js/200.c39bdcc3.js"><link rel="prefetch" href="/FrontEnd/assets/js/201.39c1af5f.js"><link rel="prefetch" href="/FrontEnd/assets/js/202.36eaa1a8.js"><link rel="prefetch" href="/FrontEnd/assets/js/203.24b806ab.js"><link rel="prefetch" href="/FrontEnd/assets/js/204.290eba29.js"><link rel="prefetch" href="/FrontEnd/assets/js/205.9a42a9ca.js"><link rel="prefetch" href="/FrontEnd/assets/js/206.cb6d5bbb.js"><link rel="prefetch" href="/FrontEnd/assets/js/208.40810fc9.js"><link rel="prefetch" href="/FrontEnd/assets/js/209.552e053e.js"><link rel="prefetch" href="/FrontEnd/assets/js/21.2a89bb55.js"><link rel="prefetch" href="/FrontEnd/assets/js/210.b6a788e3.js"><link rel="prefetch" href="/FrontEnd/assets/js/211.ce40b0cf.js"><link rel="prefetch" href="/FrontEnd/assets/js/212.e175a180.js"><link rel="prefetch" href="/FrontEnd/assets/js/213.fa5cf9bc.js"><link rel="prefetch" href="/FrontEnd/assets/js/214.d2b95fad.js"><link rel="prefetch" href="/FrontEnd/assets/js/215.08fdc1b6.js"><link rel="prefetch" href="/FrontEnd/assets/js/216.865762b9.js"><link rel="prefetch" href="/FrontEnd/assets/js/217.583b144c.js"><link rel="prefetch" href="/FrontEnd/assets/js/218.42f4f126.js"><link rel="prefetch" href="/FrontEnd/assets/js/219.5b4e5ace.js"><link rel="prefetch" href="/FrontEnd/assets/js/22.41e2387b.js"><link rel="prefetch" href="/FrontEnd/assets/js/220.ba3f4bf4.js"><link rel="prefetch" href="/FrontEnd/assets/js/221.55a48a9f.js"><link rel="prefetch" href="/FrontEnd/assets/js/222.5fdc885b.js"><link rel="prefetch" href="/FrontEnd/assets/js/223.29121289.js"><link rel="prefetch" href="/FrontEnd/assets/js/224.cd2a7f56.js"><link rel="prefetch" href="/FrontEnd/assets/js/225.026d6e28.js"><link rel="prefetch" href="/FrontEnd/assets/js/226.450d6bec.js"><link rel="prefetch" href="/FrontEnd/assets/js/227.ae0bdb98.js"><link rel="prefetch" href="/FrontEnd/assets/js/228.e5924eb9.js"><link rel="prefetch" href="/FrontEnd/assets/js/229.fa03f887.js"><link rel="prefetch" href="/FrontEnd/assets/js/23.73e7a1a3.js"><link rel="prefetch" href="/FrontEnd/assets/js/230.c6833883.js"><link rel="prefetch" href="/FrontEnd/assets/js/231.cbd71f56.js"><link rel="prefetch" href="/FrontEnd/assets/js/232.13924592.js"><link rel="prefetch" href="/FrontEnd/assets/js/233.b1aff10e.js"><link rel="prefetch" href="/FrontEnd/assets/js/234.91a0231c.js"><link rel="prefetch" href="/FrontEnd/assets/js/235.7f195ae5.js"><link rel="prefetch" href="/FrontEnd/assets/js/236.c3ec941d.js"><link rel="prefetch" href="/FrontEnd/assets/js/237.3345ba8a.js"><link rel="prefetch" href="/FrontEnd/assets/js/238.0f8ea657.js"><link rel="prefetch" href="/FrontEnd/assets/js/239.0dbcd6a7.js"><link rel="prefetch" href="/FrontEnd/assets/js/24.213d04bf.js"><link rel="prefetch" href="/FrontEnd/assets/js/240.7f9ad595.js"><link rel="prefetch" href="/FrontEnd/assets/js/241.20b9ba8f.js"><link rel="prefetch" href="/FrontEnd/assets/js/242.b4c327ca.js"><link rel="prefetch" href="/FrontEnd/assets/js/243.95bf1aa9.js"><link rel="prefetch" href="/FrontEnd/assets/js/244.96b43268.js"><link rel="prefetch" href="/FrontEnd/assets/js/245.fa80e3e4.js"><link rel="prefetch" href="/FrontEnd/assets/js/246.b15c79af.js"><link rel="prefetch" href="/FrontEnd/assets/js/247.50a0a96e.js"><link rel="prefetch" href="/FrontEnd/assets/js/248.ff578d6d.js"><link rel="prefetch" href="/FrontEnd/assets/js/249.ed42ee76.js"><link rel="prefetch" href="/FrontEnd/assets/js/25.df70c084.js"><link rel="prefetch" href="/FrontEnd/assets/js/250.0f24f871.js"><link rel="prefetch" href="/FrontEnd/assets/js/251.ebefccdb.js"><link rel="prefetch" href="/FrontEnd/assets/js/252.528846d6.js"><link rel="prefetch" href="/FrontEnd/assets/js/253.ad2d2aae.js"><link rel="prefetch" href="/FrontEnd/assets/js/254.57053003.js"><link rel="prefetch" href="/FrontEnd/assets/js/255.89fa253b.js"><link rel="prefetch" href="/FrontEnd/assets/js/256.08e4da08.js"><link rel="prefetch" href="/FrontEnd/assets/js/257.c3f3903f.js"><link rel="prefetch" href="/FrontEnd/assets/js/258.577cf4d5.js"><link rel="prefetch" href="/FrontEnd/assets/js/259.56d5f8d3.js"><link rel="prefetch" href="/FrontEnd/assets/js/26.c588677b.js"><link rel="prefetch" href="/FrontEnd/assets/js/260.3b5ea6b8.js"><link rel="prefetch" href="/FrontEnd/assets/js/261.14bfb0f3.js"><link rel="prefetch" href="/FrontEnd/assets/js/262.069cc2ef.js"><link rel="prefetch" href="/FrontEnd/assets/js/263.98a67524.js"><link rel="prefetch" href="/FrontEnd/assets/js/264.41bc1429.js"><link rel="prefetch" href="/FrontEnd/assets/js/265.3527f0c7.js"><link rel="prefetch" href="/FrontEnd/assets/js/266.bd367c83.js"><link rel="prefetch" href="/FrontEnd/assets/js/267.58470c95.js"><link rel="prefetch" href="/FrontEnd/assets/js/268.bbb72cd8.js"><link rel="prefetch" href="/FrontEnd/assets/js/269.a55795d0.js"><link rel="prefetch" href="/FrontEnd/assets/js/27.b168186b.js"><link rel="prefetch" href="/FrontEnd/assets/js/270.a2992e08.js"><link rel="prefetch" href="/FrontEnd/assets/js/271.d970cbb9.js"><link rel="prefetch" href="/FrontEnd/assets/js/272.9f6d2e43.js"><link rel="prefetch" href="/FrontEnd/assets/js/273.1990c15b.js"><link rel="prefetch" href="/FrontEnd/assets/js/274.e503f261.js"><link rel="prefetch" href="/FrontEnd/assets/js/275.16cc4a8b.js"><link rel="prefetch" href="/FrontEnd/assets/js/276.50da8dba.js"><link rel="prefetch" href="/FrontEnd/assets/js/277.468fd0bc.js"><link rel="prefetch" href="/FrontEnd/assets/js/278.b68a8f45.js"><link rel="prefetch" href="/FrontEnd/assets/js/279.ec057895.js"><link rel="prefetch" href="/FrontEnd/assets/js/28.8d6ee217.js"><link rel="prefetch" href="/FrontEnd/assets/js/280.91e06ef8.js"><link rel="prefetch" href="/FrontEnd/assets/js/281.f9c72f11.js"><link rel="prefetch" href="/FrontEnd/assets/js/282.8e1c68b6.js"><link rel="prefetch" href="/FrontEnd/assets/js/283.d095d1f9.js"><link rel="prefetch" href="/FrontEnd/assets/js/284.9e3d791c.js"><link rel="prefetch" href="/FrontEnd/assets/js/285.0012ebc9.js"><link rel="prefetch" href="/FrontEnd/assets/js/286.bf778e15.js"><link rel="prefetch" href="/FrontEnd/assets/js/287.5a5e5f24.js"><link rel="prefetch" href="/FrontEnd/assets/js/288.b5e40e81.js"><link rel="prefetch" href="/FrontEnd/assets/js/289.ddd78bb4.js"><link rel="prefetch" href="/FrontEnd/assets/js/29.f36ce031.js"><link rel="prefetch" href="/FrontEnd/assets/js/290.0998c9ab.js"><link rel="prefetch" href="/FrontEnd/assets/js/291.49f8f7b2.js"><link rel="prefetch" href="/FrontEnd/assets/js/292.ec4986f0.js"><link rel="prefetch" href="/FrontEnd/assets/js/293.e877958a.js"><link rel="prefetch" href="/FrontEnd/assets/js/294.714858e6.js"><link rel="prefetch" href="/FrontEnd/assets/js/295.5004d6a5.js"><link rel="prefetch" href="/FrontEnd/assets/js/296.d0c72e6e.js"><link rel="prefetch" href="/FrontEnd/assets/js/297.81980b16.js"><link rel="prefetch" href="/FrontEnd/assets/js/298.21f893a3.js"><link rel="prefetch" href="/FrontEnd/assets/js/299.7feeae98.js"><link rel="prefetch" href="/FrontEnd/assets/js/3.f93c2d81.js"><link rel="prefetch" href="/FrontEnd/assets/js/30.ec08a321.js"><link rel="prefetch" href="/FrontEnd/assets/js/300.135000d0.js"><link rel="prefetch" href="/FrontEnd/assets/js/301.047e696c.js"><link rel="prefetch" href="/FrontEnd/assets/js/302.d0d328ee.js"><link rel="prefetch" href="/FrontEnd/assets/js/31.696f78b8.js"><link rel="prefetch" href="/FrontEnd/assets/js/32.29ea628e.js"><link rel="prefetch" href="/FrontEnd/assets/js/33.9ebb12b2.js"><link rel="prefetch" href="/FrontEnd/assets/js/34.c3fd56f7.js"><link rel="prefetch" href="/FrontEnd/assets/js/35.ca8dc66f.js"><link rel="prefetch" href="/FrontEnd/assets/js/36.2cef2d54.js"><link rel="prefetch" href="/FrontEnd/assets/js/37.2e826aac.js"><link rel="prefetch" href="/FrontEnd/assets/js/38.fb41bacb.js"><link rel="prefetch" href="/FrontEnd/assets/js/39.c3bcf058.js"><link rel="prefetch" href="/FrontEnd/assets/js/4.a5498e9e.js"><link rel="prefetch" href="/FrontEnd/assets/js/40.04c345e1.js"><link rel="prefetch" href="/FrontEnd/assets/js/41.fc97fa69.js"><link rel="prefetch" href="/FrontEnd/assets/js/42.8bd3fcdb.js"><link rel="prefetch" href="/FrontEnd/assets/js/43.dd5940f4.js"><link rel="prefetch" href="/FrontEnd/assets/js/44.b9da8da7.js"><link rel="prefetch" href="/FrontEnd/assets/js/45.ccc78901.js"><link rel="prefetch" href="/FrontEnd/assets/js/46.7e76d5d2.js"><link rel="prefetch" href="/FrontEnd/assets/js/47.4ab0f59b.js"><link rel="prefetch" href="/FrontEnd/assets/js/48.739caa88.js"><link rel="prefetch" href="/FrontEnd/assets/js/49.6ccc900e.js"><link rel="prefetch" href="/FrontEnd/assets/js/5.a537d9f8.js"><link rel="prefetch" href="/FrontEnd/assets/js/50.1d03cf0b.js"><link rel="prefetch" href="/FrontEnd/assets/js/51.ef56ba0d.js"><link rel="prefetch" href="/FrontEnd/assets/js/52.d7282fc4.js"><link rel="prefetch" href="/FrontEnd/assets/js/53.ed2861b8.js"><link rel="prefetch" href="/FrontEnd/assets/js/54.00fae015.js"><link rel="prefetch" href="/FrontEnd/assets/js/55.e5be822d.js"><link rel="prefetch" href="/FrontEnd/assets/js/56.91e081b2.js"><link rel="prefetch" href="/FrontEnd/assets/js/57.134254a8.js"><link rel="prefetch" href="/FrontEnd/assets/js/58.399a8a51.js"><link rel="prefetch" href="/FrontEnd/assets/js/59.50e0e0ff.js"><link rel="prefetch" href="/FrontEnd/assets/js/6.177eb86d.js"><link rel="prefetch" href="/FrontEnd/assets/js/60.7f8645c3.js"><link rel="prefetch" href="/FrontEnd/assets/js/61.8903f337.js"><link rel="prefetch" href="/FrontEnd/assets/js/62.0b27f368.js"><link rel="prefetch" href="/FrontEnd/assets/js/63.bdfaf1ff.js"><link rel="prefetch" href="/FrontEnd/assets/js/64.9c37c445.js"><link rel="prefetch" href="/FrontEnd/assets/js/65.a1bc3060.js"><link rel="prefetch" href="/FrontEnd/assets/js/66.cf600787.js"><link rel="prefetch" href="/FrontEnd/assets/js/67.51aa860f.js"><link rel="prefetch" href="/FrontEnd/assets/js/68.8dc57fc6.js"><link rel="prefetch" href="/FrontEnd/assets/js/69.741b466c.js"><link rel="prefetch" href="/FrontEnd/assets/js/7.e9c92e1a.js"><link rel="prefetch" href="/FrontEnd/assets/js/70.a853b797.js"><link rel="prefetch" href="/FrontEnd/assets/js/71.a9190713.js"><link rel="prefetch" href="/FrontEnd/assets/js/72.f43c16d8.js"><link rel="prefetch" href="/FrontEnd/assets/js/73.9982ae39.js"><link rel="prefetch" href="/FrontEnd/assets/js/74.675ebf9b.js"><link rel="prefetch" href="/FrontEnd/assets/js/75.4c38ff52.js"><link rel="prefetch" href="/FrontEnd/assets/js/76.66b3ee8c.js"><link rel="prefetch" href="/FrontEnd/assets/js/77.effa36b3.js"><link rel="prefetch" href="/FrontEnd/assets/js/78.1504c4f0.js"><link rel="prefetch" href="/FrontEnd/assets/js/79.8bcf57b3.js"><link rel="prefetch" href="/FrontEnd/assets/js/80.e672a922.js"><link rel="prefetch" href="/FrontEnd/assets/js/81.baa40e63.js"><link rel="prefetch" href="/FrontEnd/assets/js/82.97b49f0c.js"><link rel="prefetch" href="/FrontEnd/assets/js/83.0d8848e9.js"><link rel="prefetch" href="/FrontEnd/assets/js/84.d00dc0ec.js"><link rel="prefetch" href="/FrontEnd/assets/js/85.7ebe5bdc.js"><link rel="prefetch" href="/FrontEnd/assets/js/86.a8a53cc8.js"><link rel="prefetch" href="/FrontEnd/assets/js/87.a6bf1cd1.js"><link rel="prefetch" href="/FrontEnd/assets/js/88.93416d2d.js"><link rel="prefetch" href="/FrontEnd/assets/js/89.9b2bc024.js"><link rel="prefetch" href="/FrontEnd/assets/js/90.06635332.js"><link rel="prefetch" href="/FrontEnd/assets/js/91.3a79ce27.js"><link rel="prefetch" href="/FrontEnd/assets/js/92.6071e8da.js"><link rel="prefetch" href="/FrontEnd/assets/js/93.7e0bb6d9.js"><link rel="prefetch" href="/FrontEnd/assets/js/94.4872a4c9.js"><link rel="prefetch" href="/FrontEnd/assets/js/95.abd933c2.js"><link rel="prefetch" href="/FrontEnd/assets/js/96.94f8de2b.js"><link rel="prefetch" href="/FrontEnd/assets/js/97.6c82e704.js"><link rel="prefetch" href="/FrontEnd/assets/js/98.17b6df4e.js"><link rel="prefetch" href="/FrontEnd/assets/js/99.df44a385.js"><link rel="prefetch" href="/FrontEnd/assets/js/vendors~docsearch.162bdabc.js">
    <link rel="stylesheet" href="/FrontEnd/assets/css/0.styles.4f2b0bb5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/FrontEnd/" class="home-link router-link-active"><!----> <span class="site-name">Rowan Liu's Tech</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/FrontEnd/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Blog" class="dropdown-title"><span class="title">Blog</span> <span class="arrow down"></span></button> <button type="button" aria-label="Blog" class="mobile-dropdown-title"><span class="title">Blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/FrontEnd/blog/translate/" class="nav-link router-link-active">
  翻译
</a></li><li class="dropdown-item"><!----> <a href="/FrontEnd/blog/dataStructure/" class="nav-link">
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/FrontEnd/blog/design-pattern/" class="nav-link">
  设计模式
</a></li></ul></div></div><div class="nav-item"><a href="/FrontEnd/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/FrontEnd/js/" class="nav-link">
  JS
</a></div><div class="nav-item"><a href="/FrontEnd/lib/" class="nav-link">
  lib
</a></div><div class="nav-item"><a href="/FrontEnd/read/" class="nav-link">
  Read
</a></div><div class="nav-item"><a href="https://rowanliu.com/about" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/FrontEnd/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Blog" class="dropdown-title"><span class="title">Blog</span> <span class="arrow down"></span></button> <button type="button" aria-label="Blog" class="mobile-dropdown-title"><span class="title">Blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/FrontEnd/blog/translate/" class="nav-link router-link-active">
  翻译
</a></li><li class="dropdown-item"><!----> <a href="/FrontEnd/blog/dataStructure/" class="nav-link">
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/FrontEnd/blog/design-pattern/" class="nav-link">
  设计模式
</a></li></ul></div></div><div class="nav-item"><a href="/FrontEnd/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/FrontEnd/js/" class="nav-link">
  JS
</a></div><div class="nav-item"><a href="/FrontEnd/lib/" class="nav-link">
  lib
</a></div><div class="nav-item"><a href="/FrontEnd/read/" class="nav-link">
  Read
</a></div><div class="nav-item"><a href="https://rowanliu.com/about" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/FrontEnd/blog/" aria-current="page" class="sidebar-link">在专精的路上走的一发不可收拾</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>生活有感</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FrontEnd/blog/life/lerna.html" class="sidebar-link">lerna</a></li><li><a href="/FrontEnd/blog/life/jQuery.html" class="sidebar-link">jQuery实践</a></li><li><a href="/FrontEnd/blog/life/gzip.html" class="sidebar-link">gzip</a></li><li><a href="/FrontEnd/blog/life/2018-dev-guide.html" class="sidebar-link">2018 Web开发,实用指南</a></li><li><a href="/FrontEnd/blog/life/for.html" class="sidebar-link">for 追求</a></li><li><a href="/FrontEnd/blog/life/ci.html" class="sidebar-link">Travis CI</a></li><li><a href="/FrontEnd/blog/life/useGulp.html" class="sidebar-link">前端基础设施(gulp)</a></li><li><a href="/FrontEnd/blog/life/FrontEndLive.html" class="sidebar-link">知乎Live--前端工程师的职业规划</a></li><li><a href="/FrontEnd/blog/life/architecture.html" class="sidebar-link">前端架构演进</a></li><li><a href="/FrontEnd/blog/life/vueComponent.html" class="sidebar-link">组件的重写</a></li><li><a href="/FrontEnd/blog/life/vue-cli2-to-vue-cli3.html" class="sidebar-link">vue-cli2 to vue-cli3</a></li><li><a href="/FrontEnd/blog/life/vue3.html" class="sidebar-link">vue3</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>翻译</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FrontEnd/blog/translate/" aria-current="page" class="sidebar-link">开篇</a></li><li><a href="/FrontEnd/blog/translate/Top 10 ways to use Interceptors in Angular.html" class="sidebar-link">[译]在 Angular 中使用拦截器的方式 Top 10</a></li><li><a href="/FrontEnd/blog/translate/what-you-need-know-about-Vue-3-in-2020.html" class="sidebar-link">2020年关于 Vue 3 你需要知道的事</a></li><li><a href="/FrontEnd/blog/translate/core-js@3, babel and a look into the future.html" class="active sidebar-link">core-js@3, babel展望未来</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FrontEnd/blog/translate/core-js@3, babel and a look into the future.html#贡献" class="sidebar-link">贡献</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/blog/translate/core-js@3, babel and a look into the future.html#core-js-3有哪些变化" class="sidebar-link">core-js@3有哪些变化？</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/blog/translate/core-js@3, babel and a look into the future.html#babel" class="sidebar-link">Babel</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/blog/translate/core-js@3, babel and a look into the future.html#畅享未来" class="sidebar-link">畅享未来</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/blog/translate/core-js@3, babel and a look into the future.html#可能用到的资料" class="sidebar-link">可能用到的资料</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/blog/translate/core-js@3, babel and a look into the future.html#感谢阅读" class="sidebar-link">感谢阅读</a></li></ul></li><li><a href="/FrontEnd/blog/translate/vue-cli-plugin-dev.html" class="sidebar-link">Vue CLI 插件开发指南</a></li><li><a href="/FrontEnd/blog/translate/vue-cli-plugin-typescript-readme.html" class="sidebar-link">@vue/cli-plugin-typescript README</a></li><li><a href="/FrontEnd/blog/translate/vue-cli-plugin-eslint-readme.html" class="sidebar-link">@vue/cli-plugin-eslint</a></li><li><a href="/FrontEnd/blog/translate/making-vue-3.html" class="sidebar-link">Vue 3 的开发进展</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>那些年我面过的试</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FrontEnd/blog/interview/" class="sidebar-link">开篇</a></li><li><a href="/FrontEnd/blog/interview/js.html" class="sidebar-link">JavaScript</a></li><li><a href="/FrontEnd/blog/interview/css.html" class="sidebar-link">css</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>数据结构</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FrontEnd/blog/dataStructure/" class="sidebar-link">排序</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>设计模式</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FrontEnd/blog/design-pattern/" class="sidebar-link">开篇</a></li><li><a href="/FrontEnd/blog/design-pattern/OOP.html" class="sidebar-link">OOP</a></li><li><a href="/FrontEnd/blog/design-pattern/validateForm.html" class="sidebar-link">表单验证</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="core-js-3-babel展望未来"><a href="#core-js-3-babel展望未来" class="header-anchor">#</a> core-js@3, babel展望未来</h1> <blockquote><p><a href="https://github.com/zloirock/core-js/blob/master/docs/2019-03-19-core-js-3-babel-and-a-look-into-the-future.md" target="_blank" rel="noopener noreferrer">https://github.com/zloirock/core-js/blob/master/docs/2019-03-19-core-js-3-babel-and-a-look-into-the-future.md<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 原文链接</p></blockquote> <p>经过一年半的开发，数十个版本，许多不眠之夜，<strong><a href="https://github.com/zloirock/core-js" target="_blank" rel="noopener noreferrer"><code>core-js@3</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong> 终于发布了。这是 <code>core-js</code> 和 <strong><a href="https://babeljs.io/" target="_blank" rel="noopener noreferrer">babel<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong> 补丁相关的功能的最大的一次变化。</p> <p>什么是 <code>core-js</code>?</p> <ul><li>它是JavaScript标准库的 polyfill，它支持
<ul><li>最新的 <a href="https://en.wikipedia.org/wiki/ECMAScript" target="_blank" rel="noopener noreferrer">ECMAScript<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 标准</li> <li>ECMAScript 标准库提案</li> <li>一些 <a href="https://en.wikipedia.org/wiki/WHATWG" target="_blank" rel="noopener noreferrer">WHATGW<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>  / <a href="https://en.wikipedia.org/wiki/World_Wide_Web_Consortium" target="_blank" rel="noopener noreferrer">W3C<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 标准（跨平台或者 ECMAScript 相关）</li></ul></li> <li>它最大限度的模块化：你能仅仅加载你想要使用的功能</li> <li>它能够不污染全局命名空间</li> <li>它<a href="https://github.com/zloirock/core-js/blob/master/docs/2019-03-19-core-js-3-babel-and-a-look-into-the-future.md#Babel" target="_blank" rel="noopener noreferrer">和babel紧密集成<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：这能够优化<code>core-js</code>的导入</li></ul> <p>它是最普遍、<a href="https://www.npmtrends.com/core-js-vs-es5-shim-vs-es6-shim-vs-airbnb-js-shims-vs-polyfill-library-vs-polyfill-service-vs-js-polyfills" target="_blank" rel="noopener noreferrer">最流行<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>给 JavaScript 标准库打补丁的方式，但是有很大一部分开发者并不知道他们间接的使用了<code>core-js</code>🙂</p> <h2 id="贡献"><a href="#贡献" class="header-anchor">#</a> 贡献</h2> <p><code>core-js</code> 是我自己爱好的项目，没有给我带来任何利润。它花了我很长的时间，真的很昂贵：为了完成 <code>core-js@3</code>，我在几个月之前已经离开我的工作。这个项目对许多人和公司起到了促进作用。因为这些，筹集资金去支持 <code>core-js</code> 的维护是说得通的。</p> <p>如果你对 <code>core-js</code> 感兴趣或者在你每天的工作中有使用到，你可以在 <a href="https://opencollective.com/core-js#sponsor" target="_blank" rel="noopener noreferrer">Open Collective<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 或者 <a href="https://www.patreon.com/zloirock" target="_blank" rel="noopener noreferrer">Patreon<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 成为赞助者。</p> <p>你可以给<a href="http://zloirock.ru/" target="_blank" rel="noopener noreferrer">我<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>提供一个好的工作，和我现在做的相关的。</p> <p>或者你可以以另一种方式贡献，你可以帮助去改进代码、测试或者文档（现在，<code>core-js</code> 的文档还很糟糕！）。</p> <h2 id="core-js-3有哪些变化"><a href="#core-js-3有哪些变化" class="header-anchor">#</a> <code>core-js@3</code>有哪些变化？</h2> <h3 id="javascript-标准库中变化的内容"><a href="#javascript-标准库中变化的内容" class="header-anchor">#</a> JavaScript 标准库中变化的内容</h3> <p>由于以下两个原因，这个版本包含丰富的、新的 JavaScript 补丁：</p> <ul><li><code>core-js</code> 只在 major（主）版本更新时才有 break changes，即使需要和提案的内容对齐。</li> <li><code>core-js@2</code> 在一年半前已经进入功能冻结阶段了；所有新的功能只能够添加到 <code>core-js@3</code> 这个分支。</li></ul> <h4 id="稳定的-ecmascript-功能"><a href="#稳定的-ecmascript-功能" class="header-anchor">#</a> 稳定的 ECMAScript 功能</h4> <p>稳定的 ECMAScript 功能在 <code>core-js</code> 中已经几乎完全支持有很长一段时间了，除此之外，<code>core-js@3</code> 引进了一些新功能：</p> <ul><li>增加支持 ECMAScript 2015 引入的两个知名标志 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/isConcatSpreadable" target="_blank" rel="noopener noreferrer"><code>@@isConcatSpreadable</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/species" target="_blank" rel="noopener noreferrer"><code>@@species</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，给所有使用他们的方法。</li> <li>增加来自 ECMAScript 2018 的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat" target="_blank" rel="noopener noreferrer"><code>Array.prototype.flat</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap" target="_blank" rel="noopener noreferrer"><code>Array.prototype.flatMap</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（ <code>core-js@2</code> 针对 <code>Array.prototype.flatten</code> 这个老版本的提案提供了补丁）。</li> <li>增加来自 ECMAScript 2019 的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries" target="_blank" rel="noopener noreferrer"><code>Object.fromEntries</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 方法</li> <li>增加来自 ECMAScript 2019 的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/description" target="_blank" rel="noopener noreferrer"><code>Symbol.prototype.description</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 访问器</li></ul> <p>一些在 ES2016-ES2019 中作为提案被接受且已经使用很长时间的功能，现在被标记为稳定：</p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes" target="_blank" rel="noopener noreferrer"><code>Array.prototype.includes</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/includes" target="_blank" rel="noopener noreferrer"><code>TypedArray.prototype.includes</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 方法（ ESMAScript 2016 ）</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values" target="_blank" rel="noopener noreferrer"><code>Object.values</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries" target="_blank" rel="noopener noreferrer"><code>Object.entries</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 方法( ECMAScript 2017 )</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptors" target="_blank" rel="noopener noreferrer"><code>Object.getOwnPropertyDescriptors</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 方法 ( ECMAScript 2017 )</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padStart" target="_blank" rel="noopener noreferrer"><code>String.prototype.padStart</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd" target="_blank" rel="noopener noreferrer"><code>String.prototype.padEnd</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 方法（ ECMAScript 2017 ）</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/finally" target="_blank" rel="noopener noreferrer"><code>Promise.prototype.finally</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 方法（ ECMAScript 2018 ）</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/asyncIterator" target="_blank" rel="noopener noreferrer"><code>Symbol.asyncIterator</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 知名标志（ ECMAScript 2018 ）</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/__defineGetter__" target="_blank" rel="noopener noreferrer"><code>Object.prototype.__define(Getter|Setter)__</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/__lookupGetter__" target="_blank" rel="noopener noreferrer"><code>Object.prototype.__lookup(Getter|Setter)__</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 方法（ ECMAScript 2018 ）</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trimStart" target="_blank" rel="noopener noreferrer"><code>String.prototype.trim(Start|End|Left|Right)</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 方法（ ECMAScript 2019 ）</li></ul> <p>修复了针对浏览器的许多问题，例如，<a href="https://bugs.webkit.org/show_bug.cgi?id=188794" target="_blank" rel="noopener noreferrer">Safari 12.0 <code>Array.prototype.reverse</code> bug<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 已经被修复了。</p> <h4 id="ecmascript-提案"><a href="#ecmascript-提案" class="header-anchor">#</a> ECMAScript 提案</h4> <p>除了上文提到的支持内容，<code>core-js@3</code> 现在还支持下面的 ECMAScript 提案：</p> <ul><li><a href="https://github.com/tc39/proposal-global" target="_blank" rel="noopener noreferrer"><code>globalThis</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> stage 3（ 现在是 stage 4 ）的提案 - 之前，已经有了 <code>global</code> 和 <code>System.global</code></li> <li><a href="https://github.com/tc39/proposal-promise-allSettled" target="_blank" rel="noopener noreferrer"><code>Promise.allSettled</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> stage 2（ 现在是 stage 4 ）提案</li> <li><a href="https://github.com/tc39/proposal-set-methods" target="_blank" rel="noopener noreferrer">新 <code>Set</code> 方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> stage 2 提案：
<ul><li>Set.prototype.difference</li> <li>Set.prototype.intersection</li> <li>Set.prototype.isDisjoinFrom</li> <li>Set.prototype.isSubsetOf</li> <li>Set.prototype.isSupersetOf</li> <li>Set.prototype.symmetricDifference</li> <li>Set.prototype.union</li></ul></li> <li><a href="https://github.com/tc39/proposal-collection-methods" target="_blank" rel="noopener noreferrer">新 collections 方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> stage 1 提案，包函许多新的有用的方法：
<ul><li>Map.groupBy</li> <li>Map.keyBy</li> <li>Map.prototype.deleteAll</li> <li>Map.prototype.every</li> <li>Map.prototype.filter</li> <li>Map.prototype.find</li> <li>Map.prototype.findKey</li> <li>Map.prototype.includes</li> <li>Map.prototype.keyOf</li> <li>Map.prototype.mapKeys</li> <li>Map.prototype.mapValues</li> <li>Map.prototype.merge</li> <li>Map.prototype.reduce</li> <li>Map.prototype.some</li> <li>Map.prototype.update</li> <li>Set.prototype.addAll</li> <li>Set.prototype.deleteAll</li> <li>Set.prototype.every</li> <li>Set.prototype.filter</li> <li>Set.prototype.find</li> <li>Set.prototype.join</li> <li>Set.prototype.map</li> <li>Set.prototype.reduce</li> <li>Set.prototype.some</li> <li>WeakMap.prototype.deleteAll</li> <li>WeakSet.prototype.addAll</li> <li>WeakSet.prototype.deleteAll</li></ul></li> <li><a href="https://github.com/tc39/proposal-string-replace-all" target="_blank" rel="noopener noreferrer"><code>String.prototype.replaceAll</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> stage 1（ 现在是 stage 3 ） 提案</li> <li><a href="https://github.com/tc39/proposal-string-prototype-codepoints" target="_blank" rel="noopener noreferrer"><code>String.prototype.codePoints</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> stage 1 提案</li> <li><a href="https://github.com/tc39-transfer/proposal-array-last" target="_blank" rel="noopener noreferrer"><code>Array.prototype.last(Item|Index)</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> stage 1 提案</li> <li><a href="https://github.com/bmeck/proposal-richer-keys/tree/master/compositeKey" target="_blank" rel="noopener noreferrer"><code>compositeKey</code> 和 <code>compositeSymbol</code> 方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> stage 1 提案</li> <li><a href="https://github.com/tc39/proposal-number-fromstring" target="_blank" rel="noopener noreferrer"><code>Number.fromString</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> stage 1 提案</li> <li><a href="https://github.com/tc39/proposal-seeded-random" target="_blank" rel="noopener noreferrer"><code>Math.seededPRNG</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> stage 1 提案</li> <li><a href="https://github.com/tc39/proposal-promise-any" target="_blank" rel="noopener noreferrer"><code>Promise.any</code> (合并的错误)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> stage 0（ 现在是stage 3 ）提案</li></ul> <p>一些提案的变化很大，<code>core-js</code> 也将相应的更新：</p> <ul><li><a href="https://github.com/tc39/proposal-string-matchall" target="_blank" rel="noopener noreferrer"><code>String.prototype.matchAll</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> stage 3 提案</li> <li><a href="https://github.com/tc39/proposal-observable" target="_blank" rel="noopener noreferrer">Observable<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> stage 1 提案</li></ul> <h4 id="web-标准"><a href="#web-标准" class="header-anchor">#</a> web 标准</h4> <p>许多有用的功能被添加到这个类别中。</p> <p>最重要的一个是 <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL" target="_blank" rel="noopener noreferrer"><code>URL</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams" target="_blank" rel="noopener noreferrer"><code>URLSearchParams</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。他是<a href="https://github.com/zloirock/core-js/issues/117" target="_blank" rel="noopener noreferrer">最受欢迎的功能请求之一<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。增加 <code>URL</code> 和 <code>URLSearchParams</code>，并保证他们最大限度的符合规范，保持源代码足够紧凑来支撑任何环境是 <code>core-js@3</code> 开发中<a href="https://github.com/zloirock/core-js/pull/454/files" target="_blank" rel="noopener noreferrer">最困难的任务之一<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p><code>core-js@3</code> 包函在JavaScript中创建微任务（ microtask ）的标准方法：<a href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#microtask-queuing" target="_blank" rel="noopener noreferrer"><code>queueMicrotask</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 。<code>core-js@2</code> 提供了  <code>asap</code> 函数，提供了同样功能的老的提案。<code>queueMicrotask</code> 被定义在 HTML 标准中，它已经能够在现代浏览器比如 Chromium 或者 NodeJS 中使用。</p> <p>另一个受欢迎的功能请求是支持 <a href="https://developer.mozilla.org/en-US/docs/Web/API/NodeList/forEach" target="_blank" rel="noopener noreferrer">DOM集合的 <code>.forEach</code> 方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。由于 <code>core-js</code> 已经针对DOM集合迭代器做了polyfill，为什么不给 <code>节点列表</code> 和 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/DOMTokenList" target="_blank" rel="noopener noreferrer"><code>DOMTokenList</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 也增加 <code>.forEach</code> 呢？</p> <h4 id="移除过时的功能"><a href="#移除过时的功能" class="header-anchor">#</a> 移除过时的功能：</h4> <ul><li><code>Reflect.enumrate</code> 因为他已经从标准中移除了</li> <li><code>System.global</code> 和 <code>global</code> 现在他们已经被 <code>globalThis</code> 代替</li> <li><code>Array.prototype.flatten</code> 现在被 <code>Array.prototype.flat</code> 代替</li> <li><code>asap</code> 被 <code>queueMicrotask</code> 代替</li> <li><code>Error.isError</code> 被撤销很长时间了</li> <li><code>RegExp.escape</code> 很久之前被拒绝了</li> <li><code>Map.prototype.toJSON</code> 和 <code>Set.prototype.toJSON</code> 也是很久前被拒绝了</li> <li>不必要并且被错误添加的迭代器方法：<code>CSSRuleList</code>，<code>MediaList</code>，<code>StyleSheetList</code>。</li></ul> <h4 id="不再有非标准、非提案的功能"><a href="#不再有非标准、非提案的功能" class="header-anchor">#</a> 不再有非标准、非提案的功能</h4> <p>许多年前，我开始写一个库，他是我的JavaScript程序的核心：这个库包函 polyfills 和一些我需要的工具函数。一段时间后，这个库以 <code>core-js</code> 命名发布。我认为现在大多数 <code>core-js</code> 用户不需要非标准的 <code>core-js</code> 功能，他们大多已经在早期版本移除了，现在是时候将剩余部分从 <code>core-js</code> 中移除。从这个版本开始，<code>core-js</code> 可以被称为  polyfill 了。</p> <h3 id="包、入口和模块名字"><a href="#包、入口和模块名字" class="header-anchor">#</a> 包、入口和模块名字</h3> <p>一个issue里提了 <code>core-js</code> 包的很大（ ~2MB ），有很多重复文件。因为这个原因，<code>core-js</code> 分成了3个包：</p> <ul><li><a href="https://www.npmjs.com/package/core-js" target="_blank" rel="noopener noreferrer"><code>core-js</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 定义全局的 polyfills。（ ~500KB，<a href="https://bundlephobia.com/result?p=core-js@3.0.0-beta.20" target="_blank" rel="noopener noreferrer">压缩并且 gzipped 处理后 40KB<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ）</li> <li><a href="https://www.npmjs.com/package/core-js-pure" target="_blank" rel="noopener noreferrer"><code>core-js-pure</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，提供了不污染全局变量的 polyfills。它和 <code>core-js@2</code> 中的 <code>core-js/library</code> 相当。（~440KB）</li> <li><a href="https://www.npmjs.com/package/core-js-bundle" target="_blank" rel="noopener noreferrer"><code>core-js-bundle</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：定义了全局填充的打包版本</li></ul> <p><code>core-js</code> 的早期版本中，稳定的 ECMAScript 功能和 ECMAScript 提案的 polyfill 模块化需要分别加 <code>es6.</code> 和 <code>es7.</code> 前缀。这是在 2014 年做的决定，那时将 ES6 之后的所有功能都视为 ES7。在 <code>core-js@3</code> 中所有稳定的 ECMAScript 功能都增加 <code>es.</code> 前缀，ECMAScript 提案增加 <code>esnext.</code> 前缀。</p> <p>几乎所有的 CommonJS 入口都改变了。<code>core-js@3</code> 相比于 <code>core-js@2</code> 有更多的入口：这带来的最大限度的灵活性，使你能够仅仅引入你的应用需要的依赖。</p> <p>这里是一些例子关于如何使用新的入口：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 使用 `core-js` 全部功能打补丁：</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 仅仅使用稳定的 `core-js` 功能 - ES 和 web 标准：</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/stable&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 仅仅使用稳定的 ES 功能</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/es&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 如果你想用 `Set` 的补丁</span>
<span class="token comment">// 所有 `Set`- ES 提案中，相关的功能：</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/features/set&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 稳定的 `Set` ES 功能和来自web标准的功能</span>
<span class="token comment">// （DOM 集合迭代器）</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/stable/set&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 只有 `Set` 所需的稳定的 ES 功能</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/es/set&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 与上面一致，但不会污染全局命名空间</span>
<span class="token keyword">import</span> Set <span class="token keyword">from</span> <span class="token string">&quot;core-js-pure/features/set&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Set <span class="token keyword">from</span> <span class="token string">&quot;core-js-pure/stable/set&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Set <span class="token keyword">from</span> <span class="token string">&quot;core-js-pure/es/set&quot;</span><span class="token punctuation">;</span>


<span class="token comment">// 仅仅为需要的方法打补丁</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/feature/set/intersection&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/stable/queque-microtask&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/es/array/from&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 为 reflect metadata 提案打补丁</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/proposals/reflect-metadata&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 为所有 stage 2+ 的提案打补丁</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/stage/2&quot;</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="其他重要的变化"><a href="#其他重要的变化" class="header-anchor">#</a> 其他重要的变化</h3> <p><code>core-js</code> polyfill 能够 <a href="https://github.com/zloirock/core-js/blob/master/README.md#configurable-level-of-aggressiveness" target="_blank" rel="noopener noreferrer">配置侵入等级<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。如果你认为有些情境 <code>core-js</code> 功能检测侵入性太强，原生实现对你来说已经足够，或者一个错误的实现没有被 <code>core-js</code> 检测到，你可以修改 <code>core-js</code> 的默认行为。</p> <p>如果无法安装规范的每个细节实现某个功能，<code>core-js</code> 增加了一个 <code>.sham</code> 属性，例如，IE11中 <code>Symbol.sham</code> 是 <code>true</code>。</p> <p>不再有 LiveScript! 当我开始写 <code>core-js</code> 时，我主要使用的是 <a href="http://livescript.net/" target="_blank" rel="noopener noreferrer">LiveScript<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ；一段时间后，我用 JavaScript 重写了全部的 polyfills 。在 <code>core-js@2</code> 中测试和帮助的工具函数仍然使用 LiveScript ：它是非常有趣的像 CoffeeScript 一样的语言，有强大的语法糖使你能够写非常紧凑的代码，但是它几乎已经死了。除此之外，它也是为 <code>core-js</code> 贡献的屏障，因为大多数 <code>core-js</code> 用户不知道这个语言。<code>core-js@3</code> 测试和工具函数使用现代 ES 语法：它将成为为 <code>core-js</code> 贡献的好时机🙂。</p> <p>对于大多数用户，为了优化 <code>core-js</code> 导入，我建议使用 <a href="#Babel">babel</a>。当然，有些情况下 <a href="http://npmjs.com/package/core-js-builder" target="_blank" rel="noopener noreferrer"><code>core-js-builder</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 仍然有用。现在它支持 <code>target</code> 参数，使用带有目标引擎的<a href="https://github.com/browserslist/browserslist" target="_blank" rel="noopener noreferrer"><code>浏览器列表</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 查询 - 你能够创建一个 bundle，仅仅包含目标引擎需要的 polyfills。对于这种情况，我做了 <a href="https://www.npmjs.com/package/core-js-compat" target="_blank" rel="noopener noreferrer"><code>core-js-compat</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，更多关于它的信息，你能够从 <a href="#babelpreset-env">这篇文章的 <code>@babel/preset-env</code> 部分</a>了解到。</p> <hr> <p>这仅仅是冰山一角，更多的变化在内部。更多关于 <code>core-js</code> 变化可以在 <a href="https://github.com/zloirock/core-js/blob/master/CHANGELOG.md#300" target="_blank" rel="noopener noreferrer">changelog<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中找到。</p> <h2 id="babel"><a href="#babel" class="header-anchor">#</a> Babel</h2> <p>正如上文提到的，<code>babel</code> 和 <code>core-js</code> 是紧密集成的：<code>babel</code> 提供了优化 <code>core-js</code> 优化导入的可能性。<code>core-js@3</code> 开发中很重要的一部分是改进 <code>core-js</code> 相关的 <code>babel</code> 功能（看<a href="https://github.com/babel/babel/pull/7646" target="_blank" rel="noopener noreferrer">这个PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）。这些变化在 <a href="https://babeljs.io/blog/2019/03/19/7.4.0" target="_blank" rel="noopener noreferrer">Babel 7.4.0<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 发布了。</p> <h3 id="babel-polyfill"><a href="#babel-polyfill" class="header-anchor">#</a> babel/polyfill</h3> <p><a href="https://babeljs.io/docs/en/next/babel-polyfill.html" target="_blank" rel="noopener noreferrer"><code>@babel/polyfill</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是一个包裹的包，里面仅仅包含 <code>core-js</code> 稳定版的引入（在Babel 6 中也包含提案）和 <code>regenerator-runtime/runtime</code>，用来转译 generators 和 async 函数。这个包没有提供从 <code>core-js@2</code> 到 <code>core-js@3</code> 平滑升级路径：因为这个原因，决定弃用 <code>@babel/polyfill</code> 代之以分别引入需要的 <code>core-js</code> 和 <code>regenerator-runtime</code> 。</p> <p>原来</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">&quot;@babel/polyfill&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>现在使用两行代替：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">&quot;core-js/stable&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;regenerator-runtime/runtime&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>别忘记直接安装这两个依赖！</p> <div class="language-js extra-class"><pre class="language-js"><code>npm i <span class="token operator">--</span>save core<span class="token operator">-</span>js regenerator<span class="token operator">-</span>runtime
</code></pre></div><h3 id="babe-preset-env"><a href="#babe-preset-env" class="header-anchor">#</a> @babe/preset-env</h3> <p><a href="https://babeljs.io/docs/en/next/babel-preset-env#usebuiltins" target="_blank" rel="noopener noreferrer"><code>@babel/preset-env</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 有两种不同的模式，通过 <code>useBuiltIns</code> 选项：<code>entry</code> 和 <code>usage</code> 优化 <code>core-js</code>的导入。</p> <p>Babel 7.4.0 引入了两种模式的共同更改，以及每种模式的特定的修改。</p> <p>由于现在 <code>@babel/preset-env</code> 支持 <code>core-js@2</code> 和 <code>core-js@3</code>，因此 <code>useBuiltIns</code> 需要新的选项 -- <code>corejs</code>，这个选项用来定义使用 <code>core-js</code> 的版本（<code>corejs: 2</code> 或者 <code>corejs: 3</code>）。如果没有设置，<code>corejs: 2</code> 是默认值并且会有警告提示。</p> <p>为了使 babel 支持将来的次要版本中引入的 <code>core-js</code> 的新功能，你可以在项目中定义明确的次要版本号。例如，你想使用 <code>core-js@3.1</code> 使用这个版本的新特性，你可以设置 <code>corejs</code> 选项为 <code>3.1</code>：<code>corejs: '3.1'</code> 或者 <code>corejs: {version: '3.1'}</code>。</p> <p><code>@babel/preset-env</code> 最重要的一个功能就是提供不同浏览器支持特性的数据来源，用来确定是否需要 <code>core-js</code> 填充某些内容。 <a href="https://caniuse.com/" target="_blank" rel="noopener noreferrer"><code>caniuse</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，<a href="https://developer.mozilla.org/en-US/" target="_blank" rel="noopener noreferrer"><code>mdn</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="http://kangax.github.io/compat-table/es6/" target="_blank" rel="noopener noreferrer"><code>compat-table</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是很好的教育资源，但是并不意味着他们能够作为数据源被开发者使用：只有 <code>compat-table</code> 包函好的 ES 相关数据集，它被 <code>@babel/preset-env</code> 使用，但是仍有些限制：</p> <ul><li><p>它包含的数据仅仅关于 ECMAScript 特性和提案，和 web 平台特性例如 <code>setImmediate</code> 或者 DOM 集合迭代器没有关系。所以直到现在，<code>@babel/preset-env</code> 仍然通过 <code>core-js</code> 添加全部的 web 平台特性即使他们已经支持了。</p></li> <li><p>它他不包含任何浏览器（甚至是严重的）bug 信息：例如，上文提到的在 Safari 12 中 <code>Array#reverse</code>，但是 <code>compat-table</code> 并没有将它标记为不支持。另一方面，<code>core-js</code> 已经修复了这个错误实现，但是因为 <code>compat-table</code> 关系，并不能使用它。</p></li> <li><p>它仅包函一些基础的、幼稚的测试，没有检查功能在真实环境下是否可以正常工作。例如，老版本 Safari 的破坏的迭代器没有 <code>.next</code> 方法，但是 <code>compat-table</code> 表明 Safari 支持，因为它用 <code>typeof</code> 方法检测迭代器方法返回了 <code>&quot;function&quot;</code>。一些像 typed arrays 的功能几乎没有覆盖。</p></li> <li><p><code>compat-table</code> 不是为了向工具提供数据而设计的。我是 <code>compat-table</code> 的维护者之一，但是<a href="https://github.com/kangax/compat-table/pull/1312" target="_blank" rel="noopener noreferrer">其他的维护者反对为维护这个功能<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></li></ul> <p>因为这个原因，我创建了 <a href="https://github.com/zloirock/core-js/tree/master/packages/core-js-compat" target="_blank" rel="noopener noreferrer"><code>core-js-compat</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：它提供了对于不同浏览器 <code>core-js</code> 模块的必要性数据。当使用 <code>core-js@3</code> 时，<code>@babel/preset-env</code> 将使用新的包取代 <code>compat-table</code>。<a href="https://github.com/zloirock/core-js/blob/master/CONTRIBUTING.md#updating-core-js-compat-data" target="_blank" rel="noopener noreferrer">请帮助我们测试并提供缺少的引擎的数据的映射关系！<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>😊。</p> <p>在 Babel 7.3 之前，<code>@babel/preset-env</code> 有一些与 polyfills 注入顺序有关的问题。从 7.4.0开始，<code>@babel/preset-env</code> 只按推荐顺序增加需要的 polyfills 。</p> <h4 id="usebuiltins-entry-with-corejs-3"><a href="#usebuiltins-entry-with-corejs-3" class="header-anchor">#</a> <code>useBuiltIns: entry</code> with <code>corejs: 3</code></h4> <p>当使用这个选项时，<code>@babel/preset-env</code> 代替直接引用 <code>core-js</code> 而是引入目标环境特定需要的模块。</p> <p>在这个变化前，<code>@babel/preset</code> 仅替换 <code>import '@babel/polyfill'</code> 和 <code>import 'core-js'</code>，他们是同义词用来 polyfill 所有稳定的 JavaScript 特性。</p> <p>现在 <code>@babel/polyfill</code> 弃用了，当 <code>corejs</code> 设置为 3 时 <code>@babel/preset-env</code> 不会转译他。</p> <p><code>core-js@3</code> 中等价替换 <code>@babel/polyfill</code> 是</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">&quot;core-js/stable&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;regenerator-runtime/runtime&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>当目标浏览器是 <code>chrome 72</code> 时，上面的内容将被 <code>@babel/preset-env</code> 转换为</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">&quot;core-js/modules/es.array.unscopables.flat&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/modules/es.array.unscopaables.flat-map&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/modules/es.object.from-entries&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/modlues/web.immediate&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>当目标浏览器是 <code>chrome 73</code>（它完全支持 ES2019 标准库），他将变为很少的引入：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">&quot;core-js/modules/web.immediate&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>自从 <code>@babel/polyfill</code> 被弃用，转而使用分开的 <code>core-js</code> 和 <code>regenerator-runtime</code>，我们能够优化 <code>regenerator-runtime</code> 的导入。因为这个原因，如果目标浏览器原生支持 generators ，那么 <code>regenerator-runtime</code> 的导入将从源代码中移除。</p> <p>现在，设置 <code>useBuiltIns: entry</code> 模式的 <code>@babel/preset-env</code> 编译所有能够获得的 <code>core-js</code> 入口和他们的组合。这意味着你能够自定义，通过使用不同的 <code>core-js</code> 入口，它将根据的目标环境优化。</p> <p>例如，目标环境是 <code>chrome 72</code>，</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">&quot;core-js/es&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/proposals/set-methods&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/features/set/map&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>将被替换为</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">&quot;core-js/modules/es.array.unscopables.flat&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/modules/es.array.unscopables.flat-map&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/modules/es.object.from-entries&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/modules/esnext.set.difference&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/modules/esnext.set.intersection&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/modules/esnext.set.is-disjoint-from&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/modules/esnext.set.is-subset-of&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/modules/esnext.set.is-superset-of&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/modules/esnext.set.map&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/modules/esnext.set.symmetric-difference&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/modules/esnext.set.union&quot;</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="usebuiltins-usage-with-corejs-3"><a href="#usebuiltins-usage-with-corejs-3" class="header-anchor">#</a> <code>useBuiltIns: usage</code> with <code>corejs: 3</code></h4> <p>当使用这个选项时，<code>@babel/preset-env</code> 在每个文件的开头引入目标环境不支持、仅在当前文件中使用的 polyfills。</p> <p>例如，</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>当目标环境是老的浏览器例如 <code>ie 11</code>，将转换为</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">&quot;core-js/modules/es.array.includes&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/modules/es.array.iterator&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/modules/es.object.to-string&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;core-js/modules/es.set&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>当目标是 <code>chrome 72</code> 时不需要导入，因为这个环境需要 polyfills：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Babel 7.3 之前，<code>useBuiltIns: usage</code> 不稳定且不是足够可靠：许多 polyfills 不包函，并且添加了许多不是必须依赖的 polyfills。在 Babel 7.4 中，我尝试使它理解每种可能的使用模式。</p> <p>在属性访问器、对象解构、<code>in</code> 操作符、全局对象属性访问方面，我改进了确定使用哪个 polyfills 的技术。</p> <p><code>@babel/preset-env</code> 现在注入语法特性所需的 polyfills：使用 <code>for-of</code> 时的迭代器，解构、扩展运算符和 <code>yield</code> 委托；使用动态 <code>import</code> 时的 promises，异步函数和 generators，等。</p> <p>Babel 7.4 支持注入提案 polyfills。默认，<code>@babel/preset-env</code> 不会注入他们，但是你能够通过 <code>proposals</code> 标志设置：<code>corejs: { version: 3, proposals: true }</code>。</p> <h3 id="babel-runtime"><a href="#babel-runtime" class="header-anchor">#</a> @babel/runtime</h3> <p>当使用 <code>core-js@3</code> 时， <a href="https://babeljs.io/docs/en/next/babel-plugin-transform-runtime#corejs" target="_blank" rel="noopener noreferrer"><code>@babel/transform-runtime</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 现在通过 <code>core-js-pure</code>（<code>core-js</code>的一个版本，不会污染全局变量） 注入 polyfills。</p> <p>通过将 <code>@babel/transform-runtime</code> 设置 <code>corejs: 3</code> 选项和创建 <code>@babel/runtime-corejs3</code> 包，已经将 <code>core-js@3</code> 和 <code>@babel/runtime</code> 集成在一起。但是这将带来什么好处呢？</p> <p><code>@babel/runtime</code> 的一个受欢迎的 issue 是：不支持实例方法。从 <code>@babel/runtime-corejs3</code> 开始，这个问题已经解决。例如，</p> <div class="language-js extra-class"><pre class="language-js"><code>array<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>something<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>将被编译为</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> _includesInstanceProperty <span class="token keyword">from</span> <span class="token string">&quot;@babel/runtime-corejs3/core-js-stable/instance/includes&quot;</span><span class="token punctuation">;</span>

<span class="token function">_includesInstanceProperty</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> something<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>另一个值得关注的变化是支持 ECMAScript 提案。默认情况下的，<code>@babel/plugin-transform-runtime</code> 不会为提案注入 polyfills 并使用不包含提案的入口。但是正如你在 <code>@babel/preset-env</code> 中做的那样，你可以设置 <code>proposals</code> 标志去开启：<code>corejs: { version: 3, proposals: true }</code>。</p> <p>没有 <code>proposals</code> 标志，</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
string<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">something</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>将被编译为：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> _Set <span class="token keyword">from</span> <span class="token string">&quot;@babel/runtime-corejs/core-js-stable/set&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">_set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
string<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">something</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>当设置 <code>proposals</code> 后，将变为：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> _Set <span class="token keyword">from</span> <span class="token string">&quot;@babel/runtime-corejs3/core-js/set&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> _matchAllInstanceProperty <span class="token keyword">from</span> <span class="token string">&quot;@babel/runtime-corejs/core-js/instance/match-all&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">_Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">_matchAllInstanceProperty</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>string<span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">something</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>有些老的问题已经被修复了。例如，下面这种流行的模式在 <code>@babel/runtime-corejs2</code> 不工作，但是在 <code>@babel/runtime-corejs3</code> 被支持。</p> <div class="language-js extra-class"><pre class="language-js"><code>myArrayLikeObject<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>tierator<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>尽管 <code>@babel/runtime</code> 早期版本不支持实例方法，但是使用一些自定义的帮助函数能够支持迭代（<code>[Symbol.iterator]()</code> 和他的presence）。之前不支持提取 <code>[Symbol.iterator]</code> 方法，但是现在支持了。</p> <p>作为意外收获，<code>@babel/runtime</code> 现在支持IE8-，但是有些限制，例如，IE8- 不支持访问器、模块转换应该用松散的方式，<code>regenerator-runtime</code>（内部使用 ES5+ 实现）需要通过这个插件转译。</p> <h2 id="畅享未来"><a href="#畅享未来" class="header-anchor">#</a> 畅享未来</h2> <p>做了许多工作，但是 <code>core-js</code> 距离完美还很远。这个库和工具将来应该如何改进？语言的变化将会如何影响它？</p> <h3 id="老的引擎支持"><a href="#老的引擎支持" class="header-anchor">#</a> 老的引擎支持</h3> <p>现在，<code>core-js</code> 试图去支持所有可能的引擎或者我们能够测试到的平台：甚至是IE8-，或者例如，早期版本的 Firefox。虽然它对某些用户有用，但是仅有一小部分使用 <code>core-js</code> 的开发者需要它。对于大多数用户，它将引起像包体积过大或者执行缓慢的问题。</p> <p>主要的问题源自于支持 ES3 引擎（首先是 IE8- ）：多数现代 ES 特性是基于 ES5，这些功能在老版本浏览器中均不可用。</p> <p>最大的缺失特性是属性描述符：当它缺失时，一些功能不能 polyfill，因为他们要么是访问器（像 <code>RegExp.prototype.flags</code> 或 <code>URL</code> 属性的 setters ）要么就是基于访问器（像 typed array polyfill）。为了解决这个不足，我们需要使用不同的解决方法（例如，保持 <code>Set.prototype.size</code> 更新）。维护这些解决方法有时很痛苦，移除他们将极大的简化许多 polyfills。</p> <p>然而，描述符仅仅是问题的一部分。ES5 标准库包含了很多其他特性，他们被认为是现代 JavaScript 的基础：<code>Object.create</code>，<code>Object.getPrototypeOf</code>，<code>Array.prototype.forEach</code>，<code>Function.prototype.bind</code>，等等。和多数现代特性不同，<code>core-js</code> 内部依赖他们并且<a href="https://github.com/babel/babel/pull/7646#discussion_r179333093" target="_blank" rel="noopener noreferrer">为了实现一个简单的现代函数，<code>core-js</code> 需要加载其中一些&quot;建筑模块&quot;的实现<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。对于想要创建一个足够小的构建包和仅仅想要引入部分 <code>core-js</code> 的用户来说，这是个问题。</p> <p>在一些国家 IE8 仍很流行，但是为了让 web 向前发展，浏览器到了某些时候就应该消失了。 <code>IE8</code> 在 2009 年 3 月 19 日发布，到今天已经 10 年了。IE6 已经 18 岁了：几个月前新版的 <code>core-js</code> 已经不再测试 IE6 了。</p> <p>在 <code>core-js@4</code> 我们应该舍弃 IE8- 和其他不知道 ES5 的引擎。</p> <h3 id="ecmascript-模块"><a href="#ecmascript-模块" class="header-anchor">#</a> ECMAScript 模块</h3> <p><code>core-js</code> 使用 <code>CommonJS</code> 模块规范。长期以来，他是最受欢迎的 JavaScript 模块规范，但是现在 ECMAScript 提供了他自己的模块规范。许多引擎已经支持它了。一些构建工具（像 rollup ）基于它，其他的构建工具提供它作为 <code>CommonJS</code> 的替代。这意味提供了一个可选择的使用 ESMAScript 模块规范版本的 <code>core-js</code> 行得通。</p> <h3 id="支持-web-标准扩展"><a href="#支持-web-标准扩展" class="header-anchor">#</a> 支持 web 标准扩展？</h3> <p><code>core-js</code> 当前专注在 ECMAScript 支持，但是也支持少量的跨平台以及和 ECMAScript 紧密联系的 web 标准功能。为 web 标准添加像 <code>fetch</code> 的这种的 polyfill 是受欢迎的功能请求。</p> <p><code>core-js</code> 没有增加他们的主要原因是，他们将严重的增加构建包大小并且将强制 <code>core-js</code> 用户载入他们可能用不到的功能。现在 <code>core-js</code> 是最大限度的模块化，用户能够仅选择他们需要的功能，这就像 <code>@babel/preset-env</code> 和 <code>@babel/runtime</code> 能够帮助用户去减少没用到和不必要的 polyfills。</p> <p>现在是时候重新审视这个决定了？</p> <h3 id="针对目标环境的-babel-runtime"><a href="#针对目标环境的-babel-runtime" class="header-anchor">#</a> 针对目标环境的 <code>@babel/runtime</code></h3> <p>目前，我们不能像对 <code>@babel/preset-env</code> 那样为 <code>@babel/runtimne</code> 设置目标加环境。这意味即使目标是现代浏览器， <code>@babel/runtime</code> 也将注所有可能的 polyfills：这不必要的增加了最终构建包的大小。</p> <p>现在 <code>core-js-compat</code> 包函全部必要数据，将来，可以在 <code>@babel/runtime</code> 中添加对目标环境的编译支持，并且在 <code>@babel/preset-env</code> 中添加 <code>useBuiltIns: runtime</code> 选项。</p> <h3 id="更好的优化-polyfill-加载"><a href="#更好的优化-polyfill-加载" class="header-anchor">#</a> 更好的优化 polyfill 加载</h3> <p>正如上面解释的，Babel 插件给了我们不同的方式去优化 <code>core-js</code> 的使用，但是他并不完美：我们可以改进他们。</p> <p>通过 <code>useBuiltIns: usage</code> 选项，<code>@babe/preset-env</code> 能够做的比之前更好，但是针对一些不寻常的例子他们仍然会失败：当代码不能被静态分析。针对这个问题，我们需要为库开发者寻找一个方式去确定哪种 polyfill 是他们的库需要的，而不是直接载入他们：某种元数据 -- 将在创建最终构建包时注入 polyfill。</p> <p>另一个针对 <code>useBuiltIns: usage</code> 的问题是重复的 polyfills 导入。<code>useBuiltIns: usage</code> 能够在每个文件中注入许多 <code>core-js</code> 的导入。但如果我们的项目有数千个文件或者即使十分之一会怎么样呢？这种情况下，与导入 <code>core-js</code> 自身相比，导入 <code>core-js/...</code> 将有更多代码行：我们需要一种方式去收集所有的导入到一个文件中，这样才能够删除重复的。</p> <p>几乎每一个需要支持像 <code>IE11</code> 浏览器的 <code>@babel/preset-env</code> 用户都为每个浏览器使用同一个构建包。这意味着完全支持 ES2019 的现代浏览器将加载不必要的、仅仅是 IE11 需要的 polyfills。当然，我们可以为不同的浏览器创建不同的构建包来使用，例如，<code>type=module</code> /
<code>nomodules</code> 属性：一个构建包给支持模块化的现代浏览器，另一个给传统浏览器。不幸的是，这不是针对这个问题的完整的解决方案：基于用户代理打包目标浏览器需要的 polyfill 的服务非常有用。我们已经有了一个 - <a href="https://github.com/Financial-Times/polyfill-service" target="_blank" rel="noopener noreferrer"><code>polyfill-service</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。尽管很有趣也很流行，但是 polyfill 的质量还有很多不足。它不像几年前那么差：项目团队积极工作去改变它，但是如果你想用他们匹配原生实现，我不建议你通过这个项目使用 polyfill。许多年前我尝试通过这个项目将 <code>core-js</code> 作为 polyfill 的源，但是这不可能。因为 <code>polyfill-service</code> 依赖文件嵌套而不是模块化（就像 <code>core-js</code> 发布后的前几个月 😊）。</p> <p>像这样一个集成了一个很棒的 polyfill 源 -- <code>core-js</code> 的服务，通过像 Babel 的 <code>useBuiltIns: usage</code> 选项，静态分析源代码真的能够引起我们对于 polyfill 思考方式的革命。</p> <h3 id="来自-tc39-的新功能预案和-core-js-可能的问题"><a href="#来自-tc39-的新功能预案和-core-js-可能的问题" class="header-anchor">#</a> 来自 TC39 的新功能预案和 <code>core-js</code> 可能的问题</h3> <p>TC39 一直在努力工作去改进 ECMAScript：你可以通过查看 <code>core-js</code> 中实现所有新提案查看进度。然而，我认为有些新的提案功能在 polyfill 或者转译时可能引起严重的问题。关于这个足够可以写一篇新的文章，但是我将尝试在这总结一下我的想法。</p> <h4 id="标准库提案-stage-1"><a href="#标准库提案-stage-1" class="header-anchor">#</a> 标准库提案，stage 1</h4> <p>现在，TC39 考虑给 ECMAScript 增加<a href="https://github.com/tc39/proposal-javascript-standard-library" target="_blank" rel="noopener noreferrer">内置模块<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：一个模块化的标准库。它将成为 JavaScript 的最佳补充，而 <code>core-js</code> 是它可以被 polyfill 的最佳位置。根据 <code>@babel/preset-env</code> 和 <code>@babel/runtime</code> 用到的技术，理论上我们可以通过一种简单的方式注入内置模块需要的 polyfill。然而，这个提案的当前版本会导致一些严重问题，这些问题并没有使其简单明了。</p> <p>内置模块的 polyfill，<a href="https://github.com/tc39/proposal-javascript-standard-library/issues/2" target="_blank" rel="noopener noreferrer">根据作者的提案<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，仅仅意味着退回到分层 API 或者 导入 maps。这表明如果原生模块缺失，它将能够通过提供的 url 载入一个polyfill。这绝对不是 polyfill 需要的，并且它与 <code>core-js</code> 的架构以及其他流行的 polyfill 都不兼容。导入 maps 不应该是 polyfill 内置模块的唯一方式。</p> <p>我们通过一个特定前缀使用 ES 模块语法就能够得到内置模块。这个语法在语言的早期版本并没有对等的 - 转译模块不可能在现在浏览器中与未转译的交互 - 这会导致包分发的问题。</p> <p>更进一步讲，他将异步工作。对于功能检测这是个严重的问题 - 当你要检测一个功能并且加载 polyfill 时脚本不会等待 - 功能检测应该同步的做。</p> <p><a href="https://developers.google.com/web/updates/2019/03/kv-storage" target="_blank" rel="noopener noreferrer">在没有转译和 polyfill 的情况下第一次实现内置模块<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。如果没有修改，在当前的 <code>core-js</code> 格式下内置模块将不可能 polyfill。建议的 polyfill 方式将使开发变得严重复杂。</p> <p>这个标准库的问题能够通过添加一个新的全局变量解决（这将是最后一个吗？）：一个内置模块的注册表将允许异步的设置和获取，例如：</p> <div class="language-js extra-class"><pre class="language-js"><code>StandardLibraryRegistry<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>moduleName<span class="token punctuation">)</span><span class="token punctuation">;</span>
StandardLibraryRegistry<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>moduleName<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>异步回调，比如分层API应该全局注册表之后使用。</p> <p>值得一提的是，它将简化将本地模块导入到老的语法的转换。</p> <h4 id="装饰器提案-新的迭代器语法-stage-2"><a href="#装饰器提案-新的迭代器语法-stage-2" class="header-anchor">#</a> 装饰器提案，新的迭代器语法，stage 2</h4> <p>这个提案中的 <a href="https://github.com/tc39/proposal-decorators" target="_blank" rel="noopener noreferrer">新迭代器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，他被很认真的重做了。装饰器定义不再是语法糖，就像内置模块，我们不能在老版本的语言中编写装饰器并将其用作原生装饰器。除此之外，装饰器不仅仅是普通的标识符 - 他们生活在平行的词汇范围内：这意味着已经编译的装饰器不能喝原生装饰器交互。</p> <p>提案作者建议使用未编译的装饰器发布包，让包的使用者选择去编译他们的依赖。然而，在不同的情况下是不可能的。当他们被添加到 JS 标准库时，这个方法将阻止 <code>core-js</code> polyfill 新的内置装饰器。</p> <p>装饰器应该是在某些东西上应用功能的一种方法，他们应该仅仅是包裹的语法糖。为什么要复杂化呢？</p> <hr> <p>如果引入的一个语言功能不是从根本上是新的，在语言的早期版本什么不应该实现是可以选择的，我们能够转译或者 polyfill 它，被转译或者 polyfill 的代码应该能够和支持这个功能的浏览器原生交互。</p> <p>我希望根据提案作者和委员会的智慧，这些提案能够被采纳，这样才能够合理的转译或者 polyfill 他们。</p> <hr> <p>如果你对 <code>core-js</code> 项目感兴趣，或者你在你日常工作中使用它，你可以成为 <a href="https://opencollective.com/core-js#sponsor" target="_blank" rel="noopener noreferrer">OpenCollective<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 或者 <a href="https://www.patreon.com/zloirock" target="_blank" rel="noopener noreferrer">Patreon<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 捐赠者。<code>core-js</code> 的背后不是一个公司：他的将来要靠你。</p> <hr> <p><a href="https://github.com/zloirock/core-js/issues/496" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 可以评论这篇文章。</p> <p><a href="https://github.com/zloirock" target="_blank" rel="noopener noreferrer">Denis Pushkarev<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，2019年3月19日，感谢 <a href="https://github.com/nicolo-ribaudo" target="_blank" rel="noopener noreferrer">Nicolò Ribaudo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 编辑。</p> <h2 id="可能用到的资料"><a href="#可能用到的资料" class="header-anchor">#</a> 可能用到的资料</h2> <ul><li><a href="https://javascript.ruanyifeng.com/nodejs/module.html" target="_blank" rel="noopener noreferrer">CommonJS 模块规范<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://es6.ruanyifeng.com/#docs/module" target="_blank" rel="noopener noreferrer">ECMAScript 模块规范<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="感谢阅读"><a href="#感谢阅读" class="header-anchor">#</a> 感谢阅读</h2> <p>感谢你阅读到这里，翻译的不好的地方，还请指点。希望我的内容能让你受用，再次感谢。<a href="https://llccing.github.io/FrontEnd/" target="_blank" rel="noopener noreferrer">by llccing 千里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2025-12-15 11:41:00</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/FrontEnd/blog/translate/what-you-need-know-about-Vue-3-in-2020.html" class="prev">
        2020年关于 Vue 3 你需要知道的事
      </a></span> <span class="next"><a href="/FrontEnd/blog/translate/vue-cli-plugin-dev.html">
        Vue CLI 插件开发指南
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/FrontEnd/assets/js/app.8145b916.js" defer></script><script src="/FrontEnd/assets/js/2.3f4cbde9.js" defer></script><script src="/FrontEnd/assets/js/1.4a225f88.js" defer></script><script src="/FrontEnd/assets/js/207.a7c28489.js" defer></script>
  </body>
</html>
